(()=>{var qt=Object.defineProperty;var me=(e,t)=>()=>(e&&(t=e(e=0)),t);var Ut=(e,t)=>{for(var n in t)qt(e,n,{get:t[n],enumerable:!0})};var ae,i,_,re=me(()=>{ae=typeof rtgData<"u"&&rtgData.settings&&rtgData.settings.rowsPerPage?rtgData.settings.rowsPerPage:12,i={filteredRows:[],allRows:[],currentPage:1,compareList:[],tireRatings:{},userRatings:{},userReviews:{},isLoggedIn:!1,userFavorites:new Set,guestPendingReviews:new Set,VALID_SIZES:[],VALID_BRANDS:[],VALID_CATEGORIES:[],domCache:{},cardCache:new Map,cardContainer:null,isRendering:!1,pendingRender:!1,lastFilterState:null,initialRenderDone:!1,renderAnimationFrame:null,eventDelegationSetup:!1,ratingRequestQueue:[],ratingRequestTimeout:null,activeTooltip:null,serverSideMode:!1,serverSideTotal:0,serverSideFetchController:null},_={sizeIndex:new Map,brandIndex:new Map,categoryIndex:new Map,priceIndex:[],warrantyIndex:[],weightIndex:[]}});function M(e){return getComputedStyle(document.documentElement).getPropertyValue("--rtg-"+e).trim()}function k(e,t,n){var r="fa-solid",a="fa-"+e;e==="heart-outline"?(r="fa-regular",a="fa-heart"):e==="arrow-up-right"?a="fa-up-right-from-square":e==="trash"?a="fa-trash-can":e==="share"&&(a="fa-share-nodes");var o=r+" "+a;n&&(o+=" "+n);var s=t?' style="font-size:'+t+'px"':"";return'<i class="'+o+'"'+s+' aria-hidden="true"></i>'}function B(e){return typeof e!="string"?"":String(e).replace(/[&<>"'\/]/g,function(t){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"}[t]})}function g(e,t=200){if(typeof e!="string")return"";let n=String(e).trim();return n.length>t?n.substring(0,t):n}function l(e){return i.domCache[e]||(i.domCache[e]=document.getElementById(e)),i.domCache[e]}function xe(e,t){let n;return function(...r){clearTimeout(n),n=setTimeout(()=>e.apply(this,r),t)}}function Pe(e=22){return`<svg viewBox="0 0 24 24" width="${e}" height="${e}" aria-hidden="true"><path class="star-bg" d="${Ye}" fill="none" stroke="currentColor" stroke-width="1.5"/><path class="star-fill" d="${Ye}" fill="currentColor"/><path class="star-half" d="${Ye}" fill="currentColor" style="clip-path:inset(0 50% 0 0)"/></svg>`}function he(e){let t=parseFloat(e.min),n=parseFloat(e.max),a=(parseFloat(e.value)-t)/(n-t)*100;e.style.setProperty("--percent",`${a}%`)}function be(e){e.style.backgroundColor=M("bg-primary"),e.style.color=M("text-primary"),e.style.padding="8px 16px",e.style.border="none",e.style.borderRadius="6px",e.style.cursor="pointer",e.style.fontWeight="600",e.onmouseover=()=>{e.style.backgroundColor=M("accent"),e.style.color="#0f172a"},e.onmouseout=()=>{e.style.backgroundColor=M("bg-primary"),e.style.color=M("text-primary")}}var Ye,te=me(()=>{re();Ye="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"});function Ce(e,t=null){if(typeof e!="string")return"";let n;return t===T.search?n=e.replace(/[<>\"'&\\]/g,"").trim():n=e.replace(/[<>\"'&\/\\]/g,"").trim(),t&&!t.test(n)?"":n.length>100?n.substring(0,100):n}function Ee(e){if(typeof e!="string"||!e.trim())return"";let t=e.trim();if(!T.imageUrl.test(t))return t.match(/\.(jpg|jpeg|png|webp|gif)$/i),"";try{let n=new URL(t);return n.protocol!=="https:"||n.hostname!=="riviantrackr.com"||n.pathname.includes("..")||n.pathname.includes("//")?"":t}catch{return t.match(/\.(jpg|jpeg|png|webp|gif)$/i),""}}function st(e){if(typeof e!="string"||!e.trim())return"";let t=e.trim();if(!T.affiliateUrl.test(t))return t.startsWith("http"),"";try{let n=new URL(t);if(n.protocol!=="https:")return"";let r=["riviantrackr.com","tirerack.com","discounttire.com","amazon.com","amzn.to","costco.com","walmart.com","goodyear.com","bridgestonetire.com","michelinman.com","continental-tires.com","pirelli.com","sumitomotire.com","yokohamatire.com","coopertire.com","bfgoodrichtires.com","firestone.com","generaltire.com","hankooktire.com","kumhotire.com","nexentire.com","toyo.com","falkentire.com","nittotire.com","autozone.com","pepboys.com","ntb.com","simpletire.com","prioritytire.com","anrdoezrs.net","dpbolvw.net","jdoqocy.com","kqzyfj.com","tkqlhce.com","commission-junction.com","cj.com","linksynergy.com","click.linksynergy.com","shareasale.com","avantlink.com","impact.com","partnerize.com"],a=n.hostname.toLowerCase();return!r.some(s=>a===s||a.endsWith("."+s))||n.pathname.includes("..")?"":t}catch{return""}}function ct(e){if(typeof e!="string"||!e.trim())return"";let t=e.trim();if(!/^https:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,}\/[a-zA-Z0-9\-\/_\.%&=?#:+@]*$/.test(t))return"";try{let r=new URL(t);if(r.protocol!=="https:")return"";let a=["riviantrackr.com","www.riviantrackr.com","youtube.com","www.youtube.com","youtu.be","tiktok.com","www.tiktok.com","instagram.com","www.instagram.com"],o=r.hostname.toLowerCase();return!a.some(c=>o===c||o.endsWith("."+c))||r.pathname.includes("..")?"":t}catch{return""}}function b(e,t,n=0){if(typeof e=="string"){if(!T.numeric.test(e))return n;e=parseFloat(e)}return typeof e!="number"||isNaN(e)?n:e<t.min||e>t.max?Math.max(t.min,Math.min(t.max,e)):e}function je(e){if(!Array.isArray(e)||e.length<23)return null;let t=new Array(e.length);for(let n=0;n<e.length;n++){let r=e[n];typeof r=="string"?(t[n]=r.replace(/[<>\"'&]/g,"").trim(),t[n].length>500&&(t[n]=t[n].substring(0,500))):typeof r=="number"?n===6?t[n]=b(r,A.price):n===7?t[n]=b(r,A.warranty):n===8?t[n]=b(r,A.weight):t[n]=typeof r=="number"&&!isNaN(r)?r:0:t[n]=""}return!t[0]||!T.tireId.test(t[0])?null:t}var T,A,Be,ve=me(()=>{te();T={search:/^[a-zA-Z0-9\s\-\/\.\+\*\(\)]*$/,tireId:/^[a-zA-Z0-9\-_]+$/,numeric:/^\d+(\.\d+)?$/,affiliateUrl:/^https:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,}\/[a-zA-Z0-9\-\/_\.%&=?#:+]*$/,imageUrl:/^https:\/\/riviantrackr\.com\/.*\.(jpg|jpeg|png|webp)$/i},A={price:{min:0,max:2e3},warranty:{min:0,max:1e5},weight:{min:0,max:200},rating:{min:1,max:5},page:{min:1,max:1e3}},Be=["efficiencyGrade","price-asc","price-desc","warranty-desc","weight-asc","reviewed","rating-desc","newest","most-reviewed"]});function dt(e,t){let n=document.createElement("div");n.style.cssText="display: flex; align-items: center; gap: 6px;";let r=document.createElement("span");r.className="tire-card-spec-label",r.textContent=e;let a=document.createElement("button");return a.innerHTML=""+k("circle-info",14),a.className="info-tooltip-trigger",a.dataset.tooltipKey=t,a.setAttribute("aria-label",`More info about ${e}`),a.setAttribute("type","button"),a.style.cssText=`
    background: none;
    border: none;
    color: var(--rtg-text-muted);
    font-size: 14px;
    cursor: pointer;
    padding: 2px;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
  `,a.addEventListener("mouseenter",()=>{a.style.color=M("accent"),a.style.backgroundColor=`color-mix(in srgb, ${M("accent")} 10%, transparent)`}),a.addEventListener("mouseleave",()=>{a.style.color=M("text-muted"),a.style.backgroundColor="transparent"}),n.appendChild(r),n.appendChild(a),n}function $e(e,t){let n=document.createElement("div");n.style.cssText="display: flex; align-items: center; gap: 6px;";let r=document.createElement("span");r.textContent=e;let a=document.createElement("button");return a.innerHTML=""+k("circle-info",14),a.className="info-tooltip-trigger",a.dataset.tooltipKey=t,a.setAttribute("aria-label",`More info about ${e}`),a.setAttribute("type","button"),a.style.cssText=`
    background: none;
    border: none;
    color: var(--rtg-text-muted);
    font-size: 14px;
    cursor: pointer;
    padding: 2px;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
  `,a.addEventListener("mouseenter",()=>{a.style.color=M("accent"),a.style.backgroundColor=`color-mix(in srgb, ${M("accent")} 10%, transparent)`}),a.addEventListener("mouseleave",()=>{a.style.color=M("text-muted"),a.style.backgroundColor="transparent"}),n.appendChild(r),n.appendChild(a),n}function ut(e){lt();let t=Ze[e];if(!t)return;let n=document.createElement("div");n.className="tooltip-modal-overlay",n.style.cssText=`
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    animation: fadeIn 0.2s ease;
    backdrop-filter: blur(2px);
  `;let r=document.createElement("div");r.className="tooltip-modal",r.style.cssText=`
    background: ${M("bg-primary")};
    border-radius: 12px;
    padding: 20px;
    max-width: 400px;
    width: 100%;
    color: ${M("text-light")};
    border: 1px solid #475569;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
    animation: slideUp 0.2s ease;
    position: relative;
  `;let a=document.createElement("h3");a.textContent=t.title,a.style.cssText=`
    margin: 0 0 12px 0;
    font-size: 18px;
    font-weight: 700;
    color: ${M("accent")};
  `;let o=document.createElement("p");o.innerHTML=t.content,o.style.cssText=`
    margin: 0 0 16px 0;
    line-height: 1.5;
    font-size: 14px;
    color: #e2e8f0;
  `;let s=document.createElement("button");s.innerHTML=k("xmark",18),s.style.cssText=`
    position: absolute;
    top: 16px;
    right: 16px;
    background: none;
    border: none;
    color: var(--rtg-text-muted);
    font-size: 16px;
    cursor: pointer;
    padding: 4px;
    border-radius: 4px;
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
  `,s.addEventListener("mouseenter",()=>{s.style.color=M("text-light"),s.style.backgroundColor="rgba(148, 163, 184, 0.2)"}),s.addEventListener("mouseleave",()=>{s.style.color=M("text-muted"),s.style.backgroundColor="transparent"});let c=document.createElement("button");c.textContent="Got it",c.style.cssText=`
    background: ${M("accent")};
    color: #1a1a1a;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    font-weight: 600;
    cursor: pointer;
    font-size: 14px;
    transition: background-color 0.2s ease;
    width: 100%;
  `,c.addEventListener("mouseenter",()=>{c.style.backgroundColor=M("accent-hover")}),c.addEventListener("mouseleave",()=>{c.style.backgroundColor=M("accent")});let u=()=>lt();s.addEventListener("click",u),c.addEventListener("click",u),n.addEventListener("click",f=>{f.target===n&&u()});let d=f=>{f.key==="Escape"&&(u(),document.removeEventListener("keydown",d))};document.addEventListener("keydown",d),r.appendChild(a),r.appendChild(o),r.appendChild(s),r.appendChild(c),n.appendChild(r),document.body.appendChild(n),i.activeTooltip=n,document.body.style.overflow="hidden",c.focus()}function lt(){i.activeTooltip&&(i.activeTooltip.style.animation="fadeOut 0.2s ease",setTimeout(()=>{i.activeTooltip&&i.activeTooltip.parentNode&&i.activeTooltip.parentNode.removeChild(i.activeTooltip),i.activeTooltip=null,document.body.style.overflow=""},200))}var Ze,Ke=me(()=>{re();te();Ze={"Load Index":{title:"Load Index",content:"Rivian vehicles require tires with a minimum load index of 116 to safely carry the vehicle's weight. Using a lower load index can affect safety, handling, and durability."},"3PMS Rated":{title:"3PMS Rating",content:"3PMS (Three-Peak Mountain Snowflake) symbol indicates the tire meets winter traction requirements and is rated for severe snow service according to industry standards."},UTQG:{title:"UTQG Rating",content:"UTQG (Uniform Tire Quality Grading) provides standardized ratings for treadwear, temperature resistance (A, B, C), and traction performance (AA, A, B, C) to help compare tire quality."},"3PMS Filter":{title:"3PMS Rating Filter",content:"3PMS (Three-Peak Mountain Snowflake) means the tire meets winter traction requirements and is rated for severe snow service."},"EV Rated Filter":{title:"EV Rated Filter",content:"Filters for tires labeled as EV Rated in their specs or marketing. These are typically optimized for electric vehicles."},"Studded Available Filter":{title:"Studded Available Filter",content:'Filters for tires marked as "Studded Available" — these can be fitted with studs for enhanced traction on ice.'},"Officially Reviewed Filter":{title:"Officially Reviewed Filter",content:"Filters for tires that have an official review from RivianTrackr — either a written article or video review."},"Efficiency Score":{title:"Efficiency Score",content:"This Efficiency Score is a calculated score RivianTrackr created to help assist Rivian owners in identifying which tires are likely to be the most range-friendly. It uses a custom formula that factors in weight, tread depth, tire width, load range, speed rating, UTQG, tire category, and winter certification (3PMS). Lighter tires with shallower tread and less aggressive construction typically score higher. <br><br> The score is an estimate only and does not reflect real-world testing. It should not be viewed as a measure of tire quality, safety, or brand reputation."}}});function ye(e){if(!e.length)return Promise.resolve();let t=e.filter(n=>typeof n=="string"&&T.tireId.test(n)&&n.length<=50);return t.length?(i.ratingRequestQueue.push(...t),i.ratingRequestTimeout&&clearTimeout(i.ratingRequestTimeout),new Promise(n=>{i.ratingRequestTimeout=setTimeout(()=>{let r=[...new Set(i.ratingRequestQueue)];if(i.ratingRequestQueue=[],typeof tireRatingAjax<"u"&&(i.isLoggedIn=tireRatingAjax.is_logged_in===!0||tireRatingAjax.is_logged_in==="1"||tireRatingAjax.is_logged_in===1),typeof tireRatingAjax>"u"){n();return}let a=new FormData;a.append("action","get_tire_ratings"),tireRatingAjax.nonce&&a.append("nonce",tireRatingAjax.nonce),r.forEach(o=>{a.append("tire_ids[]",o)}),fetch(tireRatingAjax.ajaxurl,{method:"POST",body:a}).then(o=>o.json()).then(o=>{o.success&&(i.tireRatings={...i.tireRatings,...o.data.ratings},i.userRatings={...i.userRatings,...o.data.user_ratings},o.data.user_reviews&&(i.userReviews={...i.userReviews,...o.data.user_reviews}),i.isLoggedIn=o.data.is_logged_in===!0||o.data.is_logged_in==="1"||o.data.is_logged_in===1),n()}).catch(o=>{n()})},50)})):Promise.resolve()}function Ht(e,t,n="",r=""){if(!T.tireId.test(e))return Promise.reject("Invalid tire ID");let a=b(t,A.rating);if(a!==t)return Promise.reject("Invalid rating");if(!i.isLoggedIn)return Promise.reject("Not logged in — use submitGuestTireRating instead");if(typeof tireRatingAjax>"u"||!tireRatingAjax.nonce)return Promise.reject("Security validation failed");let o=new FormData;return o.append("action","submit_tire_rating"),o.append("tire_id",e),o.append("rating",a.toString()),o.append("nonce",tireRatingAjax.nonce),n&&o.append("review_title",n.substring(0,200)),r&&o.append("review_text",r.substring(0,5e3)),fetch(tireRatingAjax.ajaxurl,{method:"POST",body:o}).then(s=>s.json()).then(s=>{if(s.success)return i.tireRatings[e]={average:b(s.data.average_rating,{min:0,max:5}),count:b(s.data.rating_count,{min:0,max:1e4}),review_count:b(s.data.review_count,{min:0,max:1e4})},i.userRatings[e]=b(s.data.user_rating,A.rating),r&&(i.userReviews[e]={rating:a,review_title:n,review_text:r}),Xe(e),s.data;throw new Error(s.data||"Failed to save review")})}function Wt(e,t,n,r,a="",o="",s=""){if(!T.tireId.test(e))return Promise.reject("Invalid tire ID");let c=b(t,A.rating);if(c!==t)return Promise.reject("Invalid rating");if(!n||!n.trim())return Promise.reject("Name is required");if(!r||!r.trim())return Promise.reject("Email is required");if(!a.trim()&&!o.trim())return Promise.reject("Please write a review title or body text");if(typeof tireRatingAjax>"u"||!tireRatingAjax.nonce)return Promise.reject("Security validation failed");let u=new FormData;return u.append("action","submit_guest_tire_rating"),u.append("tire_id",e),u.append("rating",c.toString()),u.append("guest_name",n.trim().substring(0,100)),u.append("guest_email",r.trim().substring(0,254)),u.append("nonce",tireRatingAjax.nonce),a&&u.append("review_title",a.substring(0,200)),o&&u.append("review_text",o.substring(0,5e3)),u.append("website",s),fetch(tireRatingAjax.ajaxurl,{method:"POST",body:u}).then(d=>d.json()).then(d=>{if(d.success)return d.data;throw new Error(d.data||"Failed to submit review")})}function Gt(e){if(!T.tireId.test(e))return Promise.reject("Invalid tire ID");if(!i.isLoggedIn||typeof tireRatingAjax>"u"||!tireRatingAjax.nonce)return Promise.reject("Not logged in");let t=new FormData;return t.append("action","delete_tire_rating"),t.append("tire_id",e),t.append("nonce",tireRatingAjax.nonce),fetch(tireRatingAjax.ajaxurl,{method:"POST",body:t}).then(n=>n.json()).then(n=>{if(n.success)return i.tireRatings[e]={average:b(n.data.average_rating,{min:0,max:5}),count:b(n.data.rating_count,{min:0,max:1e4}),review_count:b(n.data.review_count,{min:0,max:1e4})},delete i.userRatings[e],delete i.userReviews[e],Xe(e),n.data;throw new Error(n.data||"Failed to delete rating")})}function Je(e,t=0,n=0,r=0){if(!T.tireId.test(e))return"<div>Error: Invalid tire data</div>";let a=b(t,{min:0,max:5},0),o=b(n,{min:0,max:1e4},0),s=r&&r>0?b(r,A.rating,0):0,c=!0,u=a>=4.5&&o>=2,d=document.createElement("div");d.className="tire-rating-container",d.dataset.tireId=e,u&&(d.dataset.highRating="true");let f=document.createElement("div");f.className="rating-display";let h=document.createElement("div");h.className=`rating-stars ${c?"interactive":""} ${s>0?"has-user-rating":""}`,h.dataset.tireId=e,h.setAttribute("role",c?"radiogroup":"img"),h.setAttribute("aria-label",a>0?`Rating: ${a.toFixed(1)} out of 5 stars`:"No reviews yet");let p=a>0?Math.round(a*2)/2:0;for(let y=1;y<=5;y++){let v=document.createElement("span");v.className="star",v.dataset.rating=y.toString(),v.dataset.tireId=e,v.innerHTML=Pe(26),p>=y?v.classList.add("active"):p>=y-.5&&v.classList.add("active","half"),s>0&&y<=s&&v.classList.add("user-rated"),c?(v.style.cursor="pointer",v.setAttribute("role","radio"),v.setAttribute("aria-checked",s===y?"true":"false"),v.setAttribute("aria-label",`${y} star${y!==1?"s":""}`),v.setAttribute("tabindex",y===(s||1)?"0":"-1")):v.setAttribute("aria-hidden","true"),h.appendChild(v)}let m=document.createElement("div");m.className="rating-info";let w=document.createElement("span");w.className="rating-average",w.textContent=a>0?a.toFixed(1):"No reviews",m.appendChild(w),f.appendChild(h),f.appendChild(m),d.appendChild(f);let x=document.createElement("div");x.className="review-actions";let R=i.tireRatings[e]?.review_count||0;if(R>0){let y=document.createElement("button");y.className="review-action-link view-reviews-btn",y.dataset.tireId=e;let v=document.createElement("span");v.innerHTML=k("message",14),v.style.display="inline-flex",y.appendChild(v),y.appendChild(document.createTextNode(` ${R} review${R!==1?"s":""}`)),x.appendChild(y)}if(i.isLoggedIn){let y=i.userReviews[e]?.rating,v=document.createElement("button");v.className="review-action-link write-review-btn",v.dataset.tireId=e,v.textContent=y?"Edit Review":"Write a Review",x.appendChild(v)}else if(i.guestPendingReviews&&i.guestPendingReviews.has(e)){let v=document.createElement("span");v.className="review-action-link rtg-review-pending-badge",v.textContent="Review Pending",x.appendChild(v)}else{let v=document.createElement("button");v.className="review-action-link write-review-btn",v.dataset.tireId=e,v.textContent="Write a Review",x.appendChild(v)}return d.appendChild(x),d.outerHTML}function Xe(e){if(!T.tireId.test(e))return;let t=document.querySelector(`[data-tire-id="${CSS.escape(e)}"] .tire-rating-container`);if(!t)return;let n=i.tireRatings[e]||{average:0,count:0},r=i.userRatings[e]||0;t.outerHTML=Je(e,n.average,n.count,r)}function Oe(e,t=0){let n=document.getElementById("rtg-review-modal");n&&n.remove();let r=i.userReviews[e]||{},a=t||r.rating||0,o=r.review_title||"",s=r.review_text||"",c=document.querySelector(`[data-tire-id="${CSS.escape(e)}"].tire-card`),u=c&&c.querySelector(".tire-card-brand")?.textContent||"",d=c&&c.querySelector(".tire-card-model")?.textContent||"",f=document.createElement("div");f.id="rtg-review-modal",f.className="rtg-review-modal-overlay",f.setAttribute("role","dialog"),f.setAttribute("aria-modal","true"),f.setAttribute("aria-label","Write a review");let h=document.createElement("div");h.className="rtg-review-modal";let p=document.createElement("div");p.className="rtg-review-modal-header";let m=document.createElement("h3");m.textContent=u&&d?`Review ${u} ${d}`:"Write a Review";let w=document.createElement("button");w.className="rtg-review-modal-close",w.setAttribute("aria-label","Close"),w.innerHTML="&times;",p.appendChild(m),p.appendChild(w);let x=document.createElement("div");x.className="rtg-review-modal-stars";let R=document.createElement("label");R.textContent="Your Rating";let y=document.createElement("div");y.className="rtg-review-stars-select",y.setAttribute("role","radiogroup"),y.setAttribute("aria-label","Select rating");let v=a;for(let E=1;E<=5;E++){let S=document.createElement("span");S.className="rtg-review-star"+(E<=v?" selected":""),S.dataset.value=E,S.innerHTML=Pe(40),S.setAttribute("role","radio"),S.setAttribute("aria-checked",E===v?"true":"false"),S.setAttribute("aria-label",`${E} star${E!==1?"s":""}`),S.setAttribute("tabindex",E===(v||1)?"0":"-1"),y.appendChild(S)}let W=document.createElement("span");W.className="rtg-review-rating-text";let D=["","Poor","Fair","Good","Very Good","Excellent"];W.textContent=v>0?D[v]:"Select a rating",x.appendChild(R),x.appendChild(y),x.appendChild(W),y.addEventListener("click",E=>{let S=E.target.closest(".rtg-review-star");S&&(v=parseInt(S.dataset.value),y.querySelectorAll(".rtg-review-star").forEach(($,O)=>{$.classList.toggle("selected",O<v),$.setAttribute("aria-checked",O+1===v?"true":"false")}),W.textContent=D[v]||"")}),y.addEventListener("mouseenter",E=>{let S=E.target.closest(".rtg-review-star");if(!S)return;let $=parseInt(S.dataset.value);y.querySelectorAll(".rtg-review-star").forEach((O,ee)=>{O.classList.toggle("hovered",ee<$)})},!0),y.addEventListener("mouseleave",()=>{y.querySelectorAll(".rtg-review-star").forEach(E=>E.classList.remove("hovered"))},!0);let V=!i.isLoggedIn,N,F,Z,de,I;if(V){de=document.createElement("div"),de.className="rtg-review-field";let E=document.createElement("label");E.textContent="Your Name",E.setAttribute("for","rtg-review-name"),N=document.createElement("input"),N.type="text",N.id="rtg-review-name",N.className="rtg-review-input",N.placeholder="John Doe",N.maxLength=100,N.required=!0;try{N.value=localStorage.getItem("rtg_guest_name")||""}catch{}de.appendChild(E),de.appendChild(N),I=document.createElement("div"),I.className="rtg-review-field";let S=document.createElement("label");S.textContent="Your Email",S.setAttribute("for","rtg-review-email"),F=document.createElement("input"),F.type="email",F.id="rtg-review-email",F.className="rtg-review-input",F.placeholder="you@example.com",F.maxLength=254,F.required=!0;try{F.value=localStorage.getItem("rtg_guest_email")||""}catch{}let $=document.createElement("div");$.className="rtg-review-char-count",$.textContent="Your email will not be displayed publicly.",I.appendChild(S),I.appendChild(F),I.appendChild($),Z=document.createElement("input"),Z.type="text",Z.name="website",Z.tabIndex=-1,Z.autocomplete="off",Z.style.cssText="position:absolute;left:-9999px;top:-9999px;opacity:0;height:0;width:0;"}let Y=document.createElement("div");Y.className="rtg-review-field";let ie=document.createElement("label");ie.textContent=V?"Review Title":"Review Title (optional)",ie.setAttribute("for","rtg-review-title");let H=document.createElement("input");H.type="text",H.id="rtg-review-title",H.className="rtg-review-input",H.placeholder="Sum up your experience...",H.maxLength=200,H.value=o,Y.appendChild(ie),Y.appendChild(H);let oe=document.createElement("div");oe.className="rtg-review-field";let K=document.createElement("label");K.textContent=V?"Your Review":"Your Review (optional)",K.setAttribute("for","rtg-review-text");let j=document.createElement("textarea");j.id="rtg-review-text",j.className="rtg-review-textarea",j.placeholder="Share your experience with this tire… How does it handle, ride comfort, noise level, tread wear?",j.maxLength=5e3,j.rows=5,j.value=s;let se=document.createElement("div");if(se.className="rtg-review-char-count",se.textContent=`${s.length}/5000`,j.addEventListener("input",()=>{se.textContent=`${j.value.length}/5000`}),oe.appendChild(K),oe.appendChild(j),oe.appendChild(se),V){let E=document.createElement("div");E.className="rtg-review-guest-notice",E.textContent="Your review will be visible after admin approval. You’ll receive an email when it’s approved.",oe.appendChild(E)}let ue;if(V&&typeof tireRatingAjax<"u"){ue=document.createElement("div"),ue.className="rtg-review-login-banner";let E=document.createElement("div");E.className="rtg-review-login-banner-icon",E.innerHTML=k("user",18);let S=document.createElement("div");S.className="rtg-review-login-banner-content";let $=document.createElement("p");$.className="rtg-review-login-banner-text",$.textContent="Create an account to edit reviews and favorite tires.";let O=document.createElement("div");O.className="rtg-review-login-banner-actions";let ee=document.createElement("a");ee.href=tireRatingAjax.register_url||"/wp-login.php?action=register",ee.className="rtg-review-login-btn rtg-review-login-btn-primary",ee.textContent="Sign up";let C=document.createElement("span");C.className="rtg-review-login-or",C.textContent="or";let L=document.createElement("a");L.href=tireRatingAjax.login_url||"/wp-login.php",L.className="rtg-review-login-btn rtg-review-login-btn-secondary",L.textContent="Log in",O.appendChild(ee),O.appendChild(C),O.appendChild(L),S.appendChild($),S.appendChild(O),ue.appendChild(E),ue.appendChild(S)}let Q=document.createElement("div");Q.className="rtg-review-modal-footer";let ge=document.createElement("button");ge.className="rtg-review-btn-cancel",ge.textContent="Cancel";let q=document.createElement("button");q.className="rtg-review-btn-submit",q.textContent=s?"Update Review":"Submit Review";let G=document.createElement("div");if(G.className="rtg-review-error",Q.appendChild(G),i.isLoggedIn&&!V&&r.rating>0){let E=document.createElement("button");E.className="rtg-review-btn-delete",E.textContent="Delete Rating",E.addEventListener("click",()=>{confirm("Delete your rating for this tire?")&&(E.disabled=!0,E.textContent="Deleting...",Gt(e).then(()=>{ce(),Ae("Your rating has been deleted.","success")}).catch(S=>{E.disabled=!1,E.textContent="Delete Rating",G.textContent=typeof S=="string"?S:S.message||"Failed to delete."}))}),Q.appendChild(E)}Q.appendChild(ge),Q.appendChild(q),h.appendChild(p),h.appendChild(x),V&&(h.appendChild(de),h.appendChild(I),h.appendChild(Z)),h.appendChild(Y),h.appendChild(oe),ue&&h.appendChild(ue),h.appendChild(Q),f.appendChild(h),document.body.appendChild(f),requestAnimationFrame(()=>f.classList.add("active")),V&&N?N.focus():H.focus();function ce(){f.classList.remove("active"),setTimeout(()=>f.remove(),200)}w.addEventListener("click",ce),ge.addEventListener("click",ce),f.addEventListener("click",E=>{E.target===f&&ce()}),document.addEventListener("keydown",function E(S){S.key==="Escape"&&(ce(),document.removeEventListener("keydown",E))}),q.addEventListener("click",()=>{if(v<1||v>5){G.textContent="Please select a star rating.";return}if(V){if(!N.value.trim()){G.textContent="Please enter your name.",N.focus();return}if(!F.value.trim()||!F.validity.valid){G.textContent="Please enter a valid email address.",F.focus();return}if(!H.value.trim()&&!j.value.trim()){G.textContent="Please write a review title or body text.",H.focus();return}}G.textContent="",q.disabled=!0,q.textContent="Submitting...";let E=j.value.trim().length>0||H.value.trim().length>0,S=!!s||!!o,$;V?$=Wt(e,v,N.value.trim(),F.value.trim(),H.value.trim(),j.value.trim(),Z?Z.value:""):$=Ht(e,v,H.value.trim(),j.value.trim()),$.then(O=>{if(ce(),V){try{localStorage.setItem("rtg_guest_name",N.value.trim()),localStorage.setItem("rtg_guest_email",F.value.trim())}catch{}i.guestPendingReviews=i.guestPendingReviews||new Set,i.guestPendingReviews.add(e),Xe(e),Ae("Thanks! Your review has been submitted and is pending approval.","info")}else E&&O&&O.review_status==="pending"?Ae("Thanks! Your review has been submitted and is pending approval.","info"):Ae(S?"Your review has been updated.":"Your review has been saved!","success")}).catch(O=>{q.disabled=!1,q.textContent=s?"Update Review":"Submit Review",G.textContent=typeof O=="string"?O:O.message||"Failed to submit. Please try again."})})}function mt(e){let t=document.getElementById("rtg-reviews-drawer");t&&t.remove();let n=document.querySelector(`[data-tire-id="${CSS.escape(e)}"].tire-card`),r=n&&n.querySelector(".tire-card-brand")?.textContent||"",a=n&&n.querySelector(".tire-card-model")?.textContent||"",o=document.createElement("div");o.id="rtg-reviews-drawer",o.className="rtg-reviews-drawer-overlay",o.setAttribute("role","dialog"),o.setAttribute("aria-modal","true"),o.setAttribute("aria-label","Reviews");let s=document.createElement("div");s.className="rtg-reviews-drawer";let c=document.createElement("div");c.className="rtg-reviews-drawer-header";let u=document.createElement("h3");u.textContent=r&&a?`Reviews for ${r} ${a}`:"Reviews";let d=i.tireRatings[e]||{average:0,count:0},f=document.createElement("div");f.className="rtg-reviews-summary",d.average>0&&(f.innerHTML=`<span class="rtg-reviews-avg">${d.average.toFixed(1)}</span> <span class="rtg-reviews-stars-mini">${pt(d.average)}</span> <span class="rtg-reviews-total">${d.count} review${d.count!==1?"s":""}</span>`);let h=document.createElement("button");h.className="rtg-reviews-drawer-close",h.setAttribute("aria-label","Close"),h.innerHTML="&times;",c.appendChild(u),c.appendChild(f),c.appendChild(h);let p=document.createElement("div");p.className="rtg-reviews-content",p.innerHTML='<div class="rtg-reviews-loading">Loading reviews...</div>',s.appendChild(c),s.appendChild(p),o.appendChild(s),document.body.appendChild(o),requestAnimationFrame(()=>o.classList.add("active"));function m(){o.classList.remove("active"),setTimeout(()=>o.remove(),200)}h.addEventListener("click",m),o.addEventListener("click",w=>{w.target===o&&m()}),document.addEventListener("keydown",function w(x){x.key==="Escape"&&(m(),document.removeEventListener("keydown",w))}),Qe(e,p,1)}function Qe(e,t,n){let r=new FormData;r.append("action","get_tire_reviews"),r.append("tire_id",e),r.append("page",n.toString()),tireRatingAjax.nonce&&r.append("nonce",tireRatingAjax.nonce),fetch(tireRatingAjax.ajaxurl,{method:"POST",body:r}).then(a=>a.json()).then(a=>{if(!a.success||!a.data.reviews.length){let o=document.createElement("div");o.className="rtg-reviews-empty";let s=document.createElement("div");s.className="rtg-reviews-empty-icon",s.textContent="✍️";let c=document.createElement("div");c.className="rtg-reviews-empty-heading",c.textContent="No reviews yet";let u=document.createElement("div");u.textContent="Be the first to share your experience with this tire!",o.appendChild(s),o.appendChild(c),o.appendChild(u);let d=document.createElement("button");d.className="rtg-reviews-empty-cta",d.textContent="Write a Review",d.addEventListener("click",()=>{let f=t.closest(".rtg-reviews-drawer-overlay");f&&(f.classList.remove("active"),setTimeout(()=>f.remove(),200)),Oe(e,i.userRatings[e]||0)}),o.appendChild(d),t.innerHTML="",t.appendChild(o);return}if(t.innerHTML="",a.data.reviews.forEach(o=>{t.appendChild(Yt(o))}),a.data.total_pages>1){let o=document.createElement("div");if(o.className="rtg-reviews-pagination",n>1){let c=document.createElement("button");c.className="rtg-reviews-page-btn",c.textContent="Previous",c.addEventListener("click",()=>Qe(e,t,n-1)),o.appendChild(c)}let s=document.createElement("span");if(s.className="rtg-reviews-page-info",s.textContent=`Page ${n} of ${a.data.total_pages}`,o.appendChild(s),n<a.data.total_pages){let c=document.createElement("button");c.className="rtg-reviews-page-btn",c.textContent="Next",c.addEventListener("click",()=>Qe(e,t,n+1)),o.appendChild(c)}t.appendChild(o)}}).catch(()=>{t.innerHTML='<div class="rtg-reviews-empty">Failed to load reviews. Please try again.</div>'})}function Yt(e){let t=document.createElement("div");t.className="rtg-review-card";let n=document.createElement("div");n.className="rtg-review-card-header";let r=typeof rtgData<"u"&&rtgData.settings&&rtgData.settings.userReviewsUrl?rtgData.settings.userReviewsUrl:"",a;e.user_id&&parseInt(e.user_id)>0&&r?(a=document.createElement("a"),a.href=r+"?reviewer="+encodeURIComponent(e.user_id),a.className="rtg-review-author rtg-review-author-link",a.textContent=e.display_name||"Anonymous"):(a=document.createElement("span"),a.className="rtg-review-author",a.textContent=e.display_name||"Anonymous");let o=document.createElement("span");o.className="rtg-review-card-stars",o.innerHTML=pt(e.rating);let s=document.createElement("span");if(s.className="rtg-review-date",s.textContent=Zt(e.updated_at||e.created_at),n.appendChild(a),n.appendChild(o),n.appendChild(s),t.appendChild(n),e.review_title){let c=document.createElement("div");c.className="rtg-review-card-title",c.textContent=e.review_title,t.appendChild(c)}if(e.review_text){let c=document.createElement("div");c.className="rtg-review-card-body",c.textContent=e.review_text,t.appendChild(c)}else{let c=document.createElement("div");c.className="rtg-review-card-body rtg-review-rating-only",c.textContent="Star rating only — no written review.",t.appendChild(c)}return t}function pt(e){let t=Math.round(e*2)/2,n="";for(let r=1;r<=5;r++){let a="rtg-mini-star";t>=r?a+=" filled":t>=r-.5&&(a+=" half-filled"),n+=`<span class="${a}">${Pe(18)}</span>`}return n}function Zt(e){let t=e&&!e.includes("T")&&!e.includes("Z")?e.replace(" ","T")+"Z":e,n=new Date(t),r=typeof tireRatingAjax<"u"&&tireRatingAjax.timezone||void 0,a=r?{timeZone:r}:{},o=new Intl.DateTimeFormat("en-CA",{...a,year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date),s=new Intl.DateTimeFormat("en-CA",{...a,year:"numeric",month:"2-digit",day:"2-digit"}).format(n),c=new Date(o+"T00:00:00"),u=new Date(s+"T00:00:00"),d=Math.round((c-u)/(1e3*60*60*24));if(d<=0)return"Today";if(d===1)return"Yesterday";if(d<30)return`${d} days ago`;if(d<365){let f=Math.floor(d/30);return`${f} month${f!==1?"s":""} ago`}return n.toLocaleDateString("en-US",{...a,month:"short",day:"numeric",year:"numeric"})}function Ae(e,t="success",n=4e3){let r=document.querySelector(".rtg-toast-container");r||(r=document.createElement("div"),r.className="rtg-toast-container",document.body.appendChild(r));let a=document.createElement("div");a.className=`rtg-toast rtg-toast-${t}`;let o=document.createElement("span");o.className="rtg-toast-icon",o.textContent=t==="success"?"✔":"ℹ";let s=document.createElement("span");s.textContent=e,a.appendChild(o),a.appendChild(s),r.appendChild(a),requestAnimationFrame(()=>{requestAnimationFrame(()=>a.classList.add("visible"))}),setTimeout(()=>{a.classList.remove("visible"),setTimeout(()=>a.remove(),300)},n)}var Re=me(()=>{re();te();ve()});function ft(){if(!i.isLoggedIn||typeof tireRatingAjax>"u")return Promise.resolve();let e=new FormData;return e.append("action","rtg_get_favorites"),e.append("nonce",tireRatingAjax.nonce),fetch(tireRatingAjax.ajaxurl,{method:"POST",body:e}).then(t=>t.json()).then(t=>{t.success&&Array.isArray(t.data.favorites)&&(i.userFavorites=new Set(t.data.favorites),Kt(),Ve())}).catch(t=>{})}function gt(e){if(!i.isLoggedIn){typeof tireRatingAjax<"u"&&tireRatingAjax.login_url&&(window.location.href=tireRatingAjax.login_url);return}if(!T.tireId.test(e))return;let t=i.userFavorites.has(e),n=t?"rtg_remove_favorite":"rtg_add_favorite";t?i.userFavorites.delete(e):i.userFavorites.add(e),ze(e),Ve();let r=new FormData;r.append("action",n),r.append("tire_id",e),r.append("nonce",tireRatingAjax.nonce),fetch(tireRatingAjax.ajaxurl,{method:"POST",body:r}).then(a=>a.json()).then(a=>{a.success||(t?i.userFavorites.add(e):i.userFavorites.delete(e),ze(e),Ve())}).catch(()=>{t?i.userFavorites.add(e):i.userFavorites.delete(e),ze(e),Ve()})}function ze(e){document.querySelectorAll(`.tire-card-fav-btn[data-tire-id="${CSS.escape(e)}"]`).forEach(n=>{let r=i.userFavorites.has(e);n.classList.toggle("is-favorite",r),n.setAttribute("aria-label",r?"Remove from favorites":"Add to favorites"),n.innerHTML=r?k("heart",16):k("heart-outline",16)})}function Kt(){document.querySelectorAll(".tire-card-fav-btn").forEach(e=>{let t=e.dataset.tireId;t&&ze(t)})}function Ve(){let e=document.getElementById("favoritesCount");e&&(e.textContent=i.userFavorites.size>0?i.userFavorites.size:"",e.style.display=i.userFavorites.size>0?"inline-flex":"none")}var et=me(()=>{re();te();ve()});function qe(){let e=l("compareBar"),t=l("compareCount");if(!e||!t)return;let n=Math.max(0,Math.min(4,i.compareList.length));t.textContent=`${n} of 4 tires selected`,e.style.display=n>=2?"flex":"none"}function ht(){if(!i.compareList.length)return;let e=i.compareList.filter(t=>Number.isInteger(t)&&t>=0&&t<i.allRows.length).slice(0,4);if(e.length)try{let t=typeof rtgData<"u"&&rtgData.settings&&rtgData.settings.compareUrl?rtgData.settings.compareUrl:"/tire-compare/",n=new URL(t,location.origin);n.searchParams.set("compare",e.join(",")),window.open(n.toString(),"_blank","noopener,noreferrer")}catch{}}function vt(){i.compareList=[],document.querySelectorAll(".compare-checkbox").forEach(e=>{e.checked=!1,e.disabled=!1}),qe()}function wt(){document.querySelectorAll(".compare-checkbox:not([data-listener-attached])").forEach(t=>{t.dataset.listenerAttached="true",t.addEventListener("change",()=>{let n=parseInt(t.dataset.index);if(!(!Number.isInteger(n)||n<0)){if(t.checked){if(i.compareList.length>=4){t.checked=!1;return}i.compareList.includes(n)||i.compareList.push(n)}else i.compareList=i.compareList.filter(r=>r!==n);qe(),document.querySelectorAll(".compare-checkbox").forEach(r=>{r.checked||(r.disabled=i.compareList.length>=4)})}})})}var tt=me(()=>{re();te()});function yt(e,t){let n=Ee(e);if(!n)return;let r=l("imageModal"),a=l("modalImage");if(!r||!a)return;a.src=n,a.alt=B(g(t,200)),a.onerror=()=>{let c=Ee("https://riviantrackr.com/assets/tire-guide/images/image404.jpg");c&&(a.src=c,a.alt="Image not available")},r.style.display="flex",document.body.style.overflow="hidden";let o=s=>{s.key==="Escape"&&(r.style.display="none",document.body.style.overflow="",document.removeEventListener("keydown",o))};document.addEventListener("keydown",o),r.onclick=s=>{s.target===r&&(r.style.display="none",document.body.style.overflow="",document.removeEventListener("keydown",o))}}var xt=me(()=>{te();ve()});var Et={};Ut(Et,{createSingleCard:()=>Ct,observeCardImages:()=>bt,preloadNextPageImages:()=>Ue,renderCards:()=>Ie});function Qt(){Se||!("IntersectionObserver"in window)||(Se=new IntersectionObserver(e=>{e.forEach(t=>{if(t.isIntersecting){let n=t.target,r=n.dataset.src;r&&(n.src=r,n.removeAttribute("data-src"),n.addEventListener("load",()=>{n.classList.add("rtg-img-loaded")},{once:!0})),Se.unobserve(n)}})},{rootMargin:"600px 0px",threshold:0}))}function bt(e){if(Se||Qt(),!Se)return;e.querySelectorAll("img[data-src]").forEach(n=>Se.observe(n))}function Jt(){let e=document.getElementById("rtg-skeleton-loader");e&&e.remove()}function Ie(e){Jt(),i.cardContainer||(i.cardContainer=l("tireCards")),typeof tireRatingAjax<"u"&&(i.isLoggedIn=tireRatingAjax.is_logged_in===!0||tireRatingAjax.is_logged_in==="1"||tireRatingAjax.is_logged_in===1);let t=window.matchMedia("(prefers-reduced-motion: reduce)").matches,n=window.innerWidth<=768||/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),r=t?0:n?200:300,a=t?0:n?100:150,o=new Set(e.map(m=>m[0]).filter(m=>T.tireId.test(m))),s=Array.from(i.cardContainer.children),c=new Set,u=[];s.forEach(m=>{let w=m.dataset.tireId;if(o.has(w)){c.add(w);let x=e.find(R=>R[0]===w);if(x){let R=m.querySelector(".compare-checkbox");R&&(R.dataset.index=i.allRows.indexOf(x))}}else u.push(m)}),u.forEach(m=>{t?m.parentNode&&m.parentNode.removeChild(m):(m.style.transition=`opacity ${r}ms ease, transform ${r}ms ease`,m.style.opacity="0",m.style.transform=n?"translateY(-4px) scale(0.98)":"translateY(-8px) scale(0.97)",setTimeout(()=>{m.parentNode&&m.parentNode.removeChild(m)},a))});let d=[];e.forEach(m=>{let w=m[0];if(T.tireId.test(w)&&!c.has(w)){let x=Ct(m);x&&(t||(x.style.opacity="0",x.style.transform=n?"translateY(8px) scale(0.98)":"translateY(12px) scale(0.97)"),d.push(x))}});let f=document.createDocumentFragment();d.forEach(m=>f.appendChild(m)),i.cardContainer.appendChild(f),!t&&d.length>0?requestAnimationFrame(()=>{d.forEach((m,w)=>{let x=n?w*50:w*40;setTimeout(()=>{m.style.transition=`opacity ${r}ms cubic-bezier(0.16, 1, 0.3, 1), transform ${r}ms cubic-bezier(0.16, 1, 0.3, 1)`,m.style.opacity="1",m.style.transform="translateY(0) scale(1)"},x)})}):t&&d.forEach(m=>{m.style.opacity="1",m.style.transform="translateY(0) scale(1)"});let h=Array.from(i.cardContainer.children);e.some((m,w)=>{let x=m[0],R=h[w];return!R||R.dataset.tireId!==x})&&e.forEach((m,w)=>{let x=m[0];if(!T.tireId.test(x))return;let R=i.cardContainer.querySelector(`[data-tire-id="${CSS.escape(x)}"]`);if(R&&Array.from(i.cardContainer.children).indexOf(R)!==w){let v=i.cardContainer.children[w];v&&v!==R?i.cardContainer.insertBefore(R,v):v||i.cardContainer.appendChild(R)}}),wt(),i.cardContainer&&bt(i.cardContainer)}function Ct(e){let[t,n,r,a,o,s,c,u,d,f,h,p,m,w,x,R,y,v,W,D,V,N,F]=e;if(!T.tireId.test(t))return null;let Z=`card_${t}_${Date.now()%1e4}`,de=i.tireRatings[t]||{average:0,count:0},I=i.userRatings[t]||0,Y=Je(t,de.average,de.count,I),ie=st(W),H=Ee(D),oe=ct(F),K=document.createElement("div");if(K.className="tire-card",K.dataset.tireId=t,g(v).toLowerCase().includes("reviewed")){let C=document.createElement("div");C.className="tire-card-badge";let L=document.createElement("div");L.className="tire-card-badge-inner";let P=document.createElement("span");P.innerHTML=k("circle-check",14),P.style.display="inline-flex",L.appendChild(P),L.appendChild(document.createTextNode("Reviewed")),C.appendChild(L),K.appendChild(C)}let j=document.createElement("label");j.className="tire-card-compare-overlay",j.setAttribute("aria-label",`Compare ${B(g(a))} ${B(g(o))}`);let se=document.createElement("input");se.type="checkbox",se.className="compare-checkbox",se.dataset.id=t,se.dataset.index=i.allRows.indexOf(e).toString();let ue=document.createElement("span");ue.className="compare-overlay-icon",j.appendChild(se),j.appendChild(ue);let Q=document.createElement("button");Q.className="tire-card-fav-btn",Q.dataset.tireId=t;let ge=i.userFavorites.has(t);Q.classList.toggle("is-favorite",ge),Q.setAttribute("aria-label",ge?"Remove from favorites":"Add to favorites"),Q.innerHTML=ge?k("heart",16):k("heart-outline",16),Q.addEventListener("click",C=>{C.stopPropagation(),gt(t)});let q=document.createElement("button");if(q.className="tire-card-share-btn",q.setAttribute("aria-label",`Share ${B(g(a))} ${B(g(o))}`),q.innerHTML=k("share",16),q.addEventListener("click",C=>{C.stopPropagation();let L=new URL(window.location.href);L.search="",L.searchParams.set("tire",t);let P=L.toString(),le=`${g(a)} ${g(o)}`;function X(){q.innerHTML=k("check",16),q.classList.add("copied"),setTimeout(()=>{q.innerHTML=k("share",16),q.classList.remove("copied")},2e3)}navigator.share?navigator.share({title:le,url:P}).catch(()=>{}):navigator.clipboard&&navigator.clipboard.writeText(P).then(X)}),H){let C=document.createElement("div");C.className="tire-card-image";let L=document.createElement("img");L.alt=`${B(g(a))} ${B(g(o))}`,L.decoding="async",L.className="rtg-lazy-img","IntersectionObserver"in window?L.dataset.src=H:L.src=H,L.onclick=()=>yt(H,`${B(g(a))} ${B(g(o))}`),C.appendChild(L),C.appendChild(j),C.appendChild(Q),C.appendChild(q),K.appendChild(C)}else K.appendChild(j),K.appendChild(Q),K.appendChild(q);let G=document.createElement("div");G.className="tire-card-body";let Fe=document.createElement("div");Fe.className="tire-card-brand",Fe.textContent=g(a),G.appendChild(Fe);let ce=document.createElement("div");ce.className="tire-card-model",ce.textContent=g(o),G.appendChild(ce);let E=document.createElement("div");E.innerHTML=Y,G.appendChild(E);let S=document.createElement("div");if(S.className="tire-card-tags",N){let C=g(N).trim().toUpperCase();if(["A","B","C","D","F"].includes(C)){let L={A:"#5ec095",B:"#a3e635",C:"#facc15",D:"#f97316",F:"#b91c1c"}[C],P=document.createElement("span");P.className="tire-card-eff";let le=document.createElement("span");le.className="tire-card-eff-grade",le.style.backgroundColor=L,le.textContent=C;let X=document.createElement("span");X.className="tire-card-eff-score";let ne=document.createElement("span");ne.textContent=`Efficiency (${B(g(V))}/100)`;let J=document.createElement("button");J.innerHTML=""+k("circle-info",14),J.className="info-tooltip-trigger",J.dataset.tooltipKey="Efficiency Score",J.setAttribute("aria-label","More info about Efficiency Score"),J.setAttribute("type","button"),J.style.cssText=`
        background: none;
        border: none;
        color: var(--rtg-text-muted);
        font-size: 14px;
        cursor: pointer;
        padding: 2px;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
      `,J.addEventListener("mouseenter",()=>{J.style.color=M("accent"),J.style.backgroundColor=`color-mix(in srgb, ${M("accent")} 10%, transparent)`}),J.addEventListener("mouseleave",()=>{J.style.color=M("text-muted"),J.style.backgroundColor="transparent"}),X.appendChild(ne),X.appendChild(J),P.appendChild(le),P.appendChild(X),S.appendChild(P)}}v&&g(v).trim()&&g(v).split(/[,|]/).map(L=>L.trim()).filter(L=>L&&L.toLowerCase()!=="reviewed").forEach(L=>{let P=document.createElement("span");P.className="tire-card-tag",P.textContent=g(L,30),S.appendChild(P)}),S.children.length>0&&G.appendChild(S);let $=document.createElement("div");$.className="tire-card-specs",[["Size",`${g(n)} (${g(r)}${g(r)&&!g(r).includes('"')?'"':""})`],["Category",g(s)],["Average Price",c?`$${b(c,A.price)}`:"-"],["Mileage Warranty",u?`${Number(b(u,A.warranty)).toLocaleString()} miles`:"-"],["Weight",d?`${b(d,A.weight)} lb`:"-"],["3PMS Rated",g(f)],["Tread Depth",g(h)],["Load Index",g(p)],["Max Load",m?`${b(m,{min:0,max:1e4})} lb`:"-"],["Load Range",g(w)],["Speed Rating",g(x)],["Max PSI",g(R)],["UTQG",g(y)||"None"]].forEach(([C,L])=>{let P=document.createElement("div");P.className="tire-card-spec";let le=Ze.hasOwnProperty(C),X;le?X=dt(C,C):(X=document.createElement("span"),X.className="tire-card-spec-label",X.textContent=C);let ne=document.createElement("span");ne.className="tire-card-spec-value",ne.textContent=L||"-",P.appendChild(X),P.appendChild(ne),$.appendChild(P)}),G.appendChild($),K.appendChild(G);let ee=document.createElement("div");if(ee.className="tire-card-actions",ie){let C=document.createElement("a");C.href=ie,C.target="_blank",C.rel="noopener noreferrer",C.className="tire-card-cta tire-card-cta-primary",C.innerHTML="View Tire&nbsp;"+k("arrow-up-right",14),ee.appendChild(C)}else{let C=document.createElement("span");C.className="tire-card-cta tire-card-cta-disabled",C.textContent="Coming Soon",ee.appendChild(C)}if(oe){let C=document.createElement("a");C.href=oe,C.target="_blank",C.rel="noopener noreferrer",C.className="tire-card-cta tire-card-cta-review";let L=!1;try{let ne=new URL(oe).hostname.toLowerCase(),J=ne==="youtube.com"||ne.endsWith(".youtube.com")||ne==="youtu.be",Vt=ne==="tiktok.com"||ne.endsWith(".tiktok.com");L=J||Vt}catch{L=!1}let P=L?"circle-play":"newspaper",le=L?"Watch Official Review":"Read Official Review";C.innerHTML=`${le}&nbsp;${k(P,14)}`,ee.appendChild(C)}if(K.appendChild(ee),i.cardCache.size>100){let C=i.cardCache.keys().next().value;i.cardCache.delete(C)}return i.cardCache.set(Z,K.cloneNode(!0)),K}function Ue(){let e=Math.ceil(i.filteredRows.length/ae);if(i.currentPage>=e)return;let t=i.currentPage*ae;i.filteredRows.slice(t,t+ae).forEach(r=>{let a=r[19],o=Ee(a);if(o){let s=new Image;s.src=o}})}var Se,Te=me(()=>{re();te();ve();Ke();Re();et();tt();xt();Se=null});re();te();ve();var pe={nonce:null,ajaxurl:null,init(){typeof rtgData<"u"&&rtgData.settings&&(this.nonce=rtgData.settings.analyticsNonce||null,this.ajaxurl=rtgData.settings.ajaxurl||null)},track(e,t){if(!this.ajaxurl||!this.nonce)return;let n=new FormData;if(n.append("action",e),n.append("nonce",this.nonce),Object.entries(t).forEach(([r,a])=>n.append(r,a)),!(navigator.sendBeacon&&navigator.sendBeacon(this.ajaxurl,n)))try{fetch(this.ajaxurl,{method:"POST",body:n,keepalive:!0}).catch(()=>{})}catch{}},trackClick(e,t){this.track("rtg_track_click",{tire_id:e,link_type:t})},_searchDebounceTimer:null,trackSearch(e,t,n,r){clearTimeout(this._searchDebounceTimer),this._searchDebounceTimer=setTimeout(()=>{this.track("rtg_track_search",{search_query:e,filters_json:JSON.stringify(t),sort_by:n,result_count:String(r),search_type:"search"})},2e3)},trackAiSearch(e,t){this.track("rtg_track_search",{search_query:e,filters_json:"{}",sort_by:"",result_count:String(t),search_type:"ai"})}};Ke();re();te();re();te();ve();Te();Re();re();te();ve();Te();Re();function we(){return i.serverSideMode&&typeof rtgData<"u"&&rtgData.settings&&rtgData.settings.ajaxurl}function _e(e){i.serverSideFetchController&&i.serverSideFetchController.abort(),i.serverSideFetchController=new AbortController;let t=document.querySelector("#searchInput"),n=new FormData;n.append("action","rtg_get_tires"),n.append("nonce",rtgData.settings.tireNonce),n.append("page",e||i.currentPage),n.append("search",t?t.value:""),n.append("size",l("filterSize")?.value||""),n.append("brand",l("filterBrand")?.value||""),n.append("category",l("filterCategory")?.value||""),n.append("three_pms",l("filter3pms")?.checked?"1":""),n.append("ev_rated",l("filterEVRated")?.checked?"1":""),n.append("studded",l("filterStudded")?.checked?"1":""),n.append("price_max",l("priceMax")?.value||"600"),n.append("weight_max",l("weightMax")?.value||"70");let r=l("warrantyMax"),a=r?parseInt(r.value):8e4;n.append("warranty_min",a<8e4?(8e4-a).toString():"0");let s=l("sortBy")?.value||"efficiency_score",c={efficiencyGrade:"efficiency_score"};n.append("sort",c[s]||s);let u=l("tireCount");return u&&(u.textContent="Loading..."),fetch(rtgData.settings.ajaxurl,{method:"POST",body:n,signal:i.serverSideFetchController.signal}).then(d=>d.json()).then(d=>{if(!d.success)return;let f=(d.data.rows||[]).map(je).filter(W=>W&&W.length&&W[0]);i.filteredRows=f,i.serverSideTotal=d.data.total||0,i.currentPage=d.data.page||1,u&&(u.textContent=`Showing ${i.serverSideTotal} tire${i.serverSideTotal===1?"":"s"}`),Ie(i.filteredRows),Xt(i.serverSideTotal,d.data.per_page||ae,i.currentPage),Me();let h=l("noResults"),p=l("tireCards");i.filteredRows.length===0?(rt(),h&&(h.style.display="block"),p&&(p.style.display="none")):(h&&(h.style.display="none"),p&&(p.style.display="grid"));let m=t?t.value:"",w={};m&&(w.search=m);let x=l("filterSize")?.value||"",R=l("filterBrand")?.value||"",y=l("filterCategory")?.value||"";x&&(w.size=x),R&&(w.brand=R),y&&(w.category=y),l("filter3pms")?.checked&&(w.three_pms=!0),l("filterEVRated")?.checked&&(w.ev_rated=!0),l("filterStudded")?.checked&&(w.studded=!0),(m||Object.keys(w).length>0)&&pe.trackSearch(m,w,s,i.serverSideTotal);let v=i.filteredRows.map(W=>W[0]).filter(Boolean);ye(v)}).catch(d=>{d.name})}function Xt(e,t,n){let r=l("paginationControls");if(!r)return;r.innerHTML="";let a=Math.ceil(e/t);if(a<=1)return;let o=document.createElement("button");o.textContent="Previous",o.disabled=n<=1,be(o),o.onclick=()=>{i.currentPage=n-1,_e(i.currentPage),Rt()},r.appendChild(o);let s=document.createElement("span");s.textContent=`Page ${n} of ${a}`,s.style.cssText=`color: ${M("text-primary")}; font-weight: 500; display: flex; align-items: center;`,r.appendChild(s);let c=document.createElement("button");c.textContent="Next",c.disabled=n>=a,be(c),c.onclick=()=>{i.currentPage=n+1,_e(i.currentPage),Rt()},r.appendChild(c)}function Rt(){let e=l("filterTop");e&&e.scrollIntoView({behavior:"smooth"})}function St(){let e=new FormData;return e.append("action","rtg_get_filter_options"),e.append("nonce",rtgData.settings.tireNonce),fetch(rtgData.settings.ajaxurl,{method:"POST",body:e}).then(t=>t.json()).then(t=>{if(!t.success)return;let n=t.data;i.VALID_SIZES=n.sizes||[],i.VALID_BRANDS=n.brands||[],i.VALID_CATEGORIES=n.categories||[];let r=l("filterSize");if(r){r.innerHTML="";let a=document.createElement("option");a.value="",a.textContent="All Sizes",r.appendChild(a);let o={};i.VALID_SIZES.forEach(s=>{let c=s.match(/R(\d{2})/i),u=c?c[1]:"Other";o[u]||(o[u]=[]),o[u].push(s)}),Object.keys(o).sort((s,c)=>s==="Other"?1:c==="Other"?-1:parseInt(s)-parseInt(c)).forEach(s=>{let c=document.createElement("optgroup");c.label=`${s}" Wheels`,o[s].sort().forEach(u=>{let d=document.createElement("option");d.value=u,d.textContent=u,c.appendChild(d)}),r.appendChild(c)})}Le("filterBrand",i.VALID_BRANDS),Le("filterCategory",i.VALID_CATEGORIES),Ne()}).catch(t=>{})}function fe(){i.currentPage=1,i.lastFilterState=null,_e(1),nt()}function At(){_.sizeIndex.clear(),_.brandIndex.clear(),_.categoryIndex.clear(),_.priceIndex.length=0,_.warrantyIndex.length=0,_.weightIndex.length=0,i.allRows.forEach((e,t)=>{let[n,r,a,o,s,c,u,d,f]=e,h=g(r).toLowerCase();h&&(_.sizeIndex.has(h)||_.sizeIndex.set(h,[]),_.sizeIndex.get(h).push(t));let p=g(o).toLowerCase();p&&(_.brandIndex.has(p)||_.brandIndex.set(p,[]),_.brandIndex.get(p).push(t));let m=g(c).toLowerCase();m&&(_.categoryIndex.has(m)||_.categoryIndex.set(m,[]),_.categoryIndex.get(m).push(t));let w=b(u,A.price),x=b(d,A.warranty),R=b(f,A.weight);_.priceIndex.push({index:t,value:w}),_.warrantyIndex.push({index:t,value:x}),_.weightIndex.push({index:t,value:R})}),_.priceIndex.sort((e,t)=>e.value-t.value),_.warrantyIndex.sort((e,t)=>e.value-t.value),_.weightIndex.sort((e,t)=>e.value-t.value)}function at(e,t){let n=0,r=e.length-1;for(;n<=r;){let a=Math.floor((n+r)/2);e[a].value<=t?n=a+1:r=a-1}return new Set(e.slice(0,r+1).map(a=>a.index))}function en(e){let t=new Set(i.allRows.map((n,r)=>r));if(e.Size){let n=new Set(_.sizeIndex.get(e.Size.toLowerCase())||[]);t=new Set([...t].filter(r=>n.has(r)))}if(e.Brand){let n=new Set(_.brandIndex.get(e.Brand.toLowerCase())||[]);t=new Set([...t].filter(r=>n.has(r)))}if(e.Category){let n=new Set(_.categoryIndex.get(e.Category.toLowerCase())||[]);t=new Set([...t].filter(r=>n.has(r)))}if(e.PriceMax<600){let n=at(_.priceIndex,e.PriceMax);t=new Set([...t].filter(r=>n.has(r)))}if(e.WarrantyMax<8e4){let n=at(_.warrantyIndex,e.WarrantyMax);t=new Set([...t].filter(r=>n.has(r)))}if(e.WeightMax<70){let n=at(_.weightIndex,e.WeightMax);t=new Set([...t].filter(r=>n.has(r)))}return[...t].map(n=>i.allRows[n]).filter(n=>{if(e.search){let r=g(n[3]),a=g(n[4]),o=`${r} ${a}`,s=He(r,e.search),c=He(a,e.search),u=He(o,e.search);if(!s&&!c&&!u)return!1}return!(e["3PMS"]&&!g(n[9]).toLowerCase().includes("yes")||e.EVRated&&!g(n[17]).toLowerCase().includes("ev rated")||e.Studded&&!g(n[17]).toLowerCase().includes("studded available")||e.Reviewed&&!g(n[23])||e.Favorites&&!i.userFavorites.has(n[0]))})}function It(){if(i.isRendering){i.pendingRender=!0;return}i.renderAnimationFrame&&cancelAnimationFrame(i.renderAnimationFrame),i.renderAnimationFrame=requestAnimationFrame(()=>{i.isRendering=!0,it(),setTimeout(()=>{i.isRendering=!1,i.renderAnimationFrame=null,i.pendingRender&&(i.pendingRender=!1,It())},16)})}function tn(e){let t=(i.currentPage-1)*ae;return e.slice(t,t+ae)}function it(){let e=tn(i.filteredRows),t=e.map(n=>n[0]).filter(Boolean);ye(t).then(()=>{Ie(e),nn(i.filteredRows);let n=l("noResults"),r=l("tireCards");i.filteredRows.length===0?(rt(),n.style.display="block",r.style.display="none"):(n.style.display="none",r.style.display="grid"),"requestIdleCallback"in window?requestIdleCallback(()=>Ue()):setTimeout(Ue,100)})}function nn(e){let t=l("paginationControls");t.innerHTML="";let n=Math.ceil(e.length/ae);if(n<=1)return;let r=document.createElement("button");r.textContent="Previous",r.disabled=i.currentPage===1,be(r),r.onclick=()=>{i.currentPage--,it(),Me();let s=l("filterTop");s&&s.scrollIntoView({behavior:"smooth"})},t.appendChild(r);let a=document.createElement("span");a.textContent=`Page ${i.currentPage} of ${n}`,a.style.cssText=`color: ${M("text-primary")}; font-weight: 500; display: flex; align-items: center;`,t.appendChild(a);let o=document.createElement("button");o.textContent="Next",o.disabled=i.currentPage===n,be(o),o.onclick=()=>{i.currentPage++,it(),Me();let s=l("filterTop");s&&s.scrollIntoView({behavior:"smooth"})},t.appendChild(o)}function z(){let e=document.querySelector("#searchInput"),t=l("priceMax"),n=l("warrantyMax"),r=l("weightMax"),a=l("filter3pms"),o=l("filterEVRated"),s=l("filterStudded"),c=l("filterReviewed"),u=l("filterFavorites"),d=l("filterSize"),f=l("filterBrand"),h=l("filterCategory"),p=l("sortBy"),m=e?Ce(e.value,T.search):"",w=t?b(t.value,A.price,600):600,x=n?b(n.value,A.warranty,8e4):8e4,R=r?b(r.value,A.weight,70):70,y={search:m.toLowerCase(),PriceMax:w,WarrantyMax:x,WeightMax:R,"3PMS":a?.checked||!1,EVRated:o?.checked||!1,Studded:s?.checked||!1,Reviewed:c?.checked||!1,Favorites:u?.checked||!1,Size:d?.value&&i.VALID_SIZES.includes(d.value)?d.value:"",Brand:f?.value&&i.VALID_BRANDS.includes(f.value)?f.value:"",Category:h?.value&&i.VALID_CATEGORIES.includes(h.value)?h.value:""},v=p?.value&&Be.includes(p.value)?p.value:"",W=JSON.stringify({...y,sortOption:v,currentPage:i.currentPage});if(i.lastFilterState===W)return;i.lastFilterState=W,i.filteredRows=en(y);let D={};if(y.search&&(D.search=y.search),y.Size&&(D.size=y.Size),y.Brand&&(D.brand=y.Brand),y.Category&&(D.category=y.Category),y["3PMS"]&&(D.three_pms=!0),y.EVRated&&(D.ev_rated=!0),y.Studded&&(D.studded=!0),y.PriceMax<600&&(D.price_max=y.PriceMax),y.WarrantyMax<8e4&&(D.warranty_max=y.WarrantyMax),y.WeightMax<70&&(D.weight_max=y.WeightMax),(y.search||Object.keys(D).length>0)&&pe.trackSearch(y.search||"",D,v,i.filteredRows.length),v==="rating-desc"||v==="most-reviewed"){let V=i.filteredRows.map(N=>N[0]).filter(Boolean);ye(V).then(()=>{Lt(v),kt()})}else Lt(v),kt()}function Lt(e){if(!e||e==="efficiencyGrade"){i.filteredRows.sort((t,n)=>{let r=b(t[20],{min:0,max:100},0);return b(n[20],{min:0,max:100},0)-r});return}switch(e){case"reviewed":i.filteredRows.sort((t,n)=>{let r=g(t[17]).toLowerCase().includes("reviewed");return g(n[17]).toLowerCase().includes("reviewed")-r});break;case"rating-desc":i.filteredRows.sort((t,n)=>{let r=b(i.tireRatings[t[0]]?.average,{min:0,max:5},0),o=b(i.tireRatings[n[0]]?.average,{min:0,max:5},0)-r;if(Math.abs(o)<.01){let s=b(i.tireRatings[t[0]]?.count,{min:0,max:1e4},0),u=b(i.tireRatings[n[0]]?.count,{min:0,max:1e4},0)-s;return Math.abs(u)<.01?g(t[0]).localeCompare(g(n[0])):u}return o});break;case"most-reviewed":i.filteredRows.sort((t,n)=>{let r=b(i.tireRatings[t[0]]?.count,{min:0,max:1e4},0),o=b(i.tireRatings[n[0]]?.count,{min:0,max:1e4},0)-r;if(Math.abs(o)<.01){let s=b(i.tireRatings[t[0]]?.average,{min:0,max:5},0),u=b(i.tireRatings[n[0]]?.average,{min:0,max:5},0)-s;return Math.abs(u)<.01?g(t[0]).localeCompare(g(n[0])):u}return o});break;case"price-asc":i.filteredRows.sort((t,n)=>b(t[6],A.price,0)-b(n[6],A.price,0));break;case"price-desc":i.filteredRows.sort((t,n)=>b(n[6],A.price,0)-b(t[6],A.price,0));break;case"warranty-desc":i.filteredRows.sort((t,n)=>b(n[7],A.warranty,0)-b(t[7],A.warranty,0));break;case"weight-asc":i.filteredRows.sort((t,n)=>b(t[8],A.weight,0)-b(n[8],A.weight,0));break;case"newest":i.filteredRows.sort((t,n)=>g(n[23]).localeCompare(g(t[23])));break}}function kt(){let e=l("tireCount");if(e&&(e.textContent=`Showing ${i.filteredRows.length} tire${i.filteredRows.length===1?"":"s"}`),i.initialRenderDone)i.currentPage=1;else{let t=Math.max(1,Math.ceil(i.filteredRows.length/ae));i.currentPage>t&&(i.currentPage=t),i.initialRenderDone=!0}It(),Me(),nt()}function Le(e,t){let n=l(e);if(!n)return;[...new Set(t.map(a=>g(a).trim()))].filter(a=>a&&a.length<=100).sort((a,o)=>a.localeCompare(o)).slice(0,200).forEach(a=>{let o=document.createElement("option");o.value=a,o.textContent=a,n.appendChild(o)})}function Tt(e,t){let n=l(e);if(!n)return;let r=[...new Set(t.map(c=>g(c[1])).filter(c=>c))],a={};r.forEach(c=>{let u=c.match(/R(\d{2})/i),d=u?u[1]:"Other";a[d]||(a[d]=[]),a[d].push(c)});let o=Object.keys(a).sort((c,u)=>c==="Other"?1:u==="Other"?-1:parseInt(c)-parseInt(u));n.innerHTML="";let s=document.createElement("option");s.value="",s.textContent="All Sizes",n.appendChild(s),o.forEach(c=>{let u=document.createElement("optgroup");u.label=`${c}" Wheels`,a[c].sort().forEach(d=>{let f=document.createElement("option");f.value=d,f.textContent=d,u.appendChild(f)}),n.appendChild(u)})}function _t(){[{id:"priceMax",label:"priceVal",format:t=>`$${t}`,bounds:A.price},{id:"warrantyMax",label:"warrantyVal",format:t=>`${Number(t).toLocaleString()} miles`,bounds:A.warranty},{id:"weightMax",label:"weightVal",format:t=>`${t} lb`,bounds:A.weight}].forEach(({id:t,label:n,format:r,bounds:a})=>{let o=l(t),s=l(n);if(o&&s){o.addEventListener("input",()=>{let u=b(o.value,a,a.max);o.value=u,s.textContent=r(u),he(o)}),o.addEventListener("input",xe(z,400));let c=b(o.value,a,a.max);s.textContent=r(c),he(o)}})}function ot(){[{id:"searchInput",value:""},{id:"filterSize",value:""},{id:"filterBrand",value:""},{id:"filterCategory",value:""},{id:"priceMax",value:600},{id:"warrantyMax",value:8e4},{id:"weightMax",value:70},{id:"sortBy",value:"rating-desc"}].forEach(({id:r,value:a})=>{let o=l(r);o&&(o.value=a)}),["filter3pms","filterEVRated","filterStudded","filterReviewed","filterFavorites"].forEach(r=>{let a=l(r);a&&(a.checked=!1)}),[{id:"priceVal",text:"$600"},{id:"warrantyVal",text:"80,000 miles"},{id:"weightVal",text:"70 lb"}].forEach(({id:r,text:a})=>{let o=l(r);o&&(o.textContent=a)}),["priceMax","warrantyMax","weightMax"].forEach(r=>{let a=l(r);a&&he(a)}),delete i.domCache.searchInput,i.lastFilterState=null,document.dispatchEvent(new CustomEvent("filtersReset")),we()?fe():z(),history.replaceState(null,"",location.pathname)}function nt(){let e=l("activeFilters");if(!e)return;let t=[],n=l("searchInput")?.value?.trim();n&&t.push({label:"Search",value:n,clear:()=>{let p=l("searchInput");p&&(p.value=""),delete i.domCache.searchInput}});let r=l("filterSize");r?.value&&t.push({label:"Size",value:r.value,clear:()=>{r.value=""}});let a=l("filterBrand");a?.value&&t.push({label:"Brand",value:a.value,clear:()=>{a.value=""}});let o=l("filterCategory");o?.value&&t.push({label:"Category",value:o.value,clear:()=>{o.value=""}});let s=l("priceMax"),c=s?parseInt(s.value):600;c<600&&t.push({label:"Price",value:"≤ $"+c,clear:()=>{s.value=600;let p=l("priceVal");p&&(p.textContent="$600"),he(s)}});let u=l("warrantyMax"),d=u?parseInt(u.value):8e4;d<8e4&&t.push({label:"Warranty",value:"≤ "+Number(d).toLocaleString()+" mi",clear:()=>{u.value=8e4;let p=l("warrantyVal");p&&(p.textContent="80,000 miles"),he(u)}});let f=l("weightMax"),h=f?parseInt(f.value):70;h<70&&t.push({label:"Weight",value:"≤ "+h+" lb",clear:()=>{f.value=70;let p=l("weightVal");p&&(p.textContent="70 lb"),he(f)}}),l("filter3pms")?.checked&&t.push({label:"3PMS",value:"Yes",clear:()=>{l("filter3pms").checked=!1}}),l("filterEVRated")?.checked&&t.push({label:"EV Rated",value:"Yes",clear:()=>{l("filterEVRated").checked=!1}}),l("filterStudded")?.checked&&t.push({label:"Studded",value:"Yes",clear:()=>{l("filterStudded").checked=!1}}),l("filterReviewed")?.checked&&t.push({label:"Reviewed",value:"Yes",clear:()=>{l("filterReviewed").checked=!1}}),l("filterFavorites")?.checked&&t.push({label:"Favorites",value:"Yes",clear:()=>{l("filterFavorites").checked=!1}}),e.innerHTML="",t.forEach(p=>{let m=document.createElement("span");m.className="filter-chip";let w=document.createElement("span");w.className="filter-chip-label",w.textContent=p.label+":";let x=document.createElement("span");x.textContent=p.value;let R=document.createElement("button");R.className="filter-chip-dismiss",R.setAttribute("aria-label","Remove "+p.label+" filter"),R.innerHTML=k("xmark",12),R.addEventListener("click",()=>{p.clear(),i.lastFilterState=null,we()?fe():z()}),m.appendChild(w),m.appendChild(x),m.appendChild(R),e.appendChild(m)})}function rt(){let e=l("noResults");if(!e)return;let t=[],n=[],r=l("filterSize"),a=l("filterBrand"),o=l("filterCategory"),s=l("priceMax"),c=l("warrantyMax"),u=l("weightMax"),d=l("searchInput");r?.value&&n.push("Size"),a?.value&&n.push("Brand"),o?.value&&n.push("Category"),s&&parseInt(s.value)<600&&n.push("Price"),c&&parseInt(c.value)<8e4&&n.push("Warranty"),u&&parseInt(u.value)<70&&n.push("Weight"),l("filter3pms")?.checked&&n.push("3PMS"),l("filterEVRated")?.checked&&n.push("EV Rated"),l("filterStudded")?.checked&&n.push("Studded"),l("filterReviewed")?.checked&&n.push("Reviewed"),l("filterFavorites")?.checked&&n.push("Favorites"),d?.value?.trim()&&n.push("Search"),n.length>1&&t.push({label:k("rotate-left",14)+" Clear all filters",action:()=>ot()}),l("filterFavorites")?.checked&&t.push({label:k("heart-outline",14)+" Show all tires (not just favorites)",action:()=>{l("filterFavorites").checked=!1,i.lastFilterState=null,z()}}),r?.value&&t.push({label:k("ruler",14)+` Remove size filter (${B(r.value)})`,action:()=>{r.value="",i.lastFilterState=null,z()}}),a?.value&&t.push({label:k("building",14)+" Show all brands",action:()=>{a.value="",i.lastFilterState=null,z()}}),o?.value&&t.push({label:k("tags",14)+" Show all categories",action:()=>{o.value="",i.lastFilterState=null,z()}}),s&&parseInt(s.value)<600&&t.push({label:k("dollar-sign",14)+" Increase price limit to max",action:()=>{s.value=600,l("priceVal").textContent="$600",he(s),i.lastFilterState=null,z()}}),l("filter3pms")?.checked&&t.push({label:k("snowflake",14)+" Remove 3PMS filter",action:()=>{l("filter3pms").checked=!1,i.lastFilterState=null,z()}}),d?.value?.trim()&&t.push({label:k("magnifying-glass",14)+` Clear search "${B(g(d.value.trim(),30))}"`,action:()=>{d.value="",delete i.domCache.searchInput,i.lastFilterState=null,z()}});let f=t.slice(0,4);e.innerHTML="";let h=document.createElement("div");h.className="no-results-icon",h.innerHTML=k("magnifying-glass",24),e.appendChild(h);let p=document.createElement("div");p.className="no-results-title",p.textContent="No tires match your filters",e.appendChild(p);let m=document.createElement("div");if(m.className="no-results-description",n.length>0?m.textContent=`You have ${n.length} active filter${n.length>1?"s":""}: ${n.join(", ")}. Try adjusting your filters to see more options.`:m.textContent="Try adjusting the filters or search to see more options.",e.appendChild(m),f.length>0){let x=document.createElement("div");x.className="no-results-suggestions",f.forEach(R=>{let y=document.createElement("button");y.className="no-results-suggestion-btn",y.innerHTML=R.label,y.addEventListener("click",R.action),x.appendChild(y)}),e.appendChild(x)}let w=d?.value?.trim();if(w){let x=document.createElement("div");x.className="no-results-riviantrackr",x.innerHTML='<span>Not looking for tires?</span> <a href="https://riviantrackr.com/?s='+encodeURIComponent(w)+'" target="_blank" rel="noopener noreferrer">'+k("magnifying-glass",13)+' Search RivianTrackr for "'+B(g(w,30))+'" '+k("arrow-up-right",11)+"</a>",e.appendChild(x)}}function Me(){let e=new URLSearchParams;i.currentPage>1&&e.set("pg",i.currentPage);let t=p=>l(p)?.value,n=p=>l(p)?.checked,r=t("searchInput");r&&T.search.test(r)&&e.set("search",r);let a=t("filterSize");a&&i.VALID_SIZES.includes(a)&&e.set("size",a);let o=t("filterBrand");o&&i.VALID_BRANDS.includes(o)&&e.set("brand",o);let s=t("filterCategory");s&&i.VALID_CATEGORIES.includes(s)&&e.set("category",s),n("filter3pms")&&e.set("3pms","1"),n("filterEVRated")&&e.set("ev","1"),n("filterStudded")&&e.set("studded","1"),n("filterReviewed")&&e.set("reviewed","1");let c=t("sortBy");c&&Be.includes(c)&&c!=="rating-desc"&&e.set("sort",c);let u=parseInt(t("priceMax"));u&&u!==600&&u>=0&&u<=2e3&&e.set("price",u);let d=parseInt(t("warrantyMax"));d&&d!==8e4&&d>=0&&d<=1e5&&e.set("warranty",d);let f=parseInt(t("weightMax"));f&&f!==70&&f>=0&&f<=200&&e.set("weight",f),l("filterFavorites")?.checked&&e.set("favorites","1");let h=e.toString()?`${location.pathname}?${e.toString()}`:`${location.pathname}`;i.initialRenderDone&&h!==location.pathname+location.search?history.pushState(null,"",h):history.replaceState(null,"",h)}function Ne(){let e=new URLSearchParams(window.location.search),t=(p,m)=>{let w=document.getElementById(p);if(w&&m!==null){let x=Ce(m,T.search);w.value=x}},n=(p,m)=>{let w=document.getElementById(p);w&&(w.checked=m==="1")},r=e.get("search");r&&t("searchInput",r);let a=Ce(e.get("size"));if(a&&i.VALID_SIZES.includes(a)){let p=document.getElementById("filterSize");p&&(p.value=a)}let o=Ce(e.get("brand"));if(o&&i.VALID_BRANDS.includes(o)){let p=document.getElementById("filterBrand");p&&(p.value=o)}let s=Ce(e.get("category"));if(s&&i.VALID_CATEGORIES.includes(s)){let p=document.getElementById("filterCategory");p&&(p.value=s)}n("filter3pms",e.get("3pms")),n("filterEVRated",e.get("ev")),n("filterStudded",e.get("studded")),n("filterReviewed",e.get("reviewed")),n("filterFavorites",e.get("favorites"));let c=e.get("sort");if(c&&Be.includes(c)){let p=document.getElementById("sortBy");p&&(p.value=c)}let u=e.get("price"),d=e.get("warranty"),f=e.get("weight");if(u){let p=b(u,A.price,600),m=document.getElementById("priceMax");m&&(m.value=p)}if(d){let p=b(d,A.warranty,8e4),m=document.getElementById("warrantyMax");m&&(m.value=p)}if(f){let p=b(f,A.weight,70),m=document.getElementById("weightMax");m&&(m.value=p)}let h=e.get("pg")||e.get("page");if(h){let p=b(h,A.page,1);i.currentPage=p}else i.currentPage=1}function Mt(){let t=new URLSearchParams(window.location.search).get("compare");if(!t)return;let{updateCompareBar:n}=rn(),r=t.split(",").map(a=>{let o=parseInt(a.trim());return b(o,{min:0,max:1e4},-1)}).filter(a=>a>=0).slice(0,4);i.compareList=r,document.querySelectorAll(".compare-checkbox").forEach(a=>{let o=parseInt(a.dataset.index);i.compareList.includes(o)&&(a.checked=!0)}),n()}function rn(){return{updateCompareBar:Nt}}var Nt=()=>{};function Dt(e){Nt=e}function Ft(){let t=new URLSearchParams(window.location.search).get("tire");if(!t||!T.tireId.test(t))return;let n=i.allRows.find(d=>d[0]===t);if(!n)return;i.filteredRows=[n],i.currentPage=1;let r=document.querySelector(".filter-wrapper"),a=document.querySelector(".sort-wrapper"),o=l("activeFilters"),s=l("paginationControls"),c=document.querySelector(".toggle-filters-btn");r&&(r.style.display="none"),a&&(a.style.display="none"),o&&(o.style.display="none"),s&&(s.style.display="none"),c&&(c.style.display="none");let u=l("tireSection");if(u){let d=document.createElement("div");d.className="tire-deeplink-bar";let f=document.createElement("a");f.href=window.location.pathname,f.className="tire-deeplink-back",f.innerHTML=k("arrow-left",14)+" View all tires",d.appendChild(f),u.parentNode.insertBefore(d,u)}}function Pt(){if(typeof rtgData>"u"||!rtgData.settings||!rtgData.settings.prefilters)return;let e=rtgData.settings.prefilters;if(e.size){let t=document.getElementById("filterSize");t&&(t.value=e.size)}if(e.brand){let t=document.getElementById("filterBrand");t&&(t.value=e.brand)}if(e.category){let t=document.getElementById("filterCategory");t&&(t.value=e.category)}if(e.sort){let t=document.getElementById("sortBy");t&&(t.value=e.sort)}if(e.three_pms){let t=document.getElementById("filter3pms");t&&(t.checked=!0)}}re();te();Re();var De=!1,ke="";function an(e){let t=document.querySelector('.tire-card[data-tire-id="'+CSS.escape(e)+'"]');t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.classList.remove("rtg-ai-highlight"),t.offsetWidth,t.classList.add("rtg-ai-highlight"),setTimeout(()=>t.classList.remove("rtg-ai-highlight"),2500))}function Bt(){if(typeof rtgData>"u"||!rtgData.settings||!rtgData.settings.aiEnabled)return;let e=l("rtgAiSubmit");if(!e)return;e.addEventListener("click",on);let t=l("searchInput");t&&t.addEventListener("input",()=>{De&&Ge(!0)})}function on(){let e=l("searchInput");if(!e)return;let t=e.value.trim();t&&(t===ke&&De||(ke=t,sn(t)))}function sn(e){let t=l("rtgAiStatus"),n=l("rtgAiSummary"),r=l("rtgAiSubmit");t&&(t.style.display="block",t.innerHTML='<div class="rtg-ai-loading"><div class="rtg-ai-spinner"></div><span>Analyzing your needs and finding the best tires...</span></div>'),n&&(n.style.display="none",n.innerHTML=""),r&&(r.disabled=!0);let a=new FormData;a.append("action","rtg_ai_recommend"),a.append("nonce",rtgData.settings.aiNonce),a.append("query",e),fetch(rtgData.settings.ajaxurl,{method:"POST",body:a,credentials:"same-origin"}).then(o=>o.json()).then(o=>{if(r&&(r.disabled=!1),!o.success){We(o.data||"Something went wrong. Please try again.");return}let{recommendations:s,summary:c,tire_rows:u}=o.data;if(!s||s.length===0){We(c||"No matching tires found. Try a different query.");return}pe.trackAiSearch(e,s.length),cn(s,c,u||[])}).catch(()=>{r&&(r.disabled=!1),We("Unable to reach the AI service. Please check your connection and try again.")})}function We(e){let t=l("rtgAiStatus");if(t){let n="";ke?n='<div class="rtg-ai-riviantrackr"><span>Not looking for tires?</span> <a href="https://riviantrackr.com/?s='+encodeURIComponent(ke)+'" target="_blank" rel="noopener noreferrer">'+k("magnifying-glass",13)+' Search RivianTrackr for "'+B(g(ke,30))+'" '+k("arrow-up-right",11)+"</a></div>":n='<div class="rtg-ai-error"><i class="fa-solid fa-circle-exclamation" aria-hidden="true"></i> '+B(e)+"</div>",t.style.display="block",t.innerHTML=n}}function cn(e,t,n){let r=l("rtgAiStatus"),a=l("rtgAiSummary");r&&(r.style.display="none",r.innerHTML="");let o=new Map,s=[];e.forEach((d,f)=>{o.set(d.tire_id,{reason:d.reason,rank:f+1}),s.push(d.tire_id)});let c=new Map;n.forEach(d=>{d&&d[0]&&c.set(d[0],d)});let u=[];if(s.forEach(d=>{let f=i.allRows.find(h=>h[0]===d);f?u.push(f):c.has(d)&&u.push(c.get(d))}),u.length===0){We("The AI recommended tires that could not be found in the current catalog. Please try a different query.");return}if(i.aiRecommendations=o,i.filteredRows=u,i.currentPage=1,De=!0,a){let d=B(t),f='<div class="rtg-ai-tire-chips">';u.forEach(p=>{let m=p[0],w=g(p[3]).trim(),x=g(p[4]).trim();x&&(f+='<a href="#" class="rtg-ai-tire-link rtg-ai-tire-chip" data-tire-id="'+B(m)+'">'+B(w+" "+x)+"</a>")}),f+="</div>",a.style.display="block",a.innerHTML='<div class="rtg-ai-summary-content"><div class="rtg-ai-summary-icon"><i class="fa-solid fa-wand-magic-sparkles" aria-hidden="true"></i></div><div class="rtg-ai-summary-text"><strong>AI Recommendation</strong><p>'+d+"</p>"+f+'</div><button id="rtgAiClear" class="rtg-ai-clear" type="button" aria-label="Clear AI recommendations"><i class="fa-solid fa-xmark" aria-hidden="true"></i> Clear</button></div>';let h=document.getElementById("rtgAiClear");h&&h.addEventListener("click",()=>Ge()),a.addEventListener("click",p=>{let m=p.target.closest(".rtg-ai-tire-link");m&&(p.preventDefault(),an(m.dataset.tireId))})}ln()}function ln(){let e=i.filteredRows.map(t=>t[0]).filter(Boolean);Promise.resolve().then(()=>(Te(),Et)).then(({renderCards:t})=>ye(e).then(()=>{t(i.filteredRows);let n=l("tireCount");n&&(n.textContent=`AI found ${i.filteredRows.length} recommended tire${i.filteredRows.length!==1?"s":""}`);let r=l("noResults"),a=l("tireCards");i.filteredRows.length>0?(r&&(r.style.display="none"),a&&(a.style.display="grid")):(r&&(r.style.display=""),a&&(a.style.display="none"));let o=l("paginationControls");o&&(o.innerHTML="")}))}function Ge(e){De=!1,ke="",i.aiRecommendations=null;let t=l("rtgAiSummary"),n=l("rtgAiStatus"),r=l("searchInput");t&&(t.style.display="none",t.innerHTML=""),n&&(n.style.display="none",n.innerHTML=""),r&&!e&&(r.value=""),i.lastFilterState=null,we()?fe():z()}function jt(){return De}function dn(){return typeof rtgData<"u"&&rtgData.settings&&rtgData.settings.aiEnabled}var U={brands:new Map,models:new Map,categories:new Map,sizes:new Map,tags:new Map,combined:new Map};function un(){Object.values(U).forEach(e=>e.clear()),i.allRows.forEach((e,t)=>{let[n,r,a,o,s,c,u,d,f,h,p,m,w,x,R,y,v,W]=e,D=g(o).toLowerCase().trim(),V=g(s).toLowerCase().trim(),N=g(c).toLowerCase().trim(),F=g(r).toLowerCase().trim(),Z=g(W).toLowerCase().trim();if(D){U.brands.has(D)||U.brands.set(D,{display:g(o).trim(),count:0,rows:[]});let I=U.brands.get(D);I.count++,I.rows.push(t)}if(V){let I=`${D} ${V}`;U.models.has(I)||U.models.set(I,{display:`${g(o).trim()} ${g(s).trim()}`,brand:g(o).trim(),model:g(s).trim(),count:0,rows:[]});let Y=U.models.get(I);Y.count++,Y.rows.push(t)}if(N){U.categories.has(N)||U.categories.set(N,{display:g(c).trim(),count:0,rows:[]});let I=U.categories.get(N);I.count++,I.rows.push(t)}if(F){U.sizes.has(F)||U.sizes.set(F,{display:g(r).trim(),count:0,rows:[]});let I=U.sizes.get(F);I.count++,I.rows.push(t)}Z&&Z.split(/[,|]/).map(Y=>Y.trim()).filter(Boolean).forEach(Y=>{U.tags.has(Y)||U.tags.set(Y,{display:Y,count:0,rows:[]});let ie=U.tags.get(Y);ie.count++,ie.rows.includes(t)||ie.rows.push(t)}),[D,V,N,F,...Z.split(/[,|]/).map(I=>I.trim()).filter(Boolean)].filter(Boolean).forEach(I=>{I.length>=2&&(U.combined.has(I)||U.combined.set(I,new Set),U.combined.get(I).add(t))})})}function $t(){dn()&&jt()?Ge(!0):z()}function Ot(){let e=l("searchInput");if(!e)return;un();let t=e.cloneNode(!0);e.parentNode.replaceChild(t,e),i.domCache.searchInput=t;let n=document.getElementById("rtgSearchSubmit");n&&n.addEventListener("click",()=>{$t()}),t.addEventListener("keydown",r=>{r.key==="Enter"&&(r.preventDefault(),$t())}),document.addEventListener("filtersReset",()=>{let r=document.querySelector("#searchInput");r&&(r.value="")}),document.addEventListener("click",r=>{r.target.textContent&&r.target.textContent.includes("Clear All")&&setTimeout(()=>{let a=document.querySelector("#searchInput");a&&(a.value="")},50)})}function He(e,t){let n=e.toLowerCase().trim(),r=t.toLowerCase().trim();if(!r||n===r||n.startsWith(r))return!0;let a=n.split(/\s+/);return!!(r.split(/\s+/).every(c=>a.some(u=>u===c||c.length>=3&&u.startsWith(c)?!0:c.includes("/")||c.includes("-")?u===c||u.startsWith(c):!1))||r.length>=4&&n.includes(r))}Re();Te();et();tt();Dt(qe);window.openComparison=ht;window.clearCompare=vt;window.resetFilters=ot;typeof tireRatingAjax<"u"&&(i.isLoggedIn=tireRatingAjax.is_logged_in===!0||tireRatingAjax.is_logged_in==="1"||tireRatingAjax.is_logged_in===1);function mn(){i.eventDelegationSetup||(document.addEventListener("click",function(e){let t=e.target.closest(".rating-stars.interactive .star");if(t){let a=t.dataset.tireId,o=parseInt(t.dataset.rating);if(!T.tireId.test(a)||!Number.isInteger(o)||o<1||o>5)return;Oe(a,o);return}let n=e.target.closest(".write-review-btn");if(n){let a=n.dataset.tireId;if(T.tireId.test(a)){let o=i.userRatings[a]||0;Oe(a,o)}return}let r=e.target.closest(".view-reviews-btn");if(r){let a=r.dataset.tireId;T.tireId.test(a)&&mt(a);return}}),document.addEventListener("mouseenter",function(e){let t=e.target.closest(".rating-stars.interactive .star");if(!t)return;let n=parseInt(t.dataset.rating);if(!Number.isInteger(n)||n<1||n>5)return;t.closest(".rating-stars").querySelectorAll(".star").forEach((o,s)=>{s<n?o.classList.add("hover"):o.classList.remove("hover")})},!0),document.addEventListener("mouseleave",function(e){let t=e.target.closest(".rating-stars");if(!t)return;t.querySelectorAll(".star").forEach(r=>r.classList.remove("hover"))},!0),document.addEventListener("click",function(e){let t=e.target.closest(".tire-card-cta-primary, .tire-card-cta-review");if(!t)return;let n=t.closest(".tire-card");if(!n)return;let r=n.dataset.tireId;if(!r||!T.tireId.test(r))return;let a="purchase";t.classList.contains("tire-card-cta-review")&&(a="review"),pe.trackClick(r,a)}),document.addEventListener("keydown",function(e){let t=e.target.closest(".rating-stars.interactive .star");if(!t)return;let n=t.closest(".rating-stars"),r=Array.from(n.querySelectorAll(".star")),a=r.indexOf(t);if(e.key==="ArrowRight"||e.key==="ArrowUp"){e.preventDefault();let o=r[Math.min(a+1,r.length-1)];o.setAttribute("tabindex","0"),t.setAttribute("tabindex","-1"),o.focus()}else if(e.key==="ArrowLeft"||e.key==="ArrowDown"){e.preventDefault();let o=r[Math.max(a-1,0)];o.setAttribute("tabindex","0"),t.setAttribute("tabindex","-1"),o.focus()}else(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),t.click())}),i.eventDelegationSetup=!0)}function zt(){let e=we(),t=e?fe:z,n=e?xe(fe,500):xe(z,500);if(e||(i.VALID_SIZES=[...new Set(i.allRows.map(a=>String(a[1]||"").trim()))].filter(Boolean),i.VALID_BRANDS=[...new Set(i.allRows.map(a=>String(a[3]||"").trim()))].filter(Boolean),i.VALID_CATEGORIES=[...new Set(i.allRows.map(a=>String(a[5]||"").trim()))].filter(Boolean),Tt("filterSize",i.allRows),Le("filterBrand",i.allRows.map(a=>a[3])),Le("filterCategory",i.allRows.map(a=>a[5]))),[{id:"searchInput",listener:n},{id:"filterSize",listener:t},{id:"filterBrand",listener:t},{id:"filterCategory",listener:t},{id:"filter3pms",listener:t},{id:"filterEVRated",listener:t},{id:"filterStudded",listener:t},{id:"filterReviewed",listener:t},{id:"filterFavorites",listener:t}].forEach(({id:a,listener:o})=>{let s=l(a);s&&s.addEventListener("input",o)}),Pt(),Ne(),Mt(),_t(),mn(),Ot(),Bt(),e)["priceMax","warrantyMax","weightMax"].forEach(o=>{let s=l(o);s&&s.addEventListener("input",xe(fe,500))}),St().then(()=>{_e(i.currentPage)});else{At(),z(),Ft();let a=l("tireCount");a&&(a.textContent=`Showing ${i.filteredRows.length} tire${i.filteredRows.length!==1?"s":""}`)}ft()}window.addEventListener("popstate",function(){we()||(i.lastFilterState=null,Ne(),z())});pe.init();(function(){let t=document.getElementById("tireCards");if(!t||t.children.length>0)return;let n=typeof rtgData<"u"&&rtgData.settings&&rtgData.settings.rowsPerPage||12,r=document.createElement("div");r.className="rtg-skeleton-grid",r.id="rtg-skeleton-loader";for(let a=0;a<Math.min(n,12);a++)r.innerHTML+='<div class="rtg-skeleton-card"><div class="rtg-skeleton-shimmer rtg-skeleton-image"></div><div class="rtg-skeleton-shimmer rtg-skeleton-title"></div><div class="rtg-skeleton-shimmer rtg-skeleton-subtitle"></div><div class="rtg-skeleton-row"><div class="rtg-skeleton-shimmer rtg-skeleton-badge"></div><div class="rtg-skeleton-shimmer rtg-skeleton-badge"></div></div><div class="rtg-skeleton-shimmer rtg-skeleton-text"></div><div class="rtg-skeleton-shimmer rtg-skeleton-text-short"></div><div class="rtg-skeleton-shimmer rtg-skeleton-stars"></div></div>';t.appendChild(r)})();typeof rtgData<"u"&&rtgData.settings&&rtgData.settings.serverSide?(i.serverSideMode=!0,typeof tireRatingAjax<"u"&&(i.isLoggedIn=tireRatingAjax.is_logged_in===!0||tireRatingAjax.is_logged_in==="1"||tireRatingAjax.is_logged_in===1),i.allRows=[],i.filteredRows=[],zt()):typeof rtgData<"u"&&rtgData.tires&&Array.isArray(rtgData.tires)&&(i.allRows=rtgData.tires.map(je).filter(e=>e&&e.length&&e[0]),i.filteredRows=i.allRows,typeof tireRatingAjax<"u"&&(i.isLoggedIn=tireRatingAjax.is_logged_in===!0||tireRatingAjax.is_logged_in==="1"||tireRatingAjax.is_logged_in===1),zt());document.addEventListener("click",e=>{let t=l("compareModal"),n=t?.querySelector("div");t?.style.display==="flex"&&t.contains(e.target)&&!n?.contains(e.target)&&(t.style.display="none",document.body.style.overflow="")});document.addEventListener("DOMContentLoaded",()=>{function e(){document.querySelectorAll(".switch-label").forEach(u=>{let d=u.querySelector('input[type="checkbox"]'),f=u.querySelector(".switch-text");if(d&&f){let h=d.id,p=null,m="";switch(h){case"filter3pms":p="3PMS Filter",m="3PMS Rated";break;case"filterEVRated":p="EV Rated Filter",m="EV Rated";break;case"filterStudded":p="Studded Available Filter",m="Studded Available";break;case"filterReviewed":p="Officially Reviewed Filter",m="Officially Reviewed";break}if(p){let w=$e(m,p);f.innerHTML="",f.appendChild(w)}}})}function t(){setTimeout(()=>{[{selector:"filter3pms",label:"3PMS Rated",key:"3PMS Filter"},{selector:"filterEVRated",label:"EV Rated",key:"EV Rated Filter"},{selector:"filterStudded",label:"Studded Available",key:"Studded Available Filter"},{selector:"filterReviewed",label:"Officially Reviewed",key:"Officially Reviewed Filter"}].forEach(({selector:u,label:d,key:f})=>{let h=document.querySelector(`.switch-label:has(input#${u}) .switch-text`);if(h){let p=$e(d,f);h.innerHTML="",h.appendChild(p)}else{let p=document.getElementById(u);if(p){let m=p.parentElement.querySelector(".switch-text");if(m){let w=$e(d,f);m.innerHTML="",m.appendChild(w)}}}})},100)}e(),t(),document.addEventListener("click",c=>{let u=c.target.closest(".info-tooltip-trigger");if(u){c.preventDefault(),c.stopPropagation();let d=u.dataset.tooltipKey;ut(d,u)}});let n=l("sortBy");n&&n.addEventListener("input",z);let r=l("toggleFilters"),a=l("mobileFilterContent");r&&a&&(r.setAttribute("aria-expanded","false"),r.setAttribute("aria-controls","mobileFilterContent"),r.addEventListener("click",()=>{let c=a.classList.toggle("open");r.textContent=c?"Hide Filters":"Show Filters",r.setAttribute("aria-expanded",c?"true":"false")}));let o=l("wheelDrawerTrigger"),s=l("wheelDrawer");o&&s&&(o.setAttribute("aria-expanded","false"),o.setAttribute("aria-controls","wheelDrawer"),o.addEventListener("click",()=>{let c=s.style.display!=="block";s.style.display=c?"block":"none",o.setAttribute("aria-expanded",c?"true":"false")}))});})();
