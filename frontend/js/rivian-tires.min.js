(()=>{var Qt=Object.defineProperty;var U=(e,t)=>()=>(e&&(t=e(e=0)),t);var mt=(e,t)=>{for(var r in t)Qt(e,r,{get:t[r],enumerable:!0})};var te,i,I,J=U(()=>{te=typeof rtgData<"u"&&rtgData.settings&&rtgData.settings.rowsPerPage?rtgData.settings.rowsPerPage:12,i={filteredRows:[],allRows:[],currentPage:1,compareList:[],tireRatings:{},userRatings:{},userReviews:{},isLoggedIn:!1,userFavorites:new Set,VALID_SIZES:[],VALID_BRANDS:[],VALID_CATEGORIES:[],domCache:{},cardCache:new Map,cardContainer:null,isRendering:!1,pendingRender:!1,lastFilterState:null,initialRenderDone:!1,renderAnimationFrame:null,eventDelegationSetup:!1,ratingRequestQueue:[],ratingRequestTimeout:null,activeTooltip:null,serverSideMode:!1,serverSideTotal:0,serverSideFetchController:null},I={sizeIndex:new Map,brandIndex:new Map,categoryIndex:new Map,priceIndex:[],warrantyIndex:[],weightIndex:[]}});function C(e){return getComputedStyle(document.documentElement).getPropertyValue("--rtg-"+e).trim()}function L(e,t,r){var n="fa-solid",a="fa-"+e;e==="heart-outline"?(n="fa-regular",a="fa-heart"):e==="arrow-up-right"?a="fa-up-right-from-square":e==="trash"?a="fa-trash-can":e==="share"&&(a="fa-share-nodes");var o=n+" "+a;r&&(o+=" "+r);var c=t?' style="font-size:'+t+'px"':"";return'<i class="'+o+'"'+c+' aria-hidden="true"></i>'}function z(e){return typeof e!="string"?"":String(e).replace(/[&<>"'\/]/g,function(t){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"}[t]})}function y(e,t=200){if(typeof e!="string")return"";let r=String(e).trim();return r.length>t?r.substring(0,t):r}function d(e){return i.domCache[e]||(i.domCache[e]=document.getElementById(e)),i.domCache[e]}function oe(e,t){let r;return function(...n){clearTimeout(r),r=setTimeout(()=>e.apply(this,n),t)}}function _e(e=22){return`<svg viewBox="0 0 24 24" width="${e}" height="${e}" aria-hidden="true"><path class="star-bg" d="${Ge}" fill="none" stroke="currentColor" stroke-width="1.5"/><path class="star-fill" d="${Ge}" fill="currentColor"/><path class="star-half" d="${Ge}" fill="currentColor" style="clip-path:inset(0 50% 0 0)"/></svg>`}function se(e){let t=parseFloat(e.min),r=parseFloat(e.max),a=(parseFloat(e.value)-t)/(r-t)*100;e.style.setProperty("--percent",`${a}%`)}function fe(e){e.style.backgroundColor=C("bg-primary"),e.style.color=C("text-primary"),e.style.padding="8px 16px",e.style.border="none",e.style.borderRadius="6px",e.style.cursor="pointer",e.style.fontWeight="600",e.onmouseover=()=>e.style.backgroundColor=C("accent"),e.onmouseout=()=>e.style.backgroundColor=C("bg-primary")}var Ge,W=U(()=>{J();Ge="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"});function ge(e,t=null){if(typeof e!="string")return"";let r;return t===T.search?r=e.replace(/[<>\"'&\\]/g,"").trim():r=e.replace(/[<>\"'&\/\\]/g,"").trim(),t&&!t.test(r)?"":r.length>100?r.substring(0,100):r}function he(e){if(typeof e!="string"||!e.trim())return"";let t=e.trim();if(!T.imageUrl.test(t))return t.match(/\.(jpg|jpeg|png|webp|gif)$/i),"";try{let r=new URL(t);return r.protocol!=="https:"||r.hostname!=="riviantrackr.com"||r.pathname.includes("..")||r.pathname.includes("//")?"":t}catch{return t.match(/\.(jpg|jpeg|png|webp|gif)$/i),""}}function ft(e){if(typeof e!="string"||!e.trim())return"";let t=e.trim();if(!T.affiliateUrl.test(t))return t.startsWith("http"),"";try{let r=new URL(t);if(r.protocol!=="https:")return"";let n=["riviantrackr.com","tirerack.com","discounttire.com","amazon.com","amzn.to","costco.com","walmart.com","goodyear.com","bridgestonetire.com","michelinman.com","continental-tires.com","pirelli.com","sumitomotire.com","yokohamatire.com","coopertire.com","bfgoodrichtires.com","firestone.com","generaltire.com","hankooktire.com","kumhotire.com","nexentire.com","toyo.com","falkentire.com","nittotire.com","autozone.com","pepboys.com","ntb.com","simpletire.com","prioritytire.com","anrdoezrs.net","dpbolvw.net","jdoqocy.com","kqzyfj.com","tkqlhce.com","commission-junction.com","cj.com","linksynergy.com","click.linksynergy.com","shareasale.com","avantlink.com","impact.com","partnerize.com"],a=r.hostname.toLowerCase();return!n.some(c=>a===c||a.endsWith("."+c))||r.pathname.includes("..")?"":t}catch{return""}}function gt(e){if(typeof e!="string"||!e.trim())return"";let t=e.trim();if(!/^https:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,}\/[a-zA-Z0-9\-\/_\.%&=?#:+@]*$/.test(t))return"";try{let n=new URL(t);if(n.protocol!=="https:")return"";let a=["riviantrackr.com","www.riviantrackr.com","youtube.com","www.youtube.com","youtu.be","tiktok.com","www.tiktok.com","instagram.com","www.instagram.com"],o=n.hostname.toLowerCase();return!a.some(s=>o===s||o.endsWith("."+s))||n.pathname.includes("..")?"":t}catch{return""}}function b(e,t,r=0){if(typeof e=="string"){if(!T.numeric.test(e))return r;e=parseFloat(e)}return typeof e!="number"||isNaN(e)?r:e<t.min||e>t.max?Math.max(t.min,Math.min(t.max,e)):e}function Ne(e){if(!Array.isArray(e)||e.length<23)return null;let t=new Array(e.length);for(let r=0;r<e.length;r++){let n=e[r];typeof n=="string"?(t[r]=n.replace(/[<>\"'&]/g,"").trim(),t[r].length>500&&(t[r]=t[r].substring(0,500))):typeof n=="number"?r===6?t[r]=b(n,k.price):r===7?t[r]=b(n,k.warranty):r===8?t[r]=b(n,k.weight):t[r]=typeof n=="number"&&!isNaN(n)?n:0:t[r]=""}return!t[0]||!T.tireId.test(t[0])?null:t}var T,k,De,ce=U(()=>{W();T={search:/^[a-zA-Z0-9\s\-\/\.\+\*\(\)]*$/,tireId:/^[a-zA-Z0-9\-_]+$/,numeric:/^\d+(\.\d+)?$/,affiliateUrl:/^https:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,}\/[a-zA-Z0-9\-\/_\.%&=?#:+]*$/,imageUrl:/^https:\/\/riviantrackr\.com\/.*\.(jpg|jpeg|png|webp)$/i},k={price:{min:0,max:2e3},warranty:{min:0,max:1e5},weight:{min:0,max:200},rating:{min:1,max:5},page:{min:1,max:1e3}},De=["efficiencyGrade","price-asc","price-desc","warranty-desc","weight-asc","reviewed","rating-desc","newest","most-reviewed"]});var ue,Fe=U(()=>{ue={nonce:null,ajaxurl:null,init(){typeof rtgData<"u"&&rtgData.settings&&(this.nonce=rtgData.settings.analyticsNonce||null,this.ajaxurl=rtgData.settings.ajaxurl||null)},track(e,t){if(!this.ajaxurl||!this.nonce)return;let r=new FormData;if(r.append("action",e),r.append("nonce",this.nonce),Object.entries(t).forEach(([n,a])=>r.append(n,a)),!(navigator.sendBeacon&&navigator.sendBeacon(this.ajaxurl,r)))try{fetch(this.ajaxurl,{method:"POST",body:r,keepalive:!0}).catch(()=>{})}catch{}},trackClick(e,t){this.track("rtg_track_click",{tire_id:e,link_type:t})},_searchDebounceTimer:null,trackSearch(e,t,r,n){clearTimeout(this._searchDebounceTimer),this._searchDebounceTimer=setTimeout(()=>{this.track("rtg_track_search",{search_query:e,filters_json:JSON.stringify(t),sort_by:r,result_count:String(n)})},2e3)}}});function vt(e,t){let r=document.createElement("div");r.style.cssText="display: flex; align-items: center; gap: 6px;";let n=document.createElement("span");n.className="tire-card-spec-label",n.textContent=e;let a=document.createElement("button");return a.innerHTML=""+L("circle-info",14),a.className="info-tooltip-trigger",a.dataset.tooltipKey=t,a.setAttribute("aria-label",`More info about ${e}`),a.setAttribute("type","button"),a.style.cssText=`
    background: none;
    border: none;
    color: var(--rtg-text-muted);
    font-size: 14px;
    cursor: pointer;
    padding: 2px;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
  `,a.addEventListener("mouseenter",()=>{a.style.color=C("accent"),a.style.backgroundColor=`color-mix(in srgb, ${C("accent")} 10%, transparent)`}),a.addEventListener("mouseleave",()=>{a.style.color=C("text-muted"),a.style.backgroundColor="transparent"}),r.appendChild(n),r.appendChild(a),r}function Pe(e,t){let r=document.createElement("div");r.style.cssText="display: flex; align-items: center; gap: 6px;";let n=document.createElement("span");n.textContent=e;let a=document.createElement("button");return a.innerHTML=""+L("circle-info",14),a.className="info-tooltip-trigger",a.dataset.tooltipKey=t,a.setAttribute("aria-label",`More info about ${e}`),a.setAttribute("type","button"),a.style.cssText=`
    background: none;
    border: none;
    color: var(--rtg-text-muted);
    font-size: 14px;
    cursor: pointer;
    padding: 2px;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
  `,a.addEventListener("mouseenter",()=>{a.style.color=C("accent"),a.style.backgroundColor=`color-mix(in srgb, ${C("accent")} 10%, transparent)`}),a.addEventListener("mouseleave",()=>{a.style.color=C("text-muted"),a.style.backgroundColor="transparent"}),r.appendChild(n),r.appendChild(a),r}function yt(e){ht();let t=Ye[e];if(!t)return;let r=document.createElement("div");r.className="tooltip-modal-overlay",r.style.cssText=`
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    animation: fadeIn 0.2s ease;
    backdrop-filter: blur(2px);
  `;let n=document.createElement("div");n.className="tooltip-modal",n.style.cssText=`
    background: ${C("bg-primary")};
    border-radius: 12px;
    padding: 20px;
    max-width: 400px;
    width: 100%;
    color: ${C("text-light")};
    border: 1px solid #475569;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
    animation: slideUp 0.2s ease;
    position: relative;
  `;let a=document.createElement("h3");a.textContent=t.title,a.style.cssText=`
    margin: 0 0 12px 0;
    font-size: 18px;
    font-weight: 700;
    color: ${C("accent")};
  `;let o=document.createElement("p");o.innerHTML=t.content,o.style.cssText=`
    margin: 0 0 16px 0;
    line-height: 1.5;
    font-size: 14px;
    color: #e2e8f0;
  `;let c=document.createElement("button");c.innerHTML=L("xmark",18),c.style.cssText=`
    position: absolute;
    top: 16px;
    right: 16px;
    background: none;
    border: none;
    color: var(--rtg-text-muted);
    font-size: 16px;
    cursor: pointer;
    padding: 4px;
    border-radius: 4px;
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
  `,c.addEventListener("mouseenter",()=>{c.style.color=C("text-light"),c.style.backgroundColor="rgba(148, 163, 184, 0.2)"}),c.addEventListener("mouseleave",()=>{c.style.color=C("text-muted"),c.style.backgroundColor="transparent"});let s=document.createElement("button");s.textContent="Got it",s.style.cssText=`
    background: ${C("accent")};
    color: #1a1a1a;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    font-weight: 600;
    cursor: pointer;
    font-size: 14px;
    transition: background-color 0.2s ease;
    width: 100%;
  `,s.addEventListener("mouseenter",()=>{s.style.backgroundColor=C("accent-hover")}),s.addEventListener("mouseleave",()=>{s.style.backgroundColor=C("accent")});let u=()=>ht();c.addEventListener("click",u),s.addEventListener("click",u),r.addEventListener("click",p=>{p.target===r&&u()});let l=p=>{p.key==="Escape"&&(u(),document.removeEventListener("keydown",l))};document.addEventListener("keydown",l),n.appendChild(a),n.appendChild(o),n.appendChild(c),n.appendChild(s),r.appendChild(n),document.body.appendChild(r),i.activeTooltip=r,document.body.style.overflow="hidden",s.focus()}function ht(){i.activeTooltip&&(i.activeTooltip.style.animation="fadeOut 0.2s ease",setTimeout(()=>{i.activeTooltip&&i.activeTooltip.parentNode&&i.activeTooltip.parentNode.removeChild(i.activeTooltip),i.activeTooltip=null,document.body.style.overflow=""},200))}var Ye,Ze=U(()=>{J();W();Ye={"Load Index":{title:"Load Index",content:"Rivian vehicles require tires with a minimum load index of 116 to safely carry the vehicle's weight. Using a lower load index can affect safety, handling, and durability."},"3PMS Rated":{title:"3PMS Rating",content:"3PMS (Three-Peak Mountain Snowflake) symbol indicates the tire meets winter traction requirements and is rated for severe snow service according to industry standards."},UTQG:{title:"UTQG Rating",content:"UTQG (Uniform Tire Quality Grading) provides standardized ratings for treadwear, temperature resistance (A, B, C), and traction performance (AA, A, B, C) to help compare tire quality."},"3PMS Filter":{title:"3PMS Rating Filter",content:"3PMS (Three-Peak Mountain Snowflake) means the tire meets winter traction requirements and is rated for severe snow service."},"EV Rated Filter":{title:"EV Rated Filter",content:"Filters for tires labeled as EV Rated in their specs or marketing. These are typically optimized for electric vehicles."},"Studded Available Filter":{title:"Studded Available Filter",content:'Filters for tires marked as "Studded Available" — these can be fitted with studs for enhanced traction on ice.'},"Officially Reviewed Filter":{title:"Officially Reviewed Filter",content:"Filters for tires that have an official review from RivianTrackr — either a written article or video review."},"Efficiency Score":{title:"Efficiency Score",content:"This Efficiency Score is a calculated score RivianTrackr created to help assist Rivian owners in identifying which tires are likely to be the most range-friendly. It uses a custom formula that factors in weight, tread depth, tire width, load range, speed rating, UTQG, tire category, and winter certification (3PMS). Lighter tires with shallower tread and less aggressive construction typically score higher. <br><br> The score is an estimate only and does not reflect real-world testing. It should not be viewed as a measure of tire quality, safety, or brand reputation."}}});function Ee(e){if(!e.length)return Promise.resolve();let t=e.filter(r=>typeof r=="string"&&T.tireId.test(r)&&r.length<=50);return t.length?(i.ratingRequestQueue.push(...t),i.ratingRequestTimeout&&clearTimeout(i.ratingRequestTimeout),new Promise(r=>{i.ratingRequestTimeout=setTimeout(()=>{let n=[...new Set(i.ratingRequestQueue)];if(i.ratingRequestQueue=[],typeof tireRatingAjax<"u"&&(i.isLoggedIn=tireRatingAjax.is_logged_in===!0||tireRatingAjax.is_logged_in==="1"||tireRatingAjax.is_logged_in===1),typeof tireRatingAjax>"u"){r();return}let a=new FormData;a.append("action","get_tire_ratings"),tireRatingAjax.nonce&&a.append("nonce",tireRatingAjax.nonce),n.forEach(o=>{a.append("tire_ids[]",o)}),fetch(tireRatingAjax.ajaxurl,{method:"POST",body:a}).then(o=>o.json()).then(o=>{o.success&&(i.tireRatings={...i.tireRatings,...o.data.ratings},i.userRatings={...i.userRatings,...o.data.user_ratings},o.data.user_reviews&&(i.userReviews={...i.userReviews,...o.data.user_reviews}),i.isLoggedIn=o.data.is_logged_in===!0||o.data.is_logged_in==="1"||o.data.is_logged_in===1),r()}).catch(o=>{r()})},50)})):Promise.resolve()}function Jt(e,t,r="",n=""){if(!T.tireId.test(e))return Promise.reject("Invalid tire ID");let a=b(t,k.rating);if(a!==t)return Promise.reject("Invalid rating");if(!i.isLoggedIn)return typeof tireRatingAjax<"u"&&tireRatingAjax.login_url?window.location.href=tireRatingAjax.login_url:alert("Please log in or sign up to review tires"),Promise.reject("Not logged in");if(typeof tireRatingAjax>"u"||!tireRatingAjax.nonce)return Promise.reject("Security validation failed");let o=new FormData;return o.append("action","submit_tire_rating"),o.append("tire_id",e),o.append("rating",a.toString()),o.append("nonce",tireRatingAjax.nonce),r&&o.append("review_title",r.substring(0,200)),n&&o.append("review_text",n.substring(0,5e3)),fetch(tireRatingAjax.ajaxurl,{method:"POST",body:o}).then(c=>c.json()).then(c=>{if(c.success)return i.tireRatings[e]={average:b(c.data.average_rating,{min:0,max:5}),count:b(c.data.rating_count,{min:0,max:1e4}),review_count:b(c.data.review_count,{min:0,max:1e4})},i.userRatings[e]=b(c.data.user_rating,k.rating),n&&(i.userReviews[e]={rating:a,review_title:r,review_text:n}),Xt(e),c.data;throw new Error(c.data||"Failed to save review")})}function Je(e,t=0,r=0,n=0){if(!T.tireId.test(e))return"<div>Error: Invalid tire data</div>";let a=b(t,{min:0,max:5},0),o=b(r,{min:0,max:1e4},0),c=n&&n>0?b(n,k.rating,0):0,s=i.isLoggedIn,u=a>=4.5&&o>=2,l=document.createElement("div");l.className="tire-rating-container",l.dataset.tireId=e,u&&(l.dataset.highRating="true");let p=document.createElement("div");p.className="rating-display";let g=document.createElement("div");g.className=`rating-stars ${s?"interactive":""} ${c>0?"has-user-rating":""}`,g.dataset.tireId=e,g.setAttribute("role",s?"radiogroup":"img"),g.setAttribute("aria-label",a>0?`Rating: ${a.toFixed(1)} out of 5 stars`:"No reviews yet");let m=a>0?Math.round(a*2)/2:0;for(let v=1;v<=5;v++){let w=document.createElement("span");w.className="star",w.dataset.rating=v.toString(),w.dataset.tireId=e,w.innerHTML=_e(26),m>=v?w.classList.add("active"):m>=v-.5&&w.classList.add("active","half"),c>0&&v<=c&&w.classList.add("user-rated"),s?(w.style.cursor="pointer",w.setAttribute("role","radio"),w.setAttribute("aria-checked",c===v?"true":"false"),w.setAttribute("aria-label",`${v} star${v!==1?"s":""}`),w.setAttribute("tabindex",v===(c||1)?"0":"-1")):w.setAttribute("aria-hidden","true"),g.appendChild(w)}let f=document.createElement("div");f.className="rating-info";let h=document.createElement("span");h.className="rating-average",h.textContent=a>0?a.toFixed(1):"No reviews",f.appendChild(h),p.appendChild(g),p.appendChild(f),l.appendChild(p);let x=document.createElement("div");x.className="review-actions";let E=i.tireRatings[e]?.review_count||0;if(E>0){let v=document.createElement("button");v.className="review-action-link view-reviews-btn",v.dataset.tireId=e;let w=document.createElement("span");w.innerHTML=L("message",14),w.style.display="inline-flex",v.appendChild(w),v.appendChild(document.createTextNode(` ${E} review${E!==1?"s":""}`)),x.appendChild(v)}if(i.isLoggedIn){let v=i.userReviews[e]?.rating,w=document.createElement("button");w.className="review-action-link write-review-btn",w.dataset.tireId=e,w.textContent=v?"Edit Review":"Write a Review",x.appendChild(w)}else{let v=document.createElement("a");v.className="login-prompt",v.href=typeof tireRatingAjax<"u"?tireRatingAjax.login_url:"/wp-login.php";let w=document.createElement("span");w.innerHTML=L("pen-to-square",14),w.style.display="inline-flex",v.appendChild(w),v.appendChild(document.createTextNode(" Log in to review this tire")),x.appendChild(v)}return l.appendChild(x),l.outerHTML}function Xt(e){if(!T.tireId.test(e))return;let t=document.querySelector(`[data-tire-id="${CSS.escape(e)}"] .tire-rating-container`);if(!t)return;let r=i.tireRatings[e]||{average:0,count:0},n=i.userRatings[e]||0;t.outerHTML=Je(e,r.average,r.count,n)}function $e(e,t=0){let r=document.getElementById("rtg-review-modal");r&&r.remove();let n=i.userReviews[e]||{},a=t||n.rating||0,o=n.review_title||"",c=n.review_text||"",s=document.querySelector(`[data-tire-id="${CSS.escape(e)}"].tire-card`),u=s&&s.querySelector(".tire-card-brand")?.textContent||"",l=s&&s.querySelector(".tire-card-model")?.textContent||"",p=document.createElement("div");p.id="rtg-review-modal",p.className="rtg-review-modal-overlay",p.setAttribute("role","dialog"),p.setAttribute("aria-modal","true"),p.setAttribute("aria-label","Write a review");let g=document.createElement("div");g.className="rtg-review-modal";let m=document.createElement("div");m.className="rtg-review-modal-header";let f=document.createElement("h3");f.textContent=u&&l?`Review ${u} ${l}`:"Write a Review";let h=document.createElement("button");h.className="rtg-review-modal-close",h.setAttribute("aria-label","Close"),h.innerHTML="&times;",m.appendChild(f),m.appendChild(h);let x=document.createElement("div");x.className="rtg-review-modal-stars";let E=document.createElement("label");E.textContent="Your Rating";let v=document.createElement("div");v.className="rtg-review-stars-select",v.setAttribute("role","radiogroup"),v.setAttribute("aria-label","Select rating");let w=a;for(let M=1;M<=5;M++){let F=document.createElement("span");F.className="rtg-review-star"+(M<=w?" selected":""),F.dataset.value=M,F.innerHTML=_e(40),F.setAttribute("role","radio"),F.setAttribute("aria-checked",M===w?"true":"false"),F.setAttribute("aria-label",`${M} star${M!==1?"s":""}`),F.setAttribute("tabindex",M===(w||1)?"0":"-1"),v.appendChild(F)}let j=document.createElement("span");j.className="rtg-review-rating-text";let D=["","Poor","Fair","Good","Very Good","Excellent"];j.textContent=w>0?D[w]:"Select a rating",x.appendChild(E),x.appendChild(v),x.appendChild(j),v.addEventListener("click",M=>{let F=M.target.closest(".rtg-review-star");F&&(w=parseInt(F.dataset.value),v.querySelectorAll(".rtg-review-star").forEach(($,ie)=>{$.classList.toggle("selected",ie<w),$.setAttribute("aria-checked",ie+1===w?"true":"false")}),j.textContent=D[w]||"")}),v.addEventListener("mouseenter",M=>{let F=M.target.closest(".rtg-review-star");if(!F)return;let $=parseInt(F.dataset.value);v.querySelectorAll(".rtg-review-star").forEach((ie,K)=>{ie.classList.toggle("hovered",K<$)})},!0),v.addEventListener("mouseleave",()=>{v.querySelectorAll(".rtg-review-star").forEach(M=>M.classList.remove("hovered"))},!0);let G=document.createElement("div");G.className="rtg-review-field";let q=document.createElement("label");q.textContent="Review Title (optional)",q.setAttribute("for","rtg-review-title");let B=document.createElement("input");B.type="text",B.id="rtg-review-title",B.className="rtg-review-input",B.placeholder="Sum up your experience...",B.maxLength=200,B.value=o,G.appendChild(q),G.appendChild(B);let X=document.createElement("div");X.className="rtg-review-field";let le=document.createElement("label");le.textContent="Your Review (optional)",le.setAttribute("for","rtg-review-text");let R=document.createElement("textarea");R.id="rtg-review-text",R.className="rtg-review-textarea",R.placeholder="Share your experience with this tire… How does it handle, ride comfort, noise level, tread wear?",R.maxLength=5e3,R.rows=5,R.value=c;let O=document.createElement("div");O.className="rtg-review-char-count",O.textContent=`${c.length}/5000`,R.addEventListener("input",()=>{O.textContent=`${R.value.length}/5000`}),X.appendChild(le),X.appendChild(R),X.appendChild(O);let Y=document.createElement("div");Y.className="rtg-review-modal-footer";let ne=document.createElement("button");ne.className="rtg-review-btn-cancel",ne.textContent="Cancel";let H=document.createElement("button");H.className="rtg-review-btn-submit",H.textContent=c?"Update Review":"Submit Review";let V=document.createElement("div");V.className="rtg-review-error",Y.appendChild(V),Y.appendChild(ne),Y.appendChild(H),g.appendChild(m),g.appendChild(x),g.appendChild(G),g.appendChild(X),g.appendChild(Y),p.appendChild(g),document.body.appendChild(p),requestAnimationFrame(()=>p.classList.add("active")),B.focus();function Z(){p.classList.remove("active"),setTimeout(()=>p.remove(),200)}h.addEventListener("click",Z),ne.addEventListener("click",Z),p.addEventListener("click",M=>{M.target===p&&Z()}),document.addEventListener("keydown",function M(F){F.key==="Escape"&&(Z(),document.removeEventListener("keydown",M))}),H.addEventListener("click",()=>{if(w<1||w>5){V.textContent="Please select a star rating.";return}V.textContent="",H.disabled=!0,H.textContent="Submitting...";let M=R.value.trim().length>0||B.value.trim().length>0,F=!!c||!!o;Jt(e,w,B.value.trim(),R.value.trim()).then($=>{Z(),M&&$&&$.review_status==="pending"?Ke("Thanks! Your review has been submitted and is pending approval.","info"):Ke(F?"Your review has been updated.":"Your review has been saved!","success")}).catch($=>{H.disabled=!1,H.textContent=c?"Update Review":"Submit Review",V.textContent=typeof $=="string"?$:"Failed to submit. Please try again."})})}function wt(e){let t=document.getElementById("rtg-reviews-drawer");t&&t.remove();let r=document.querySelector(`[data-tire-id="${CSS.escape(e)}"].tire-card`),n=r&&r.querySelector(".tire-card-brand")?.textContent||"",a=r&&r.querySelector(".tire-card-model")?.textContent||"",o=document.createElement("div");o.id="rtg-reviews-drawer",o.className="rtg-reviews-drawer-overlay",o.setAttribute("role","dialog"),o.setAttribute("aria-modal","true"),o.setAttribute("aria-label","Reviews");let c=document.createElement("div");c.className="rtg-reviews-drawer";let s=document.createElement("div");s.className="rtg-reviews-drawer-header";let u=document.createElement("h3");u.textContent=n&&a?`Reviews for ${n} ${a}`:"Reviews";let l=i.tireRatings[e]||{average:0,count:0},p=document.createElement("div");p.className="rtg-reviews-summary",l.average>0&&(p.innerHTML=`<span class="rtg-reviews-avg">${l.average.toFixed(1)}</span> <span class="rtg-reviews-stars-mini">${xt(l.average)}</span> <span class="rtg-reviews-total">${l.count} review${l.count!==1?"s":""}</span>`);let g=document.createElement("button");g.className="rtg-reviews-drawer-close",g.setAttribute("aria-label","Close"),g.innerHTML="&times;",s.appendChild(u),s.appendChild(p),s.appendChild(g);let m=document.createElement("div");m.className="rtg-reviews-content",m.innerHTML='<div class="rtg-reviews-loading">Loading reviews...</div>',c.appendChild(s),c.appendChild(m),o.appendChild(c),document.body.appendChild(o),requestAnimationFrame(()=>o.classList.add("active"));function f(){o.classList.remove("active"),setTimeout(()=>o.remove(),200)}g.addEventListener("click",f),o.addEventListener("click",h=>{h.target===o&&f()}),document.addEventListener("keydown",function h(x){x.key==="Escape"&&(f(),document.removeEventListener("keydown",h))}),Qe(e,m,1)}function Qe(e,t,r){let n=new FormData;n.append("action","get_tire_reviews"),n.append("tire_id",e),n.append("page",r.toString()),fetch(tireRatingAjax.ajaxurl,{method:"POST",body:n}).then(a=>a.json()).then(a=>{if(!a.success||!a.data.reviews.length){let o=document.createElement("div");o.className="rtg-reviews-empty";let c=document.createElement("div");c.className="rtg-reviews-empty-icon",c.textContent="✍️";let s=document.createElement("div");s.className="rtg-reviews-empty-heading",s.textContent="No reviews yet";let u=document.createElement("div");if(u.textContent="Be the first to share your experience with this tire!",o.appendChild(c),o.appendChild(s),o.appendChild(u),i.isLoggedIn){let l=document.createElement("button");l.className="rtg-reviews-empty-cta",l.textContent="Write a Review",l.addEventListener("click",()=>{let p=t.closest(".rtg-reviews-drawer-overlay");p&&(p.classList.remove("active"),setTimeout(()=>p.remove(),200)),$e(e,i.userRatings[e]||0)}),o.appendChild(l)}t.innerHTML="",t.appendChild(o);return}if(t.innerHTML="",a.data.reviews.forEach(o=>{t.appendChild(er(o))}),a.data.total_pages>1){let o=document.createElement("div");if(o.className="rtg-reviews-pagination",r>1){let s=document.createElement("button");s.className="rtg-reviews-page-btn",s.textContent="Previous",s.addEventListener("click",()=>Qe(e,t,r-1)),o.appendChild(s)}let c=document.createElement("span");if(c.className="rtg-reviews-page-info",c.textContent=`Page ${r} of ${a.data.total_pages}`,o.appendChild(c),r<a.data.total_pages){let s=document.createElement("button");s.className="rtg-reviews-page-btn",s.textContent="Next",s.addEventListener("click",()=>Qe(e,t,r+1)),o.appendChild(s)}t.appendChild(o)}}).catch(()=>{t.innerHTML='<div class="rtg-reviews-empty">Failed to load reviews. Please try again.</div>'})}function er(e){let t=document.createElement("div");t.className="rtg-review-card";let r=document.createElement("div");r.className="rtg-review-card-header";let n=typeof rtgData<"u"&&rtgData.settings&&rtgData.settings.userReviewsUrl?rtgData.settings.userReviewsUrl:"",a;e.user_id&&n?(a=document.createElement("a"),a.href=n+"?reviewer="+encodeURIComponent(e.user_id),a.className="rtg-review-author rtg-review-author-link",a.textContent=e.display_name||"Anonymous"):(a=document.createElement("span"),a.className="rtg-review-author",a.textContent=e.display_name||"Anonymous");let o=document.createElement("span");o.className="rtg-review-card-stars",o.innerHTML=xt(e.rating);let c=document.createElement("span");if(c.className="rtg-review-date",c.textContent=tr(e.updated_at||e.created_at),r.appendChild(a),r.appendChild(o),r.appendChild(c),t.appendChild(r),e.review_title){let s=document.createElement("div");s.className="rtg-review-card-title",s.textContent=e.review_title,t.appendChild(s)}if(e.review_text){let s=document.createElement("div");s.className="rtg-review-card-body",s.textContent=e.review_text,t.appendChild(s)}else{let s=document.createElement("div");s.className="rtg-review-card-body rtg-review-rating-only",s.textContent="Star rating only — no written review.",t.appendChild(s)}return t}function xt(e){let t=Math.round(e*2)/2,r="";for(let n=1;n<=5;n++){let a="rtg-mini-star";t>=n?a+=" filled":t>=n-.5&&(a+=" half-filled"),r+=`<span class="${a}">${_e(18)}</span>`}return r}function tr(e){let t=e&&!e.includes("T")&&!e.includes("Z")?e.replace(" ","T")+"Z":e,r=new Date(t),n=typeof tireRatingAjax<"u"&&tireRatingAjax.timezone||void 0,a=n?{timeZone:n}:{},o=new Intl.DateTimeFormat("en-CA",{...a,year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date),c=new Intl.DateTimeFormat("en-CA",{...a,year:"numeric",month:"2-digit",day:"2-digit"}).format(r),s=new Date(o+"T00:00:00"),u=new Date(c+"T00:00:00"),l=Math.round((s-u)/(1e3*60*60*24));if(l<=0)return"Today";if(l===1)return"Yesterday";if(l<30)return`${l} days ago`;if(l<365){let p=Math.floor(l/30);return`${p} month${p!==1?"s":""} ago`}return r.toLocaleDateString("en-US",{...a,month:"short",day:"numeric",year:"numeric"})}function Ke(e,t="success",r=4e3){let n=document.querySelector(".rtg-toast-container");n||(n=document.createElement("div"),n.className="rtg-toast-container",document.body.appendChild(n));let a=document.createElement("div");a.className=`rtg-toast rtg-toast-${t}`;let o=document.createElement("span");o.className="rtg-toast-icon",o.textContent=t==="success"?"✔":"ℹ";let c=document.createElement("span");c.textContent=e,a.appendChild(o),a.appendChild(c),n.appendChild(a),requestAnimationFrame(()=>{requestAnimationFrame(()=>a.classList.add("visible"))}),setTimeout(()=>{a.classList.remove("visible"),setTimeout(()=>a.remove(),300)},r)}var Se=U(()=>{J();W();ce()});function bt(){if(!i.isLoggedIn||typeof tireRatingAjax>"u")return Promise.resolve();let e=new FormData;return e.append("action","rtg_get_favorites"),e.append("nonce",tireRatingAjax.nonce),fetch(tireRatingAjax.ajaxurl,{method:"POST",body:e}).then(t=>t.json()).then(t=>{t.success&&Array.isArray(t.data.favorites)&&(i.userFavorites=new Set(t.data.favorites),rr(),ze())}).catch(t=>{})}function Ct(e){if(!i.isLoggedIn){typeof tireRatingAjax<"u"&&tireRatingAjax.login_url&&(window.location.href=tireRatingAjax.login_url);return}if(!T.tireId.test(e))return;let t=i.userFavorites.has(e),r=t?"rtg_remove_favorite":"rtg_add_favorite";t?i.userFavorites.delete(e):i.userFavorites.add(e),Be(e),ze();let n=new FormData;n.append("action",r),n.append("tire_id",e),n.append("nonce",tireRatingAjax.nonce),fetch(tireRatingAjax.ajaxurl,{method:"POST",body:n}).then(a=>a.json()).then(a=>{a.success||(t?i.userFavorites.add(e):i.userFavorites.delete(e),Be(e),ze())}).catch(()=>{t?i.userFavorites.add(e):i.userFavorites.delete(e),Be(e),ze()})}function Be(e){document.querySelectorAll(`.tire-card-fav-btn[data-tire-id="${CSS.escape(e)}"]`).forEach(r=>{let n=i.userFavorites.has(e);r.classList.toggle("is-favorite",n),r.setAttribute("aria-label",n?"Remove from favorites":"Add to favorites"),r.innerHTML=n?L("heart",16):L("heart-outline",16)})}function rr(){document.querySelectorAll(".tire-card-fav-btn").forEach(e=>{let t=e.dataset.tireId;t&&Be(t)})}function ze(){let e=document.getElementById("favoritesCount");e&&(e.textContent=i.userFavorites.size>0?i.userFavorites.size:"",e.style.display=i.userFavorites.size>0?"inline-flex":"none")}var Xe=U(()=>{J();W();ce()});function je(){let e=d("compareBar"),t=d("compareCount");if(!e||!t)return;let r=Math.max(0,Math.min(4,i.compareList.length));t.textContent=`${r} of 4 tires selected`,e.style.display=r>=2?"flex":"none"}function Et(){if(!i.compareList.length)return;let e=i.compareList.filter(t=>Number.isInteger(t)&&t>=0&&t<i.allRows.length).slice(0,4);if(e.length)try{let t=typeof rtgData<"u"&&rtgData.settings&&rtgData.settings.compareUrl?rtgData.settings.compareUrl:"/tire-compare/",r=new URL(t,location.origin);r.searchParams.set("compare",e.join(",")),window.open(r.toString(),"_blank","noopener,noreferrer")}catch{}}function St(){i.compareList=[],document.querySelectorAll(".compare-checkbox").forEach(e=>{e.checked=!1,e.disabled=!1}),je()}function Rt(){document.querySelectorAll(".compare-checkbox:not([data-listener-attached])").forEach(t=>{t.dataset.listenerAttached="true",t.addEventListener("change",()=>{let r=parseInt(t.dataset.index);if(!(!Number.isInteger(r)||r<0)){if(t.checked){if(i.compareList.length>=4){t.checked=!1;return}i.compareList.includes(r)||i.compareList.push(r)}else i.compareList=i.compareList.filter(n=>n!==r);je(),document.querySelectorAll(".compare-checkbox").forEach(n=>{n.checked||(n.disabled=i.compareList.length>=4)})}})})}var et=U(()=>{J();W()});function Lt(e,t){let r=he(e);if(!r)return;let n=d("imageModal"),a=d("modalImage");if(!n||!a)return;a.src=r,a.alt=z(y(t,200)),a.onerror=()=>{let s=he("https://riviantrackr.com/assets/tire-guide/images/image404.jpg");s&&(a.src=s,a.alt="Image not available")},n.style.display="flex",document.body.style.overflow="hidden";let o=c=>{c.key==="Escape"&&(n.style.display="none",document.body.style.overflow="",document.removeEventListener("keydown",o))};document.addEventListener("keydown",o),n.onclick=c=>{c.target===n&&(n.style.display="none",document.body.style.overflow="",document.removeEventListener("keydown",o))}}var kt=U(()=>{W();ce()});var Tt={};mt(Tt,{createSingleCard:()=>It,observeCardImages:()=>At,preloadNextPageImages:()=>Ve,renderCards:()=>Re});function nr(){ve||!("IntersectionObserver"in window)||(ve=new IntersectionObserver(e=>{e.forEach(t=>{if(t.isIntersecting){let r=t.target,n=r.dataset.src;n&&(r.src=n,r.removeAttribute("data-src"),r.addEventListener("load",()=>{r.classList.add("rtg-img-loaded")},{once:!0})),ve.unobserve(r)}})},{rootMargin:"200px 0px",threshold:0}))}function At(e){if(ve||nr(),!ve)return;e.querySelectorAll("img[data-src]").forEach(r=>ve.observe(r))}function ar(){let e=document.getElementById("rtg-skeleton-loader");e&&e.remove()}function Re(e){ar(),i.cardContainer||(i.cardContainer=d("tireCards")),typeof tireRatingAjax<"u"&&(i.isLoggedIn=tireRatingAjax.is_logged_in===!0||tireRatingAjax.is_logged_in==="1"||tireRatingAjax.is_logged_in===1);let t=window.matchMedia("(prefers-reduced-motion: reduce)").matches,r=window.innerWidth<=768||/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),n=t?0:r?200:300,a=t?0:r?100:150,o=new Set(e.map(f=>f[0]).filter(f=>T.tireId.test(f))),c=Array.from(i.cardContainer.children),s=new Set,u=[];c.forEach(f=>{let h=f.dataset.tireId;if(o.has(h)){s.add(h);let x=e.find(E=>E[0]===h);if(x){let E=f.querySelector(".compare-checkbox");E&&(E.dataset.index=i.allRows.indexOf(x))}}else u.push(f)}),u.forEach(f=>{t?f.parentNode&&f.parentNode.removeChild(f):(f.style.transition=`opacity ${n}ms ease, transform ${n}ms ease`,f.style.opacity="0",f.style.transform=r?"translateY(-4px) scale(0.98)":"translateY(-8px) scale(0.97)",setTimeout(()=>{f.parentNode&&f.parentNode.removeChild(f)},a))});let l=[];e.forEach(f=>{let h=f[0];if(T.tireId.test(h)&&!s.has(h)){let x=It(f);x&&(t||(x.style.opacity="0",x.style.transform=r?"translateY(8px) scale(0.98)":"translateY(12px) scale(0.97)"),l.push(x))}});let p=document.createDocumentFragment();l.forEach(f=>p.appendChild(f)),i.cardContainer.appendChild(p),!t&&l.length>0?requestAnimationFrame(()=>{l.forEach((f,h)=>{let x=r?h*50:h*40;setTimeout(()=>{f.style.transition=`opacity ${n}ms cubic-bezier(0.16, 1, 0.3, 1), transform ${n}ms cubic-bezier(0.16, 1, 0.3, 1)`,f.style.opacity="1",f.style.transform="translateY(0) scale(1)"},x)})}):t&&l.forEach(f=>{f.style.opacity="1",f.style.transform="translateY(0) scale(1)"});let g=Array.from(i.cardContainer.children);e.some((f,h)=>{let x=f[0],E=g[h];return!E||E.dataset.tireId!==x})&&e.forEach((f,h)=>{let x=f[0];if(!T.tireId.test(x))return;let E=i.cardContainer.querySelector(`[data-tire-id="${CSS.escape(x)}"]`);if(E&&Array.from(i.cardContainer.children).indexOf(E)!==h){let w=i.cardContainer.children[h];w&&w!==E?i.cardContainer.insertBefore(E,w):w||i.cardContainer.appendChild(E)}}),Rt(),i.cardContainer&&At(i.cardContainer)}function It(e){let[t,r,n,a,o,c,s,u,l,p,g,m,f,h,x,E,v,w,j,D,G,q,B]=e;if(!T.tireId.test(t))return null;let X=`card_${t}_${Date.now()%1e4}`,le=i.tireRatings[t]||{average:0,count:0},R=i.userRatings[t]||0,O=Je(t,le.average,le.count,R),Y=ft(j),ne=he(D),H=gt(B),V=document.createElement("div");if(V.className="tire-card",V.dataset.tireId=t,y(w).toLowerCase().includes("reviewed")){let S=document.createElement("div");S.className="tire-card-badge";let A=document.createElement("div");A.className="tire-card-badge-inner";let N=document.createElement("span");N.innerHTML=L("circle-check",14),N.style.display="inline-flex",A.appendChild(N),A.appendChild(document.createTextNode("Reviewed")),S.appendChild(A),V.appendChild(S)}let Z=document.createElement("label");Z.className="tire-card-compare-overlay",Z.setAttribute("aria-label",`Compare ${z(y(a))} ${z(y(o))}`);let M=document.createElement("input");M.type="checkbox",M.className="compare-checkbox",M.dataset.id=t,M.dataset.index=i.allRows.indexOf(e).toString();let F=document.createElement("span");F.className="compare-overlay-icon",Z.appendChild(M),Z.appendChild(F);let $=document.createElement("button");$.className="tire-card-fav-btn",$.dataset.tireId=t;let ie=i.userFavorites.has(t);$.classList.toggle("is-favorite",ie),$.setAttribute("aria-label",ie?"Remove from favorites":"Add to favorites"),$.innerHTML=ie?L("heart",16):L("heart-outline",16),$.addEventListener("click",S=>{S.stopPropagation(),Ct(t)});let K=document.createElement("button");if(K.className="tire-card-share-btn",K.setAttribute("aria-label",`Share ${z(y(a))} ${z(y(o))}`),K.innerHTML=L("share",16),K.addEventListener("click",S=>{S.stopPropagation();let A=new URL(window.location.href);A.search="",A.searchParams.set("tire",t);let N=A.toString(),re=`${y(a)} ${y(o)}`;function Q(){K.innerHTML=L("check",16),K.classList.add("copied"),setTimeout(()=>{K.innerHTML=L("share",16),K.classList.remove("copied")},2e3)}navigator.share?navigator.share({title:re,url:N}).catch(()=>{}):navigator.clipboard&&navigator.clipboard.writeText(N).then(Q)}),ne){let S=document.createElement("div");S.className="tire-card-image";let A=document.createElement("img");A.alt=`${z(y(a))} ${z(y(o))}`,A.loading="lazy",A.fetchpriority="low",A.className="rtg-lazy-img","IntersectionObserver"in window?A.dataset.src=ne:A.src=ne,A.onclick=()=>Lt(ne,`${z(y(a))} ${z(y(o))}`),S.appendChild(A),S.appendChild(Z),S.appendChild($),S.appendChild(K),V.appendChild(S)}else V.appendChild(Z),V.appendChild($),V.appendChild(K);let de=document.createElement("div");de.className="tire-card-body";let He=document.createElement("div");He.className="tire-card-brand",He.textContent=y(a),de.appendChild(He);let Ue=document.createElement("div");Ue.className="tire-card-model",Ue.textContent=y(o),de.appendChild(Ue);let pt=document.createElement("div");pt.innerHTML=O,de.appendChild(pt);let be=document.createElement("div");if(be.className="tire-card-tags",q){let S=y(q).trim().toUpperCase();if(["A","B","C","D","F"].includes(S)){let A={A:"#5ec095",B:"#a3e635",C:"#facc15",D:"#f97316",F:"#b91c1c"}[S],N=document.createElement("span");N.className="tire-card-eff";let re=document.createElement("span");re.className="tire-card-eff-grade",re.style.backgroundColor=A,re.textContent=S;let Q=document.createElement("span");Q.className="tire-card-eff-score";let me=document.createElement("span");me.textContent=`Efficiency (${z(y(G))}/100)`;let ee=document.createElement("button");ee.innerHTML=""+L("circle-info",12),ee.className="info-tooltip-trigger",ee.dataset.tooltipKey="Efficiency Score",ee.style.cssText=`
        background: none;
        border: none;
        color: var(--rtg-text-muted);
        font-size: 12px;
        cursor: pointer;
        padding: 1px;
        border-radius: 50%;
        width: 16px;
        height: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
      `,ee.addEventListener("mouseenter",()=>{ee.style.color=C("accent"),ee.style.backgroundColor=`color-mix(in srgb, ${C("accent")} 10%, transparent)`}),ee.addEventListener("mouseleave",()=>{ee.style.color=C("text-muted"),ee.style.backgroundColor="transparent"}),Q.appendChild(me),Q.appendChild(ee),N.appendChild(re),N.appendChild(Q),be.appendChild(N)}}w&&y(w).trim()&&y(w).split(/[,|]/).map(A=>A.trim()).filter(A=>A&&A.toLowerCase()!=="reviewed").forEach(A=>{let N=document.createElement("span");N.className="tire-card-tag",N.textContent=y(A,30),be.appendChild(N)}),be.children.length>0&&de.appendChild(be);let We=document.createElement("div");We.className="tire-card-specs",[["Size",`${y(r)} (${y(n)}${y(n)&&!y(n).includes('"')?'"':""})`],["Category",y(c)],["Average Price",s?`$${b(s,k.price)}`:"-"],["Mileage Warranty",u?`${Number(b(u,k.warranty)).toLocaleString()} miles`:"-"],["Weight",l?`${b(l,k.weight)} lb`:"-"],["3PMS Rated",y(p)],["Tread Depth",y(g)],["Load Index",y(m)],["Max Load",f?`${b(f,{min:0,max:1e4})} lb`:"-"],["Load Range",y(h)],["Speed Rating",y(x)],["Max PSI",y(E)],["UTQG",y(v)||"None"]].forEach(([S,A])=>{let N=document.createElement("div");N.className="tire-card-spec";let re=Ye.hasOwnProperty(S),Q;re?Q=vt(S,S):(Q=document.createElement("span"),Q.className="tire-card-spec-label",Q.textContent=S);let me=document.createElement("span");me.className="tire-card-spec-value",me.textContent=A||"-",N.appendChild(Q),N.appendChild(me),We.appendChild(N)}),de.appendChild(We),V.appendChild(de);let Ce=document.createElement("div");if(Ce.className="tire-card-actions",Y){let S=document.createElement("a");S.href=Y,S.target="_blank",S.rel="noopener noreferrer",S.className="tire-card-cta tire-card-cta-primary",S.innerHTML="View Tire&nbsp;"+L("arrow-up-right",14),Ce.appendChild(S)}else{let S=document.createElement("span");S.className="tire-card-cta tire-card-cta-disabled",S.textContent="Coming Soon",Ce.appendChild(S)}if(H){let S=document.createElement("a");S.href=H,S.target="_blank",S.rel="noopener noreferrer",S.className="tire-card-cta tire-card-cta-review";let A=H.includes("youtube.com")||H.includes("youtu.be")||H.includes("tiktok.com"),N=A?"circle-play":"newspaper",re=A?"Watch Official Review":"Read Official Review";S.innerHTML=`${re}&nbsp;${L(N,14)}`,Ce.appendChild(S)}if(V.appendChild(Ce),i.cardCache.size>100){let S=i.cardCache.keys().next().value;i.cardCache.delete(S)}return i.cardCache.set(X,V.cloneNode(!0)),V}function Ve(){let e=Math.ceil(i.filteredRows.length/te);if(i.currentPage>=e)return;let t=i.currentPage*te;i.filteredRows.slice(t,t+te).forEach(n=>{let a=n[19],o=he(a);if(o){let c=new Image;c.src=o}})}var ve,Le=U(()=>{J();W();ce();Ze();Se();Xe();et();kt();ve=null});function we(){return i.serverSideMode&&typeof rtgData<"u"&&rtgData.settings&&rtgData.settings.ajaxurl}function ke(e){i.serverSideFetchController&&i.serverSideFetchController.abort(),i.serverSideFetchController=new AbortController;let t=document.querySelector("#searchInput"),r=new FormData;r.append("action","rtg_get_tires"),r.append("nonce",rtgData.settings.tireNonce),r.append("page",e||i.currentPage),r.append("search",t?t.value:""),r.append("size",d("filterSize")?.value||""),r.append("brand",d("filterBrand")?.value||""),r.append("category",d("filterCategory")?.value||""),r.append("three_pms",d("filter3pms")?.checked?"1":""),r.append("ev_rated",d("filterEVRated")?.checked?"1":""),r.append("studded",d("filterStudded")?.checked?"1":""),r.append("price_max",d("priceMax")?.value||"600"),r.append("weight_max",d("weightMax")?.value||"70");let n=d("warrantyMax"),a=n?parseInt(n.value):8e4;r.append("warranty_min",a<8e4?(8e4-a).toString():"0");let c=d("sortBy")?.value||"efficiency_score",s={efficiencyGrade:"efficiency_score"};r.append("sort",s[c]||c);let u=d("tireCount");return u&&(u.textContent="Loading..."),fetch(rtgData.settings.ajaxurl,{method:"POST",body:r,signal:i.serverSideFetchController.signal}).then(l=>l.json()).then(l=>{if(!l.success)return;let p=(l.data.rows||[]).map(Ne).filter(j=>j&&j.length&&j[0]);i.filteredRows=p,i.serverSideTotal=l.data.total||0,i.currentPage=l.data.page||1,u&&(u.textContent=`Showing ${i.serverSideTotal} tire${i.serverSideTotal===1?"":"s"}`),Re(i.filteredRows),ir(i.serverSideTotal,l.data.per_page||te,i.currentPage),Ae();let g=d("noResults"),m=d("tireCards");i.filteredRows.length===0?(nt(),g&&(g.style.display="block"),m&&(m.style.display="none")):(g&&(g.style.display="none"),m&&(m.style.display="grid"));let f=t?t.value:"",h={};f&&(h.search=f);let x=d("filterSize")?.value||"",E=d("filterBrand")?.value||"",v=d("filterCategory")?.value||"";x&&(h.size=x),E&&(h.brand=E),v&&(h.category=v),d("filter3pms")?.checked&&(h.three_pms=!0),d("filterEVRated")?.checked&&(h.ev_rated=!0),d("filterStudded")?.checked&&(h.studded=!0),(f||Object.keys(h).length>0)&&ue.trackSearch(f,h,c,i.serverSideTotal);let w=i.filteredRows.map(j=>j[0]).filter(Boolean);Ee(w)}).catch(l=>{l.name})}function ir(e,t,r){let n=d("paginationControls");if(!n)return;n.innerHTML="";let a=Math.ceil(e/t);if(a<=1)return;let o=document.createElement("button");o.textContent="Previous",o.disabled=r<=1,fe(o),o.onclick=()=>{i.currentPage=r-1,ke(i.currentPage),Mt()},n.appendChild(o);let c=document.createElement("span");c.textContent=`Page ${r} of ${a}`,c.style.cssText=`color: ${C("text-primary")}; font-weight: 500; display: flex; align-items: center;`,n.appendChild(c);let s=document.createElement("button");s.textContent="Next",s.disabled=r>=a,fe(s),s.onclick=()=>{i.currentPage=r+1,ke(i.currentPage),Mt()},n.appendChild(s)}function Mt(){let e=d("filterTop");e&&e.scrollIntoView({behavior:"smooth"})}function _t(){let e=new FormData;return e.append("action","rtg_get_filter_options"),e.append("nonce",rtgData.settings.tireNonce),fetch(rtgData.settings.ajaxurl,{method:"POST",body:e}).then(t=>t.json()).then(t=>{if(!t.success)return;let r=t.data;i.VALID_SIZES=r.sizes||[],i.VALID_BRANDS=r.brands||[],i.VALID_CATEGORIES=r.categories||[];let n=d("filterSize");if(n){n.innerHTML="";let a=document.createElement("option");a.value="",a.textContent="All Sizes",n.appendChild(a);let o={};i.VALID_SIZES.forEach(c=>{let s=c.match(/R(\d{2})/i),u=s?s[1]:"Other";o[u]||(o[u]=[]),o[u].push(c)}),Object.keys(o).sort((c,s)=>c==="Other"?1:s==="Other"?-1:parseInt(c)-parseInt(s)).forEach(c=>{let s=document.createElement("optgroup");s.label=`${c}" Wheels`,o[c].sort().forEach(u=>{let l=document.createElement("option");l.value=u,l.textContent=u,s.appendChild(l)}),n.appendChild(s)})}ye("filterBrand",i.VALID_BRANDS),ye("filterCategory",i.VALID_CATEGORIES),Ie()}).catch(t=>{})}function pe(){i.currentPage=1,i.lastFilterState=null,ke(1),rt()}var tt=U(()=>{J();W();ce();Fe();Le();Se();Te()});function Ft(){I.sizeIndex.clear(),I.brandIndex.clear(),I.categoryIndex.clear(),I.priceIndex.length=0,I.warrantyIndex.length=0,I.weightIndex.length=0,i.allRows.forEach((e,t)=>{let[r,n,a,o,c,s,u,l,p]=e,g=y(n).toLowerCase();g&&(I.sizeIndex.has(g)||I.sizeIndex.set(g,[]),I.sizeIndex.get(g).push(t));let m=y(o).toLowerCase();m&&(I.brandIndex.has(m)||I.brandIndex.set(m,[]),I.brandIndex.get(m).push(t));let f=y(s).toLowerCase();f&&(I.categoryIndex.has(f)||I.categoryIndex.set(f,[]),I.categoryIndex.get(f).push(t));let h=b(u,k.price),x=b(l,k.warranty),E=b(p,k.weight);I.priceIndex.push({index:t,value:h}),I.warrantyIndex.push({index:t,value:x}),I.weightIndex.push({index:t,value:E})}),I.priceIndex.sort((e,t)=>e.value-t.value),I.warrantyIndex.sort((e,t)=>e.value-t.value),I.weightIndex.sort((e,t)=>e.value-t.value)}function at(e,t){let r=0,n=e.length-1;for(;r<=n;){let a=Math.floor((r+n)/2);e[a].value<=t?r=a+1:n=a-1}return new Set(e.slice(0,n+1).map(a=>a.index))}function or(e){let t=new Set(i.allRows.map((r,n)=>n));if(e.Size){let r=new Set(I.sizeIndex.get(e.Size.toLowerCase())||[]);t=new Set([...t].filter(n=>r.has(n)))}if(e.Brand){let r=new Set(I.brandIndex.get(e.Brand.toLowerCase())||[]);t=new Set([...t].filter(n=>r.has(n)))}if(e.Category){let r=new Set(I.categoryIndex.get(e.Category.toLowerCase())||[]);t=new Set([...t].filter(n=>r.has(n)))}if(e.PriceMax<600){let r=at(I.priceIndex,e.PriceMax);t=new Set([...t].filter(n=>r.has(n)))}if(e.WarrantyMax<8e4){let r=at(I.warrantyIndex,e.WarrantyMax);t=new Set([...t].filter(n=>r.has(n)))}if(e.WeightMax<70){let r=at(I.weightIndex,e.WeightMax);t=new Set([...t].filter(n=>r.has(n)))}return[...t].map(r=>i.allRows[r]).filter(r=>{if(e.search){let n=y(r[3]),a=y(r[4]),o=`${n} ${a}`,c=Oe(n,e.search),s=Oe(a,e.search),u=Oe(o,e.search);if(!c&&!s&&!u)return!1}return!(e["3PMS"]&&!y(r[9]).toLowerCase().includes("yes")||e.EVRated&&!y(r[17]).toLowerCase().includes("ev rated")||e.Studded&&!y(r[17]).toLowerCase().includes("studded available")||e.Reviewed&&!y(r[23])||e.Favorites&&!i.userFavorites.has(r[0]))})}function Pt(){if(i.isRendering){i.pendingRender=!0;return}i.renderAnimationFrame&&cancelAnimationFrame(i.renderAnimationFrame),i.renderAnimationFrame=requestAnimationFrame(()=>{i.isRendering=!0,it(),setTimeout(()=>{i.isRendering=!1,i.renderAnimationFrame=null,i.pendingRender&&(i.pendingRender=!1,Pt())},16)})}function sr(e){let t=(i.currentPage-1)*te;return e.slice(t,t+te)}function it(){let e=sr(i.filteredRows),t=e.map(r=>r[0]).filter(Boolean);Ee(t).then(()=>{Re(e),cr(i.filteredRows);let r=d("noResults"),n=d("tireCards");i.filteredRows.length===0?(nt(),r.style.display="block",n.style.display="none"):(r.style.display="none",n.style.display="grid"),"requestIdleCallback"in window?requestIdleCallback(()=>Ve()):setTimeout(Ve,100)})}function cr(e){let t=d("paginationControls");t.innerHTML="";let r=Math.ceil(e.length/te);if(r<=1)return;let n=document.createElement("button");n.textContent="Previous",n.disabled=i.currentPage===1,fe(n),n.onclick=()=>{i.currentPage--,it(),Ae();let c=d("filterTop");c&&c.scrollIntoView({behavior:"smooth"})},t.appendChild(n);let a=document.createElement("span");a.textContent=`Page ${i.currentPage} of ${r}`,a.style.cssText=`color: ${C("text-primary")}; font-weight: 500; display: flex; align-items: center;`,t.appendChild(a);let o=document.createElement("button");o.textContent="Next",o.disabled=i.currentPage===r,fe(o),o.onclick=()=>{i.currentPage++,it(),Ae();let c=d("filterTop");c&&c.scrollIntoView({behavior:"smooth"})},t.appendChild(o)}function P(){let e=document.querySelector("#searchInput"),t=d("priceMax"),r=d("warrantyMax"),n=d("weightMax"),a=d("filter3pms"),o=d("filterEVRated"),c=d("filterStudded"),s=d("filterReviewed"),u=d("filterFavorites"),l=d("filterSize"),p=d("filterBrand"),g=d("filterCategory"),m=d("sortBy"),f=e?ge(e.value,T.search):"",h=t?b(t.value,k.price,600):600,x=r?b(r.value,k.warranty,8e4):8e4,E=n?b(n.value,k.weight,70):70,v={search:f.toLowerCase(),PriceMax:h,WarrantyMax:x,WeightMax:E,"3PMS":a?.checked||!1,EVRated:o?.checked||!1,Studded:c?.checked||!1,Reviewed:s?.checked||!1,Favorites:u?.checked||!1,Size:l?.value&&i.VALID_SIZES.includes(l.value)?l.value:"",Brand:p?.value&&i.VALID_BRANDS.includes(p.value)?p.value:"",Category:g?.value&&i.VALID_CATEGORIES.includes(g.value)?g.value:""},w=m?.value&&De.includes(m.value)?m.value:"",j=JSON.stringify({...v,sortOption:w,currentPage:i.currentPage});if(i.lastFilterState===j)return;i.lastFilterState=j,i.filteredRows=or(v);let D={};if(v.search&&(D.search=v.search),v.Size&&(D.size=v.Size),v.Brand&&(D.brand=v.Brand),v.Category&&(D.category=v.Category),v["3PMS"]&&(D.three_pms=!0),v.EVRated&&(D.ev_rated=!0),v.Studded&&(D.studded=!0),v.PriceMax<600&&(D.price_max=v.PriceMax),v.WarrantyMax<8e4&&(D.warranty_max=v.WarrantyMax),v.WeightMax<70&&(D.weight_max=v.WeightMax),(v.search||Object.keys(D).length>0)&&ue.trackSearch(v.search||"",D,w,i.filteredRows.length),w==="rating-desc"||w==="most-reviewed"){let G=i.filteredRows.map(q=>q[0]).filter(Boolean);Ee(G).then(()=>{Dt(w),Nt()})}else Dt(w),Nt()}function Dt(e){if(!e||e==="efficiencyGrade"){i.filteredRows.sort((t,r)=>{let n=b(t[20],{min:0,max:100},0);return b(r[20],{min:0,max:100},0)-n});return}switch(e){case"reviewed":i.filteredRows.sort((t,r)=>{let n=y(t[17]).toLowerCase().includes("reviewed");return y(r[17]).toLowerCase().includes("reviewed")-n});break;case"rating-desc":i.filteredRows.sort((t,r)=>{let n=b(i.tireRatings[t[0]]?.average,{min:0,max:5},0),o=b(i.tireRatings[r[0]]?.average,{min:0,max:5},0)-n;if(Math.abs(o)<.01){let c=b(i.tireRatings[t[0]]?.count,{min:0,max:1e4},0),u=b(i.tireRatings[r[0]]?.count,{min:0,max:1e4},0)-c;return Math.abs(u)<.01?y(t[0]).localeCompare(y(r[0])):u}return o});break;case"most-reviewed":i.filteredRows.sort((t,r)=>{let n=b(i.tireRatings[t[0]]?.count,{min:0,max:1e4},0),o=b(i.tireRatings[r[0]]?.count,{min:0,max:1e4},0)-n;if(Math.abs(o)<.01){let c=b(i.tireRatings[t[0]]?.average,{min:0,max:5},0),u=b(i.tireRatings[r[0]]?.average,{min:0,max:5},0)-c;return Math.abs(u)<.01?y(t[0]).localeCompare(y(r[0])):u}return o});break;case"price-asc":i.filteredRows.sort((t,r)=>b(t[6],k.price,0)-b(r[6],k.price,0));break;case"price-desc":i.filteredRows.sort((t,r)=>b(r[6],k.price,0)-b(t[6],k.price,0));break;case"warranty-desc":i.filteredRows.sort((t,r)=>b(r[7],k.warranty,0)-b(t[7],k.warranty,0));break;case"weight-asc":i.filteredRows.sort((t,r)=>b(t[8],k.weight,0)-b(r[8],k.weight,0));break;case"newest":i.filteredRows.sort((t,r)=>y(r[23]).localeCompare(y(t[23])));break}}function Nt(){let e=d("tireCount");if(e&&(e.textContent=`Showing ${i.filteredRows.length} tire${i.filteredRows.length===1?"":"s"}`),i.initialRenderDone)i.currentPage=1;else{let t=Math.max(1,Math.ceil(i.filteredRows.length/te));i.currentPage>t&&(i.currentPage=t),i.initialRenderDone=!0}Pt(),Ae(),rt()}function ye(e,t){let r=d(e);if(!r)return;[...new Set(t.map(a=>y(a).trim()))].filter(a=>a&&a.length<=100).sort((a,o)=>a.localeCompare(o)).slice(0,200).forEach(a=>{let o=document.createElement("option");o.value=a,o.textContent=a,r.appendChild(o)})}function $t(e,t){let r=d(e);if(!r)return;let n=[...new Set(t.map(s=>y(s[1])).filter(s=>s))],a={};n.forEach(s=>{let u=s.match(/R(\d{2})/i),l=u?u[1]:"Other";a[l]||(a[l]=[]),a[l].push(s)});let o=Object.keys(a).sort((s,u)=>s==="Other"?1:u==="Other"?-1:parseInt(s)-parseInt(u));r.innerHTML="";let c=document.createElement("option");c.value="",c.textContent="All Sizes",r.appendChild(c),o.forEach(s=>{let u=document.createElement("optgroup");u.label=`${s}" Wheels`,a[s].sort().forEach(l=>{let p=document.createElement("option");p.value=l,p.textContent=l,u.appendChild(p)}),r.appendChild(u)})}function Bt(){[{id:"priceMax",label:"priceVal",format:t=>`$${t}`,bounds:k.price},{id:"warrantyMax",label:"warrantyVal",format:t=>`${Number(t).toLocaleString()} miles`,bounds:k.warranty},{id:"weightMax",label:"weightVal",format:t=>`${t} lb`,bounds:k.weight}].forEach(({id:t,label:r,format:n,bounds:a})=>{let o=d(t),c=d(r);if(o&&c){o.addEventListener("input",()=>{let u=b(o.value,a,a.max);o.value=u,c.textContent=n(u),se(o)}),o.addEventListener("input",oe(P,400));let s=b(o.value,a,a.max);c.textContent=n(s),se(o)}})}function ot(){[{id:"searchInput",value:""},{id:"filterSize",value:""},{id:"filterBrand",value:""},{id:"filterCategory",value:""},{id:"priceMax",value:600},{id:"warrantyMax",value:8e4},{id:"weightMax",value:70},{id:"sortBy",value:"rating-desc"}].forEach(({id:n,value:a})=>{let o=d(n);o&&(o.value=a)}),["filter3pms","filterEVRated","filterStudded","filterReviewed","filterFavorites"].forEach(n=>{let a=d(n);a&&(a.checked=!1)}),[{id:"priceVal",text:"$600"},{id:"warrantyVal",text:"80,000 miles"},{id:"weightVal",text:"70 lb"}].forEach(({id:n,text:a})=>{let o=d(n);o&&(o.textContent=a)}),["priceMax","warrantyMax","weightMax"].forEach(n=>{let a=d(n);a&&se(a)}),ae(),delete i.domCache.searchInput,i.lastFilterState=null,document.dispatchEvent(new CustomEvent("filtersReset")),we()?pe():P(),history.replaceState(null,"",location.pathname)}function rt(){let e=d("activeFilters");if(!e)return;let t=[],r=d("searchInput")?.value?.trim();r&&t.push({label:"Search",value:r,clear:()=>{let m=d("searchInput");m&&(m.value=""),delete i.domCache.searchInput}});let n=d("filterSize");n?.value&&t.push({label:"Size",value:n.value,clear:()=>{n.value=""}});let a=d("filterBrand");a?.value&&t.push({label:"Brand",value:a.value,clear:()=>{a.value=""}});let o=d("filterCategory");o?.value&&t.push({label:"Category",value:o.value,clear:()=>{o.value=""}});let c=d("priceMax"),s=c?parseInt(c.value):600;s<600&&t.push({label:"Price",value:"≤ $"+s,clear:()=>{c.value=600;let m=d("priceVal");m&&(m.textContent="$600"),se(c)}});let u=d("warrantyMax"),l=u?parseInt(u.value):8e4;l<8e4&&t.push({label:"Warranty",value:"≤ "+Number(l).toLocaleString()+" mi",clear:()=>{u.value=8e4;let m=d("warrantyVal");m&&(m.textContent="80,000 miles"),se(u)}});let p=d("weightMax"),g=p?parseInt(p.value):70;g<70&&t.push({label:"Weight",value:"≤ "+g+" lb",clear:()=>{p.value=70;let m=d("weightVal");m&&(m.textContent="70 lb"),se(p)}}),d("filter3pms")?.checked&&t.push({label:"3PMS",value:"Yes",clear:()=>{d("filter3pms").checked=!1}}),d("filterEVRated")?.checked&&t.push({label:"EV Rated",value:"Yes",clear:()=>{d("filterEVRated").checked=!1}}),d("filterStudded")?.checked&&t.push({label:"Studded",value:"Yes",clear:()=>{d("filterStudded").checked=!1}}),d("filterReviewed")?.checked&&t.push({label:"Reviewed",value:"Yes",clear:()=>{d("filterReviewed").checked=!1}}),d("filterFavorites")?.checked&&t.push({label:"Favorites",value:"Yes",clear:()=>{d("filterFavorites").checked=!1}}),e.innerHTML="",t.forEach(m=>{let f=document.createElement("span");f.className="filter-chip";let h=document.createElement("span");h.className="filter-chip-label",h.textContent=m.label+":";let x=document.createElement("span");x.textContent=m.value;let E=document.createElement("button");E.className="filter-chip-dismiss",E.setAttribute("aria-label","Remove "+m.label+" filter"),E.innerHTML=L("xmark",12),E.addEventListener("click",()=>{m.clear(),i.lastFilterState=null,we()?pe():P()}),f.appendChild(h),f.appendChild(x),f.appendChild(E),e.appendChild(f)})}function nt(){let e=d("noResults");if(!e)return;let t=[],r=[],n=d("filterSize"),a=d("filterBrand"),o=d("filterCategory"),c=d("priceMax"),s=d("warrantyMax"),u=d("weightMax"),l=d("searchInput");n?.value&&r.push("Size"),a?.value&&r.push("Brand"),o?.value&&r.push("Category"),c&&parseInt(c.value)<600&&r.push("Price"),s&&parseInt(s.value)<8e4&&r.push("Warranty"),u&&parseInt(u.value)<70&&r.push("Weight"),d("filter3pms")?.checked&&r.push("3PMS"),d("filterEVRated")?.checked&&r.push("EV Rated"),d("filterStudded")?.checked&&r.push("Studded"),d("filterReviewed")?.checked&&r.push("Reviewed"),d("filterFavorites")?.checked&&r.push("Favorites"),l?.value?.trim()&&r.push("Search"),r.length>1&&t.push({label:L("rotate-left",14)+" Clear all filters",action:()=>ot()}),d("filterFavorites")?.checked&&t.push({label:L("heart-outline",14)+" Show all tires (not just favorites)",action:()=>{d("filterFavorites").checked=!1,i.lastFilterState=null,P()}}),n?.value&&t.push({label:L("ruler",14)+` Remove size filter (${z(n.value)})`,action:()=>{n.value="",i.lastFilterState=null,P()}}),a?.value&&t.push({label:L("building",14)+" Show all brands",action:()=>{a.value="",i.lastFilterState=null,P()}}),o?.value&&t.push({label:L("tags",14)+" Show all categories",action:()=>{o.value="",i.lastFilterState=null,P()}}),c&&parseInt(c.value)<600&&t.push({label:L("dollar-sign",14)+" Increase price limit to max",action:()=>{c.value=600,d("priceVal").textContent="$600",se(c),i.lastFilterState=null,P()}}),d("filter3pms")?.checked&&t.push({label:L("snowflake",14)+" Remove 3PMS filter",action:()=>{d("filter3pms").checked=!1,i.lastFilterState=null,P()}}),l?.value?.trim()&&t.push({label:L("magnifying-glass",14)+` Clear search "${z(y(l.value.trim(),30))}"`,action:()=>{l.value="",delete i.domCache.searchInput,i.lastFilterState=null,P()}});let p=t.slice(0,4);e.innerHTML="";let g=document.createElement("div");g.className="no-results-icon",g.innerHTML=L("magnifying-glass",24),e.appendChild(g);let m=document.createElement("div");m.className="no-results-title",m.textContent="No tires match your filters",e.appendChild(m);let f=document.createElement("div");if(f.className="no-results-description",r.length>0?f.textContent=`You have ${r.length} active filter${r.length>1?"s":""}: ${r.join(", ")}. Try adjusting your filters to see more options.`:f.textContent="Try adjusting the filters or search to see more options.",e.appendChild(f),p.length>0){let h=document.createElement("div");h.className="no-results-suggestions",p.forEach(x=>{let E=document.createElement("button");E.className="no-results-suggestion-btn",E.innerHTML=x.label,E.addEventListener("click",x.action),h.appendChild(E)}),e.appendChild(h)}}function Ae(){let e=new URLSearchParams;i.currentPage>1&&e.set("pg",i.currentPage);let t=m=>d(m)?.value,r=m=>d(m)?.checked,n=t("searchInput");n&&T.search.test(n)&&e.set("search",n);let a=t("filterSize");a&&i.VALID_SIZES.includes(a)&&e.set("size",a);let o=t("filterBrand");o&&i.VALID_BRANDS.includes(o)&&e.set("brand",o);let c=t("filterCategory");c&&i.VALID_CATEGORIES.includes(c)&&e.set("category",c),r("filter3pms")&&e.set("3pms","1"),r("filterEVRated")&&e.set("ev","1"),r("filterStudded")&&e.set("studded","1"),r("filterReviewed")&&e.set("reviewed","1");let s=t("sortBy");s&&De.includes(s)&&s!=="rating-desc"&&e.set("sort",s);let u=parseInt(t("priceMax"));u&&u!==600&&u>=0&&u<=2e3&&e.set("price",u);let l=parseInt(t("warrantyMax"));l&&l!==8e4&&l>=0&&l<=1e5&&e.set("warranty",l);let p=parseInt(t("weightMax"));p&&p!==70&&p>=0&&p<=200&&e.set("weight",p),d("filterFavorites")?.checked&&e.set("favorites","1");let g=e.toString()?`${location.pathname}?${e.toString()}`:`${location.pathname}`;i.initialRenderDone&&g!==location.pathname+location.search?history.pushState(null,"",g):history.replaceState(null,"",g)}function Ie(){let e=new URLSearchParams(window.location.search),t=(m,f)=>{let h=document.getElementById(m);if(h&&f!==null){let x=ge(f,T.search);h.value=x}},r=(m,f)=>{let h=document.getElementById(m);h&&(h.checked=f==="1")},n=e.get("search");n&&t("searchInput",n);let a=ge(e.get("size"));if(a&&i.VALID_SIZES.includes(a)){let m=document.getElementById("filterSize");m&&(m.value=a)}let o=ge(e.get("brand"));if(o&&i.VALID_BRANDS.includes(o)){let m=document.getElementById("filterBrand");m&&(m.value=o)}let c=ge(e.get("category"));if(c&&i.VALID_CATEGORIES.includes(c)){let m=document.getElementById("filterCategory");m&&(m.value=c)}r("filter3pms",e.get("3pms")),r("filterEVRated",e.get("ev")),r("filterStudded",e.get("studded")),r("filterReviewed",e.get("reviewed")),r("filterFavorites",e.get("favorites"));let s=e.get("sort");if(s&&De.includes(s)){let m=document.getElementById("sortBy");m&&(m.value=s)}let u=e.get("price"),l=e.get("warranty"),p=e.get("weight");if(u){let m=b(u,k.price,600),f=document.getElementById("priceMax");f&&(f.value=m)}if(l){let m=b(l,k.warranty,8e4),f=document.getElementById("warrantyMax");f&&(f.value=m)}if(p){let m=b(p,k.weight,70),f=document.getElementById("weightMax");f&&(f.value=m)}let g=e.get("pg")||e.get("page");if(g){let m=b(g,k.page,1);i.currentPage=m}else i.currentPage=1}function zt(){let t=new URLSearchParams(window.location.search).get("compare");if(!t)return;let{updateCompareBar:r}=lr(),n=t.split(",").map(a=>{let o=parseInt(a.trim());return b(o,{min:0,max:1e4},-1)}).filter(a=>a>=0).slice(0,4);i.compareList=n,document.querySelectorAll(".compare-checkbox").forEach(a=>{let o=parseInt(a.dataset.index);i.compareList.includes(o)&&(a.checked=!0)}),r()}function lr(){return{updateCompareBar:jt}}function Vt(e){jt=e}function Ot(){let t=new URLSearchParams(window.location.search).get("tire");if(!t||!T.tireId.test(t))return;let r=i.allRows.find(l=>l[0]===t);if(!r)return;i.filteredRows=[r],i.currentPage=1;let n=document.querySelector(".filter-wrapper"),a=document.querySelector(".sort-wrapper"),o=d("activeFilters"),c=d("paginationControls"),s=document.querySelector(".toggle-filters-btn");n&&(n.style.display="none"),a&&(a.style.display="none"),o&&(o.style.display="none"),c&&(c.style.display="none"),s&&(s.style.display="none");let u=d("tireSection");if(u){let l=document.createElement("div");l.className="tire-deeplink-bar";let p=document.createElement("a");p.href=window.location.pathname,p.className="tire-deeplink-back",p.innerHTML=L("arrow-left",14)+" View all tires",l.appendChild(p),u.parentNode.insertBefore(l,u)}}function qt(){if(typeof rtgData>"u"||!rtgData.settings||!rtgData.settings.prefilters)return;let e=rtgData.settings.prefilters;if(e.size){let t=document.getElementById("filterSize");t&&(t.value=e.size)}if(e.brand){let t=document.getElementById("filterBrand");t&&(t.value=e.brand)}if(e.category){let t=document.getElementById("filterCategory");t&&(t.value=e.category)}if(e.sort){let t=document.getElementById("sortBy");t&&(t.value=e.sort)}if(e.three_pms){let t=document.getElementById("filter3pms");t&&(t.checked=!0)}}var jt,Te=U(()=>{J();W();ce();Fe();Le();Se();st();tt();jt=()=>{}});var Ut={};mt(Ut,{clearAiRecommendations:()=>dt,initAiRecommend:()=>lt,isAiActive:()=>mr,submitAiQuery:()=>Ht});function lt(){if(typeof rtgData>"u"||!rtgData.settings||!rtgData.settings.aiEnabled)return;let e=d("rtgAiSubmit");if(!e)return;e.addEventListener("click",dr);let t=d("searchInput");t&&t.addEventListener("input",()=>{Me&&dt(!0)})}function dr(){let e=d("searchInput");if(!e)return;let t=e.value.trim();t&&(t===ct&&Me||(ct=t,Ht(t)))}function Ht(e){let t=d("rtgAiStatus"),r=d("rtgAiSummary"),n=d("rtgAiSubmit");t&&(t.style.display="block",t.innerHTML='<div class="rtg-ai-loading"><div class="rtg-ai-spinner"></div><span>Analyzing your needs and finding the best tires...</span></div>'),r&&(r.style.display="none",r.innerHTML=""),n&&(n.disabled=!0);let a=new FormData;a.append("action","rtg_ai_recommend"),a.append("nonce",rtgData.settings.aiNonce),a.append("query",e),fetch(rtgData.settings.ajaxurl,{method:"POST",body:a,credentials:"same-origin"}).then(o=>o.json()).then(o=>{if(n&&(n.disabled=!1),!o.success){qe(o.data||"Something went wrong. Please try again.");return}let{recommendations:c,summary:s}=o.data;if(!c||c.length===0){qe(s||"No matching tires found. Try a different query.");return}ur(c,s)}).catch(()=>{n&&(n.disabled=!1),qe("Unable to reach the AI service. Please check your connection and try again.")})}function qe(e){let t=d("rtgAiStatus");t&&(t.style.display="block",t.innerHTML='<div class="rtg-ai-error"><i class="fa-solid fa-circle-exclamation" aria-hidden="true"></i> '+z(e)+"</div>")}function ur(e,t){let r=d("rtgAiStatus"),n=d("rtgAiSummary");r&&(r.style.display="none",r.innerHTML="");let a=new Map,o=[];e.forEach((s,u)=>{a.set(s.tire_id,{reason:s.reason,rank:u+1}),o.push(s.tire_id)});let c=[];if(o.forEach(s=>{let u=i.allRows.find(l=>l[0]===s);u&&c.push(u)}),c.length===0){qe("The AI recommended tires that could not be found in the current catalog. Please try a different query.");return}if(i.aiRecommendations=a,i.filteredRows=c,i.currentPage=1,Me=!0,n){n.style.display="block",n.innerHTML='<div class="rtg-ai-summary-content"><div class="rtg-ai-summary-icon"><i class="fa-solid fa-wand-magic-sparkles" aria-hidden="true"></i></div><div class="rtg-ai-summary-text"><strong>AI Recommendation</strong><p>'+z(t)+'</p></div><button id="rtgAiClear" class="rtg-ai-clear" type="button" aria-label="Clear AI recommendations"><i class="fa-solid fa-xmark" aria-hidden="true"></i> Clear</button></div>';let s=document.getElementById("rtgAiClear");s&&s.addEventListener("click",()=>dt())}pr()}function pr(){Promise.resolve().then(()=>(Le(),Tt)).then(({renderCards:e})=>{e();let t=d("tireCount");t&&(t.textContent=`AI found ${i.filteredRows.length} recommended tire${i.filteredRows.length!==1?"s":""}`);let r=d("noResults");r&&(r.style.display=i.filteredRows.length>0?"none":"")})}function dt(e){Me=!1,ct="",i.aiRecommendations=null;let t=d("rtgAiSummary"),r=d("rtgAiStatus"),n=d("searchInput");t&&(t.style.display="none",t.innerHTML=""),r&&(r.style.display="none",r.innerHTML=""),n&&!e&&(n.value=""),P()}function mr(){return Me}var Me,ct,ut=U(()=>{J();W();Te();Me=!1,ct=""});function Wt(){return typeof rtgData<"u"&&rtgData.settings&&rtgData.settings.aiEnabled}function hr(){Object.values(_).forEach(e=>e.clear()),i.allRows.forEach((e,t)=>{let[r,n,a,o,c,s,u,l,p,g,m,f,h,x,E,v,w,j]=e,D=y(o).toLowerCase().trim(),G=y(c).toLowerCase().trim(),q=y(s).toLowerCase().trim(),B=y(n).toLowerCase().trim(),X=y(j).toLowerCase().trim();if(D){_.brands.has(D)||_.brands.set(D,{display:y(o).trim(),count:0,rows:[]});let R=_.brands.get(D);R.count++,R.rows.push(t)}if(G){let R=`${D} ${G}`;_.models.has(R)||_.models.set(R,{display:`${y(o).trim()} ${y(c).trim()}`,brand:y(o).trim(),model:y(c).trim(),count:0,rows:[]});let O=_.models.get(R);O.count++,O.rows.push(t)}if(q){_.categories.has(q)||_.categories.set(q,{display:y(s).trim(),count:0,rows:[]});let R=_.categories.get(q);R.count++,R.rows.push(t)}if(B){_.sizes.has(B)||_.sizes.set(B,{display:y(n).trim(),count:0,rows:[]});let R=_.sizes.get(B);R.count++,R.rows.push(t)}X&&X.split(/[,|]/).map(O=>O.trim()).filter(Boolean).forEach(O=>{_.tags.has(O)||_.tags.set(O,{display:O,count:0,rows:[]});let Y=_.tags.get(O);Y.count++,Y.rows.includes(t)||Y.rows.push(t)}),[D,G,q,B,...X.split(/[,|]/).map(R=>R.trim()).filter(Boolean)].filter(Boolean).forEach(R=>{R.length>=2&&(_.combined.has(R)||_.combined.set(R,new Set),_.combined.get(R).add(t))})})}function vr(e,t,r=.7){if(e.length===0)return 1;if(t.length===0)return 0;let n=e.toLowerCase(),a=t.toLowerCase();if(a.includes(n))return n===a?1:.9;let o=Array(e.length+1).fill(null).map(()=>Array(t.length+1).fill(null));for(let l=0;l<=e.length;l++)o[l][0]=l;for(let l=0;l<=t.length;l++)o[0][l]=l;for(let l=1;l<=e.length;l++)for(let p=1;p<=t.length;p++){let g=n[l-1]===a[p-1]?0:1;o[l][p]=Math.min(o[l-1][p]+1,o[l][p-1]+1,o[l-1][p-1]+g)}let c=o[e.length][t.length],s=Math.max(e.length,t.length),u=1-c/s;return u>=r?u:0}function yr(e,t=8){if(!e||e.length<1)return[];let r=`${e.toLowerCase()}_${t}`;if(xe.has(r))return xe.get(r);let n=e.toLowerCase().trim(),a=[],o=new Set,c=(l,p,g=1)=>{let m=`${p}:${l.display.toLowerCase()}`;!o.has(m)&&a.length<t&&(o.add(m),a.push({...l,type:p,score:g,query:n}))},s=(l,p)=>{let g=l.toLowerCase(),m=p.toLowerCase();if(g===m)return{match:!0,score:1};if(g.startsWith(m))return{match:!0,score:.9};let f=g.split(/[\s\-\/\+\(\)]+/),h=m.split(/[\s\-\/\+\(\)]+/);if(f.some(v=>v.startsWith(m)))return{match:!0,score:.8};if(h.every(v=>v.length>=2&&f.some(w=>w.startsWith(v)))&&h.length>1)return{match:!0,score:.7};if(m.length===1)return{match:!1,score:0};if(m.length<=3){let v=f.some(w=>w.startsWith(m));return{match:v,score:v?.6:0}}return g.includes(m)&&m.length>=4?{match:!0,score:.5}:{match:!1,score:0}};if(_.brands.forEach(l=>{let p=s(l.display,n);p.match&&c(l,"brand",p.score)}),_.models.forEach(l=>{let p=s(l.brand,n),g=s(l.model,n),m=s(l.display,n),f=Math.max(p.score,g.score,m.score);f>0&&c(l,"model",f*.95)}),_.categories.forEach(l=>{let p=s(l.display,n);p.match&&c(l,"category",p.score*.9)}),_.sizes.forEach(l=>{let p=s(l.display,n);p.match&&c(l,"size",p.score*.85)}),a.length<3&&n.length>=4){let l=[];_.combined.forEach((p,g)=>{if(g.length>=n.length){let m=vr(n,g,.8);if(m>.8&&l.length<10){let f=_.brands.get(g),h=_.categories.get(g);f?l.push({item:f,type:"brand",score:m*.6}):h&&l.push({item:h,type:"category",score:m*.5})}}}),l.sort((p,g)=>g.score-p.score).slice(0,t-a.length).forEach(p=>c(p.item,p.type,p.score))}let u=a.sort((l,p)=>Math.abs(l.score-p.score)>.05?p.score-l.score:p.count-l.count).slice(0,t);if(xe.size>=fr){let l=xe.keys().next().value;xe.delete(l)}return xe.set(r,u),u}function wr(e,t){let r=document.querySelector(".search-suggestions-dropdown");r&&r.remove();let n=Wt()&&t.value.trim().length>=2;if(!e.length&&!n)return;let a=document.createElement("div");if(a.className="search-suggestions-dropdown",a.style.cssText=`
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: ${C("bg-primary")};
    border: 1px solid #475569;
    border-radius: 0 0 8px 8px;
    border-top: none;
    max-height: 300px;
    overflow-y: auto;
    z-index: 1000;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  `,e.forEach((c,s)=>{let u=document.createElement("div");u.className="search-suggestion-item",u.style.cssText=`
      padding: 12px 16px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: space-between;
      transition: background-color 0.2s ease;
      border-bottom: 1px solid ${C("border")};
    `,s===e.length-1&&(u.style.borderBottom="none");let l=E=>{switch(E){case"brand":return"building";case"model":return"circle";case"category":return"tags";case"size":return"ruler";default:return"magnifying-glass"}},p=document.createElement("div");p.style.cssText="display: flex; align-items: center; gap: 12px; flex: 1;";let g=document.createElement("span");g.innerHTML=L(l(c.type),14),g.style.cssText=`color: ${C("text-muted")}; width: 16px; display: flex; align-items: center;`;let m=document.createElement("div");m.style.cssText=`color: ${C("text-light")}; font-weight: 500;`,m.textContent=c.display,p.appendChild(g),p.appendChild(m);let f=document.createElement("div");f.style.cssText="display: flex; align-items: center; gap: 8px;";let h=document.createElement("span");h.style.cssText=`
      background: ${C("bg-input")};
      color: #9ca3af;
      font-size: 11px;
      padding: 2px 6px;
      border-radius: 4px;
      text-transform: uppercase;
      font-weight: 600;
    `,h.textContent=c.type;let x=document.createElement("span");x.style.cssText="color: #6b7280; font-size: 12px;",x.textContent=`${c.count} tire${c.count!==1?"s":""}`,f.appendChild(h),f.appendChild(x),u.appendChild(p),u.appendChild(f),u.addEventListener("mouseenter",()=>{u.style.backgroundColor=C("bg-input")}),u.addEventListener("mouseleave",()=>{u.style.backgroundColor="transparent"}),u.addEventListener("click",()=>{xr(c,t),ae()}),a.appendChild(u)}),Wt()){let c=t.value.trim();if(c.length>=2){let s=document.createElement("div");s.className="search-suggestion-item search-suggestion-ai",s.style.cssText=`
        padding: 12px 16px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: space-between;
        transition: background-color 0.2s ease;
        border-top: 1px solid ${C("border")};
        background: color-mix(in srgb, ${C("accent")} 6%, ${C("bg-primary")});
      `;let u=document.createElement("div");u.style.cssText="display: flex; align-items: center; gap: 12px; flex: 1; min-width: 0;";let l=document.createElement("span");l.innerHTML='<i class="fa-solid fa-wand-magic-sparkles" aria-hidden="true"></i>',l.style.cssText=`color: ${C("accent")}; width: 16px; display: flex; align-items: center; font-size: 14px;`;let p=document.createElement("div");p.style.cssText=`color: ${C("text-light")}; font-weight: 500; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;`,p.textContent=`Ask AI: "${c}"`,u.appendChild(l),u.appendChild(p);let g=document.createElement("span");g.style.cssText=`
        background: color-mix(in srgb, ${C("accent")} 20%, ${C("bg-input")});
        color: ${C("accent")};
        font-size: 11px;
        padding: 2px 8px;
        border-radius: 4px;
        text-transform: uppercase;
        font-weight: 600;
        flex-shrink: 0;
      `,g.textContent="AI",s.appendChild(u),s.appendChild(g),s.addEventListener("mouseenter",()=>{s.style.backgroundColor=`color-mix(in srgb, ${C("accent")} 15%, ${C("bg-primary")})`}),s.addEventListener("mouseleave",()=>{s.style.backgroundColor=`color-mix(in srgb, ${C("accent")} 6%, ${C("bg-primary")})`}),s.addEventListener("click",()=>{ae(),Promise.resolve().then(()=>(ut(),Ut)).then(({submitAiQuery:m})=>{m(c)})}),a.appendChild(s)}}let o=t.closest(".search-container");o&&(o.style.position="relative",o.appendChild(a))}function xr(e,t){switch(e.type){case"brand":{let r=d("filterBrand");r&&(r.value=e.display),t.value="";break}case"category":{let r=d("filterCategory");r&&(r.value=e.display),t.value="";break}case"size":{let r=d("filterSize");r&&(r.value=e.display),t.value="";break}case"model":{let r=d("filterBrand");r&&e.brand&&(r.value=e.brand),t.value=e.model;break}}P()}function ae(){let e=document.querySelector(".search-suggestions-dropdown");e&&(e.style.opacity="0",setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},150))}function Yt(e){clearTimeout(Gt);let t=e.value.trim();if(t.length===0){ae();return}Gt=setTimeout(()=>{let r=yr(t);wr(r,e)},gr)}function Zt(){let e=d("searchInput");if(!e)return;hr();let t=e.cloneNode(!0);e.parentNode.replaceChild(t,e),i.domCache.searchInput=t,t.addEventListener("input",r=>{Yt(r.target),oe(P,500)()}),t.addEventListener("focus",r=>{r.target.value.trim()&&Yt(r.target)}),document.addEventListener("click",r=>{r.target.closest(".search-container")||ae()}),t.addEventListener("keydown",r=>{let n=document.querySelector(".search-suggestions-dropdown");if(!n)return;let a=n.querySelectorAll(".search-suggestion-item"),o=n.querySelector(".search-suggestion-item.active"),c=o?Array.from(a).indexOf(o):-1;switch(r.key){case"ArrowDown":r.preventDefault(),c=Math.min(c+1,a.length-1);break;case"ArrowUp":r.preventDefault(),c=Math.max(c-1,-1);break;case"Enter":r.preventDefault(),c>=0&&a[c].click();return;case"Escape":ae();return;default:return}a.forEach((s,u)=>{u===c?(s.classList.add("active"),s.style.backgroundColor=C("accent"),s.style.color="#1a1a1a"):(s.classList.remove("active"),s.style.backgroundColor="transparent",s.style.color=C("text-light"))})}),document.addEventListener("filtersReset",()=>{let r=document.querySelector("#searchInput");r&&(r.value="",ae())}),document.addEventListener("click",r=>{r.target.textContent&&r.target.textContent.includes("Clear All")&&setTimeout(()=>{let n=document.querySelector("#searchInput");n&&(n.value="",ae())},50)})}function Oe(e,t){let r=e.toLowerCase().trim(),n=t.toLowerCase().trim();if(!n||r===n||r.startsWith(n))return!0;let a=r.split(/\s+/);return!!(n.split(/\s+/).every(s=>a.some(u=>u===s||s.length>=3&&u.startsWith(s)?!0:s.includes("/")||s.includes("-")?u===s||u.startsWith(s):!1))||n.length>=4&&r.includes(n))}var _,xe,fr,Gt,gr,st=U(()=>{J();W();Te();_={brands:new Map,models:new Map,categories:new Map,sizes:new Map,tags:new Map,combined:new Map},xe=new Map,fr=100,Gt=null,gr=200});J();W();ce();Fe();Ze();st();Se();Le();Xe();et();Te();tt();ut();Vt(je);window.openComparison=Et;window.clearCompare=St;window.resetFilters=ot;typeof tireRatingAjax<"u"&&(i.isLoggedIn=tireRatingAjax.is_logged_in===!0||tireRatingAjax.is_logged_in==="1"||tireRatingAjax.is_logged_in===1);function br(){i.eventDelegationSetup||(document.addEventListener("click",function(e){let t=e.target.closest(".rating-stars.interactive .star");if(t){let a=t.dataset.tireId,o=parseInt(t.dataset.rating);if(!T.tireId.test(a)||!Number.isInteger(o)||o<1||o>5)return;$e(a,o);return}let r=e.target.closest(".write-review-btn");if(r){let a=r.dataset.tireId;if(T.tireId.test(a)){let o=i.userRatings[a]||0;$e(a,o)}return}let n=e.target.closest(".view-reviews-btn");if(n){let a=n.dataset.tireId;T.tireId.test(a)&&wt(a);return}}),document.addEventListener("mouseenter",function(e){let t=e.target.closest(".rating-stars.interactive .star");if(!t||!i.isLoggedIn)return;let r=parseInt(t.dataset.rating);if(!Number.isInteger(r)||r<1||r>5)return;t.closest(".rating-stars").querySelectorAll(".star").forEach((o,c)=>{c<r?o.classList.add("hover"):o.classList.remove("hover")})},!0),document.addEventListener("mouseleave",function(e){let t=e.target.closest(".rating-stars");if(!t)return;t.querySelectorAll(".star").forEach(n=>n.classList.remove("hover"))},!0),document.addEventListener("click",function(e){let t=e.target.closest(".tire-card-cta-primary, .tire-card-cta-review");if(!t)return;let r=t.closest(".tire-card");if(!r)return;let n=r.dataset.tireId;if(!n||!T.tireId.test(n))return;let a="purchase";t.classList.contains("tire-card-cta-review")&&(a="review"),ue.trackClick(n,a)}),document.addEventListener("keydown",function(e){let t=e.target.closest(".rating-stars.interactive .star");if(!t)return;let r=t.closest(".rating-stars"),n=Array.from(r.querySelectorAll(".star")),a=n.indexOf(t);if(e.key==="ArrowRight"||e.key==="ArrowUp"){e.preventDefault();let o=n[Math.min(a+1,n.length-1)];o.setAttribute("tabindex","0"),t.setAttribute("tabindex","-1"),o.focus()}else if(e.key==="ArrowLeft"||e.key==="ArrowDown"){e.preventDefault();let o=n[Math.max(a-1,0)];o.setAttribute("tabindex","0"),t.setAttribute("tabindex","-1"),o.focus()}else(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),t.click())}),i.eventDelegationSetup=!0)}function Kt(){let e=we(),t=e?pe:P,r=e?oe(pe,500):oe(P,500);if(e||(i.VALID_SIZES=[...new Set(i.allRows.map(a=>String(a[1]||"").trim()))].filter(Boolean),i.VALID_BRANDS=[...new Set(i.allRows.map(a=>String(a[3]||"").trim()))].filter(Boolean),i.VALID_CATEGORIES=[...new Set(i.allRows.map(a=>String(a[5]||"").trim()))].filter(Boolean),$t("filterSize",i.allRows),ye("filterBrand",i.allRows.map(a=>a[3])),ye("filterCategory",i.allRows.map(a=>a[5]))),[{id:"searchInput",listener:r},{id:"filterSize",listener:t},{id:"filterBrand",listener:t},{id:"filterCategory",listener:t},{id:"filter3pms",listener:t},{id:"filterEVRated",listener:t},{id:"filterStudded",listener:t},{id:"filterReviewed",listener:t},{id:"filterFavorites",listener:t}].forEach(({id:a,listener:o})=>{let c=d(a);c&&c.addEventListener("input",o)}),qt(),Ie(),zt(),Bt(),br(),Zt(),lt(),e)["priceMax","warrantyMax","weightMax"].forEach(o=>{let c=d(o);c&&c.addEventListener("input",oe(pe,500))}),_t().then(()=>{ke(i.currentPage)});else{Ft(),P(),Ot();let a=d("tireCount");a&&(a.textContent=`Showing ${i.filteredRows.length} tire${i.filteredRows.length!==1?"s":""}`)}bt()}window.addEventListener("popstate",function(){we()||(i.lastFilterState=null,Ie(),P())});ue.init();(function(){let t=document.getElementById("tireCards");if(!t||t.children.length>0)return;let r=typeof rtgData<"u"&&rtgData.settings&&rtgData.settings.rowsPerPage||12,n=document.createElement("div");n.className="rtg-skeleton-grid",n.id="rtg-skeleton-loader";for(let a=0;a<Math.min(r,12);a++)n.innerHTML+='<div class="rtg-skeleton-card"><div class="rtg-skeleton-shimmer rtg-skeleton-image"></div><div class="rtg-skeleton-shimmer rtg-skeleton-title"></div><div class="rtg-skeleton-shimmer rtg-skeleton-subtitle"></div><div class="rtg-skeleton-row"><div class="rtg-skeleton-shimmer rtg-skeleton-badge"></div><div class="rtg-skeleton-shimmer rtg-skeleton-badge"></div></div><div class="rtg-skeleton-shimmer rtg-skeleton-text"></div><div class="rtg-skeleton-shimmer rtg-skeleton-text-short"></div><div class="rtg-skeleton-shimmer rtg-skeleton-stars"></div></div>';t.appendChild(n)})();typeof rtgData<"u"&&rtgData.settings&&rtgData.settings.serverSide?(i.serverSideMode=!0,typeof tireRatingAjax<"u"&&(i.isLoggedIn=tireRatingAjax.is_logged_in===!0||tireRatingAjax.is_logged_in==="1"||tireRatingAjax.is_logged_in===1),i.allRows=[],i.filteredRows=[],Kt()):typeof rtgData<"u"&&rtgData.tires&&Array.isArray(rtgData.tires)&&(i.allRows=rtgData.tires.map(Ne).filter(e=>e&&e.length&&e[0]),i.filteredRows=i.allRows,typeof tireRatingAjax<"u"&&(i.isLoggedIn=tireRatingAjax.is_logged_in===!0||tireRatingAjax.is_logged_in==="1"||tireRatingAjax.is_logged_in===1),Kt());document.addEventListener("click",e=>{let t=d("compareModal"),r=t?.querySelector("div");t?.style.display==="flex"&&t.contains(e.target)&&!r?.contains(e.target)&&(t.style.display="none",document.body.style.overflow="")});document.addEventListener("DOMContentLoaded",()=>{function e(){document.querySelectorAll(".switch-label").forEach(u=>{let l=u.querySelector('input[type="checkbox"]'),p=u.querySelector(".switch-text");if(l&&p){let g=l.id,m=null,f="";switch(g){case"filter3pms":m="3PMS Filter",f="3PMS Rated";break;case"filterEVRated":m="EV Rated Filter",f="EV Rated";break;case"filterStudded":m="Studded Available Filter",f="Studded Available";break}if(m){let h=Pe(f,m);p.innerHTML="",p.appendChild(h)}}})}function t(){setTimeout(()=>{[{selector:"filter3pms",label:"3PMS Rated",key:"3PMS Filter"},{selector:"filterEVRated",label:"EV Rated",key:"EV Rated Filter"},{selector:"filterStudded",label:"Studded Available",key:"Studded Available Filter"}].forEach(({selector:u,label:l,key:p})=>{let g=document.querySelector(`.switch-label:has(input#${u}) .switch-text`);if(g){let m=Pe(l,p);g.innerHTML="",g.appendChild(m)}else{let m=document.getElementById(u);if(m){let f=m.parentElement.querySelector(".switch-text");if(f){let h=Pe(l,p);f.innerHTML="",f.appendChild(h)}}}})},100)}e(),t(),document.addEventListener("click",s=>{let u=s.target.closest(".info-tooltip-trigger");if(u){s.preventDefault(),s.stopPropagation();let l=u.dataset.tooltipKey;yt(l,u)}});let r=d("sortBy");r&&r.addEventListener("input",P);let n=d("toggleFilters"),a=d("mobileFilterContent");n&&a&&(n.setAttribute("aria-expanded","false"),n.setAttribute("aria-controls","mobileFilterContent"),n.addEventListener("click",()=>{let s=a.classList.toggle("open");n.textContent=s?"Hide Filters":"Show Filters",n.setAttribute("aria-expanded",s?"true":"false")}));let o=d("wheelDrawerTrigger"),c=d("wheelDrawer");o&&c&&(o.setAttribute("aria-expanded","false"),o.setAttribute("aria-controls","wheelDrawer"),o.addEventListener("click",()=>{let s=c.style.display!=="block";c.style.display=s?"block":"none",o.setAttribute("aria-expanded",s?"true":"false")}))});})();
