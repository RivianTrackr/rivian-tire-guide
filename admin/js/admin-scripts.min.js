(function(e){"use strict";var l=null;e(document).ready(function(){var c=e("#image"),f=e("#image_prefix");c.length&&c.on("input",function(){var t=e(this).val().trim(),a=f.length?f.val():"",o=t;t&&a&&!/^https?:\/\//i.test(t)&&(o=a+t);var r=e("#image-preview"),n=e("#image-preview-container");try{var i=new URL(o)}catch{i=null}i&&/^https?:$/.test(i.protocol)&&/\.(jpg|jpeg|png|webp|gif)(\?|$)/i.test(i.pathname)?r.length&&(r[0].src=i.href,n.length&&n.show()):n.length&&n.hide()}),e("#cb-select-all").on("change",function(){e('input[name="tire_ids[]"]').prop("checked",this.checked)}),e("form").on("submit",function(){var t=e('select[name="rtg_bulk_action"]').val();if(t==="delete"){var a=e('input[name="tire_ids[]"]:checked').length;return a===0?(alert("No tires selected."),!1):confirm("Delete "+a+" tire(s)? This cannot be undone.")}}),e(".rtg-notice-dismiss").on("click",function(){e(this).closest(".rtg-notice").fadeOut(200,function(){e(this).remove()})}),e(document).on("click",".rtg-tag-suggestion",function(){var t=e(this).data("tag"),a=e("#tags"),o=a.val().trim(),r=o?o.split(",").map(function(i){return i.trim()}).filter(function(i){return i.length>0}):[],n=r.indexOf(t);n>-1?(r.splice(n,1),e(this).css({background:"#f5f5f7",color:"#1d1d1f"})):(r.push(t),e(this).css({background:"#0071e3",color:"#fff"})),a.val(r.join(", "))});var g=e("#tags");if(g.length&&g.val().trim()){var s=g.val().split(",").map(function(t){return t.trim()});e(".rtg-tag-suggestion").each(function(){s.indexOf(e(this).data("tag"))>-1&&e(this).css({background:"#0071e3",color:"#fff"})})}if(e("#size").on("change",function(){var t=e(this).find("option:selected"),a=t.data("diameter")||"";e("#diameter").val(a)}),e("#load_index").on("change",function(){var t=e(this).find("option:selected"),a=t.data("max-load")||"";e("#max_load_lb").val(a)}),e("#rtg-efficiency-preview").length){var u="#size, #weight_lb, #tread, #load_range, #speed_rating, #utqg, #category, #three_pms";e(u).on("input change",function(){d()}),d()}});function d(){l&&clearTimeout(l),l=setTimeout(function(){typeof rtgAdmin>"u"||e.post(rtgAdmin.ajaxurl,{action:"rtg_calculate_efficiency",nonce:rtgAdmin.nonce,size:e("#size").val()||"",weight_lb:e("#weight_lb").val()||"0",tread:e("#tread").val()||"",load_range:e("#load_range").val()||"",speed_rating:e("#speed_rating").val()||"",utqg:e("#utqg").val()||"",category:e("#category").val()||"",three_pms:e("#three_pms").val()||"No"},function(c){if(c.success){var f=c.data.efficiency_score,g=c.data.efficiency_grade,s={A:"rtg-grade-a",B:"rtg-grade-b",C:"rtg-grade-c",D:"rtg-grade-d",F:"rtg-grade-f"};e("#rtg-eff-grade").removeClass("rtg-grade-a rtg-grade-b rtg-grade-c rtg-grade-d rtg-grade-f rtg-grade-none").addClass(s[g]||"").text(g),e("#rtg-eff-score").text(f)}})},300)}})(jQuery);
